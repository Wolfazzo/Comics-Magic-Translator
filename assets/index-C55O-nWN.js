(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const r of u)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(u){const r={};return u.integrity&&(r.integrity=u.integrity),u.referrerPolicy&&(r.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?r.credentials="include":u.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(u){if(u.ep)return;u.ep=!0;const r=i(u);fetch(u.href,r)}})();function rd(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Bc={exports:{}},ls={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function My(){if(Pp)return ls;Pp=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(a,u,r){var p=null;if(r!==void 0&&(p=""+r),u.key!==void 0&&(p=""+u.key),"key"in u){r={};for(var y in u)y!=="key"&&(r[y]=u[y])}else r=u;return u=r.ref,{$$typeof:o,type:a,key:p,ref:u!==void 0?u:null,props:r}}return ls.Fragment=n,ls.jsx=i,ls.jsxs=i,ls}var Lp;function Ry(){return Lp||(Lp=1,Bc.exports=My()),Bc.exports}var m=Ry(),qc={exports:{}},mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp;function Ny(){if(Fp)return mt;Fp=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),T=Symbol.iterator;function b(U){return U===null||typeof U!="object"?null:(U=T&&U[T]||U["@@iterator"],typeof U=="function"?U:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,q={};function F(U,te,be){this.props=U,this.context=te,this.refs=q,this.updater=be||I}F.prototype.isReactComponent={},F.prototype.setState=function(U,te){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,te,"setState")},F.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function P(){}P.prototype=F.prototype;function H(U,te,be){this.props=U,this.context=te,this.refs=q,this.updater=be||I}var ee=H.prototype=new P;ee.constructor=H,z(ee,F.prototype),ee.isPureReactComponent=!0;var _e=Array.isArray;function ye(){}var ie={H:null,A:null,T:null,S:null},ge=Object.prototype.hasOwnProperty;function me(U,te,be){var Te=be.ref;return{$$typeof:o,type:U,key:te,ref:Te!==void 0?Te:null,props:be}}function ce(U,te){return me(U.type,te,U.props)}function De(U){return typeof U=="object"&&U!==null&&U.$$typeof===o}function Z(U){var te={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(be){return te[be]})}var gt=/\/+/g;function fe(U,te){return typeof U=="object"&&U!==null&&U.key!=null?Z(""+U.key):te.toString(36)}function it(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(ye,ye):(U.status="pending",U.then(function(te){U.status==="pending"&&(U.status="fulfilled",U.value=te)},function(te){U.status==="pending"&&(U.status="rejected",U.reason=te)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function N(U,te,be,Te,je){var lt=typeof U;(lt==="undefined"||lt==="boolean")&&(U=null);var ut=!1;if(U===null)ut=!0;else switch(lt){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(U.$$typeof){case o:case n:ut=!0;break;case S:return ut=U._init,N(ut(U._payload),te,be,Te,je)}}if(ut)return je=je(U),ut=Te===""?"."+fe(U,0):Te,_e(je)?(be="",ut!=null&&(be=ut.replace(gt,"$&/")+"/"),N(je,te,be,"",function(Dn){return Dn})):je!=null&&(De(je)&&(je=ce(je,be+(je.key==null||U&&U.key===je.key?"":(""+je.key).replace(gt,"$&/")+"/")+ut)),te.push(je)),1;ut=0;var Ut=Te===""?".":Te+":";if(_e(U))for(var pt=0;pt<U.length;pt++)Te=U[pt],lt=Ut+fe(Te,pt),ut+=N(Te,te,be,lt,je);else if(pt=b(U),typeof pt=="function")for(U=pt.call(U),pt=0;!(Te=U.next()).done;)Te=Te.value,lt=Ut+fe(Te,pt++),ut+=N(Te,te,be,lt,je);else if(lt==="object"){if(typeof U.then=="function")return N(it(U),te,be,Te,je);throw te=String(U),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ut}function se(U,te,be){if(U==null)return U;var Te=[],je=0;return N(U,Te,"","",function(lt){return te.call(be,lt,je++)}),Te}function Je(U){if(U._status===-1){var te=U._result;te=te(),te.then(function(be){(U._status===0||U._status===-1)&&(U._status=1,U._result=be)},function(be){(U._status===0||U._status===-1)&&(U._status=2,U._result=be)}),U._status===-1&&(U._status=0,U._result=te)}if(U._status===1)return U._result.default;throw U._result}var Ge=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},st={map:se,forEach:function(U,te,be){se(U,function(){te.apply(this,arguments)},be)},count:function(U){var te=0;return se(U,function(){te++}),te},toArray:function(U){return se(U,function(te){return te})||[]},only:function(U){if(!De(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return mt.Activity=x,mt.Children=st,mt.Component=F,mt.Fragment=i,mt.Profiler=u,mt.PureComponent=H,mt.StrictMode=a,mt.Suspense=v,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,mt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return ie.H.useMemoCache(U)}},mt.cache=function(U){return function(){return U.apply(null,arguments)}},mt.cacheSignal=function(){return null},mt.cloneElement=function(U,te,be){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Te=z({},U.props),je=U.key;if(te!=null)for(lt in te.key!==void 0&&(je=""+te.key),te)!ge.call(te,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&te.ref===void 0||(Te[lt]=te[lt]);var lt=arguments.length-2;if(lt===1)Te.children=be;else if(1<lt){for(var ut=Array(lt),Ut=0;Ut<lt;Ut++)ut[Ut]=arguments[Ut+2];Te.children=ut}return me(U.type,je,Te)},mt.createContext=function(U){return U={$$typeof:p,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:r,_context:U},U},mt.createElement=function(U,te,be){var Te,je={},lt=null;if(te!=null)for(Te in te.key!==void 0&&(lt=""+te.key),te)ge.call(te,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(je[Te]=te[Te]);var ut=arguments.length-2;if(ut===1)je.children=be;else if(1<ut){for(var Ut=Array(ut),pt=0;pt<ut;pt++)Ut[pt]=arguments[pt+2];je.children=Ut}if(U&&U.defaultProps)for(Te in ut=U.defaultProps,ut)je[Te]===void 0&&(je[Te]=ut[Te]);return me(U,lt,je)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(U){return{$$typeof:y,render:U}},mt.isValidElement=De,mt.lazy=function(U){return{$$typeof:S,_payload:{_status:-1,_result:U},_init:Je}},mt.memo=function(U,te){return{$$typeof:g,type:U,compare:te===void 0?null:te}},mt.startTransition=function(U){var te=ie.T,be={};ie.T=be;try{var Te=U(),je=ie.S;je!==null&&je(be,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(ye,Ge)}catch(lt){Ge(lt)}finally{te!==null&&be.types!==null&&(te.types=be.types),ie.T=te}},mt.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},mt.use=function(U){return ie.H.use(U)},mt.useActionState=function(U,te,be){return ie.H.useActionState(U,te,be)},mt.useCallback=function(U,te){return ie.H.useCallback(U,te)},mt.useContext=function(U){return ie.H.useContext(U)},mt.useDebugValue=function(){},mt.useDeferredValue=function(U,te){return ie.H.useDeferredValue(U,te)},mt.useEffect=function(U,te){return ie.H.useEffect(U,te)},mt.useEffectEvent=function(U){return ie.H.useEffectEvent(U)},mt.useId=function(){return ie.H.useId()},mt.useImperativeHandle=function(U,te,be){return ie.H.useImperativeHandle(U,te,be)},mt.useInsertionEffect=function(U,te){return ie.H.useInsertionEffect(U,te)},mt.useLayoutEffect=function(U,te){return ie.H.useLayoutEffect(U,te)},mt.useMemo=function(U,te){return ie.H.useMemo(U,te)},mt.useOptimistic=function(U,te){return ie.H.useOptimistic(U,te)},mt.useReducer=function(U,te,be){return ie.H.useReducer(U,te,be)},mt.useRef=function(U){return ie.H.useRef(U)},mt.useState=function(U){return ie.H.useState(U)},mt.useSyncExternalStore=function(U,te,be){return ie.H.useSyncExternalStore(U,te,be)},mt.useTransition=function(){return ie.H.useTransition()},mt.version="19.2.0",mt}var Hp;function ud(){return Hp||(Hp=1,qc.exports=Ny()),qc.exports}var A=ud();const wo=rd(A);var Gc={exports:{}},is={},Oc={exports:{}},Vc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp;function Dy(){return Bp||(Bp=1,(function(o){function n(N,se){var Je=N.length;N.push(se);e:for(;0<Je;){var Ge=Je-1>>>1,st=N[Ge];if(0<u(st,se))N[Ge]=se,N[Je]=st,Je=Ge;else break e}}function i(N){return N.length===0?null:N[0]}function a(N){if(N.length===0)return null;var se=N[0],Je=N.pop();if(Je!==se){N[0]=Je;e:for(var Ge=0,st=N.length,U=st>>>1;Ge<U;){var te=2*(Ge+1)-1,be=N[te],Te=te+1,je=N[Te];if(0>u(be,Je))Te<st&&0>u(je,be)?(N[Ge]=je,N[Te]=Je,Ge=Te):(N[Ge]=be,N[te]=Je,Ge=te);else if(Te<st&&0>u(je,Je))N[Ge]=je,N[Te]=Je,Ge=Te;else break e}}return se}function u(N,se){var Je=N.sortIndex-se.sortIndex;return Je!==0?Je:N.id-se.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;o.unstable_now=function(){return r.now()}}else{var p=Date,y=p.now();o.unstable_now=function(){return p.now()-y}}var v=[],g=[],S=1,x=null,T=3,b=!1,I=!1,z=!1,q=!1,F=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function ee(N){for(var se=i(g);se!==null;){if(se.callback===null)a(g);else if(se.startTime<=N)a(g),se.sortIndex=se.expirationTime,n(v,se);else break;se=i(g)}}function _e(N){if(z=!1,ee(N),!I)if(i(v)!==null)I=!0,ye||(ye=!0,Z());else{var se=i(g);se!==null&&it(_e,se.startTime-N)}}var ye=!1,ie=-1,ge=5,me=-1;function ce(){return q?!0:!(o.unstable_now()-me<ge)}function De(){if(q=!1,ye){var N=o.unstable_now();me=N;var se=!0;try{e:{I=!1,z&&(z=!1,P(ie),ie=-1),b=!0;var Je=T;try{t:{for(ee(N),x=i(v);x!==null&&!(x.expirationTime>N&&ce());){var Ge=x.callback;if(typeof Ge=="function"){x.callback=null,T=x.priorityLevel;var st=Ge(x.expirationTime<=N);if(N=o.unstable_now(),typeof st=="function"){x.callback=st,ee(N),se=!0;break t}x===i(v)&&a(v),ee(N)}else a(v);x=i(v)}if(x!==null)se=!0;else{var U=i(g);U!==null&&it(_e,U.startTime-N),se=!1}}break e}finally{x=null,T=Je,b=!1}se=void 0}}finally{se?Z():ye=!1}}}var Z;if(typeof H=="function")Z=function(){H(De)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,fe=gt.port2;gt.port1.onmessage=De,Z=function(){fe.postMessage(null)}}else Z=function(){F(De,0)};function it(N,se){ie=F(function(){N(o.unstable_now())},se)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(N){N.callback=null},o.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<N?Math.floor(1e3/N):5},o.unstable_getCurrentPriorityLevel=function(){return T},o.unstable_next=function(N){switch(T){case 1:case 2:case 3:var se=3;break;default:se=T}var Je=T;T=se;try{return N()}finally{T=Je}},o.unstable_requestPaint=function(){q=!0},o.unstable_runWithPriority=function(N,se){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Je=T;T=N;try{return se()}finally{T=Je}},o.unstable_scheduleCallback=function(N,se,Je){var Ge=o.unstable_now();switch(typeof Je=="object"&&Je!==null?(Je=Je.delay,Je=typeof Je=="number"&&0<Je?Ge+Je:Ge):Je=Ge,N){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=Je+st,N={id:S++,callback:se,priorityLevel:N,startTime:Je,expirationTime:st,sortIndex:-1},Je>Ge?(N.sortIndex=Je,n(g,N),i(v)===null&&N===i(g)&&(z?(P(ie),ie=-1):z=!0,it(_e,Je-Ge))):(N.sortIndex=st,n(v,N),I||b||(I=!0,ye||(ye=!0,Z()))),N},o.unstable_shouldYield=ce,o.unstable_wrapCallback=function(N){var se=T;return function(){var Je=T;T=se;try{return N.apply(this,arguments)}finally{T=Je}}}})(Vc)),Vc}var qp;function Iy(){return qp||(qp=1,Oc.exports=Dy()),Oc.exports}var Yc={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gp;function Uy(){if(Gp)return Vn;Gp=1;var o=ud();function n(v){var g="https://react.dev/errors/"+v;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function r(v,g,S){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:x==null?null:""+x,children:v,containerInfo:g,implementation:S}}var p=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,g){if(v==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Vn.createPortal=function(v,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return r(v,g,null,S)},Vn.flushSync=function(v){var g=p.T,S=a.p;try{if(p.T=null,a.p=2,v)return v()}finally{p.T=g,a.p=S,a.d.f()}},Vn.preconnect=function(v,g){typeof v=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(v,g))},Vn.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},Vn.preinit=function(v,g){if(typeof v=="string"&&g&&typeof g.as=="string"){var S=g.as,x=y(S,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,b=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;S==="style"?a.d.S(v,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:b}):S==="script"&&a.d.X(v,{crossOrigin:x,integrity:T,fetchPriority:b,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Vn.preinitModule=function(v,g){if(typeof v=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var S=y(g.as,g.crossOrigin);a.d.M(v,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(v)},Vn.preload=function(v,g){if(typeof v=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var S=g.as,x=y(S,g.crossOrigin);a.d.L(v,S,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Vn.preloadModule=function(v,g){if(typeof v=="string")if(g){var S=y(g.as,g.crossOrigin);a.d.m(v,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(v)},Vn.requestFormReset=function(v){a.d.r(v)},Vn.unstable_batchedUpdates=function(v,g){return v(g)},Vn.useFormState=function(v,g,S){return p.H.useFormState(v,g,S)},Vn.useFormStatus=function(){return p.H.useHostTransitionStatus()},Vn.version="19.2.0",Vn}var Op;function Sm(){if(Op)return Yc.exports;Op=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Yc.exports=Uy(),Yc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function ky(){if(Vp)return is;Vp=1;var o=Iy(),n=ud(),i=Sm();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function r(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(r(e)!==e)throw Error(a(188))}function g(e){var t=e.alternate;if(!t){if(t=r(e),t===null)throw Error(a(188));return t!==e?null:e}for(var l=e,s=t;;){var f=l.return;if(f===null)break;var h=f.alternate;if(h===null){if(s=f.return,s!==null){l=s;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===l)return v(f),e;if(h===s)return v(f),t;h=h.sibling}throw Error(a(188))}if(l.return!==s.return)l=f,s=h;else{for(var C=!1,E=f.child;E;){if(E===l){C=!0,l=f,s=h;break}if(E===s){C=!0,s=f,l=h;break}E=E.sibling}if(!C){for(E=h.child;E;){if(E===l){C=!0,l=h,s=f;break}if(E===s){C=!0,s=h,l=f;break}E=E.sibling}if(!C)throw Error(a(189))}}if(l.alternate!==s)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),H=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),me=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),De=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=De&&e[De]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Symbol.for("react.client.reference");function fe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===gt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case F:return"Profiler";case q:return"StrictMode";case _e:return"Suspense";case ye:return"SuspenseList";case me:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case H:return e.displayName||"Context";case P:return(e._context.displayName||"Context")+".Consumer";case ee:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ie:return t=e.displayName||null,t!==null?t:fe(e.type)||"Memo";case ge:t=e._payload,e=e._init;try{return fe(e(t))}catch{}}return null}var it=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Je={pending:!1,data:null,method:null,action:null},Ge=[],st=-1;function U(e){return{current:e}}function te(e){0>st||(e.current=Ge[st],Ge[st]=null,st--)}function be(e,t){st++,Ge[st]=e.current,e.current=t}var Te=U(null),je=U(null),lt=U(null),ut=U(null);function Ut(e,t){switch(be(lt,t),be(je,e),be(Te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ip(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ip(t),e=ap(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}te(Te),be(Te,e)}function pt(){te(Te),te(je),te(lt)}function Dn(e){e.memoizedState!==null&&be(ut,e);var t=Te.current,l=ap(t,e.type);t!==l&&(be(je,e),be(Te,l))}function cn(e){je.current===e&&(te(Te),te(je)),ut.current===e&&(te(ut),es._currentValue=Je)}var An,Kt;function bt(e){if(An===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);An=t&&t[1]||"",Kt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+An+e+Kt}var bn=!1;function le(e,t){if(!e||bn)return"";bn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch($){var X=$}Reflect.construct(e,[],pe)}else{try{pe.call()}catch($){X=$}e.call(pe.prototype)}}else{try{throw Error()}catch($){X=$}(pe=e())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch($){if($&&X&&typeof $.stack=="string")return[$.stack,X.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=s.DetermineComponentFrameRoot(),C=h[0],E=h[1];if(C&&E){var R=C.split(`
`),K=E.split(`
`);for(f=s=0;s<R.length&&!R[s].includes("DetermineComponentFrameRoot");)s++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(s===R.length||f===K.length)for(s=R.length-1,f=K.length-1;1<=s&&0<=f&&R[s]!==K[f];)f--;for(;1<=s&&0<=f;s--,f--)if(R[s]!==K[f]){if(s!==1||f!==1)do if(s--,f--,0>f||R[s]!==K[f]){var ue=`
`+R[s].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=s&&0<=f);break}}}finally{bn=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?bt(l):""}function tt(e,t){switch(e.tag){case 26:case 27:case 5:return bt(e.type);case 16:return bt("Lazy");case 13:return e.child!==t&&t!==null?bt("Suspense Fallback"):bt("Suspense");case 19:return bt("SuspenseList");case 0:case 15:return le(e.type,!1);case 11:return le(e.type.render,!1);case 1:return le(e.type,!0);case 31:return bt("Activity");default:return""}}function ht(e){try{var t="",l=null;do t+=tt(e,l),l=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var at=Object.prototype.hasOwnProperty,It=o.unstable_scheduleCallback,Fe=o.unstable_cancelCallback,sn=o.unstable_shouldYield,Ne=o.unstable_requestPaint,ct=o.unstable_now,rn=o.unstable_getCurrentPriorityLevel,et=o.unstable_ImmediatePriority,St=o.unstable_UserBlockingPriority,nn=o.unstable_NormalPriority,Dt=o.unstable_LowPriority,hn=o.unstable_IdlePriority,Ot=o.log,In=o.unstable_setDisableYieldValue,mn=null,Ft=null;function yn(e){if(typeof Ot=="function"&&In(e),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(mn,e)}catch{}}var Zt=Math.clz32?Math.clz32:Jn,Bn=Math.log,Ht=Math.LN2;function Jn(e){return e>>>=0,e===0?32:31-(Bn(e)/Ht|0)|0}var Un=256,to=262144,j=4194304;function Me(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Be(e,t,l){var s=e.pendingLanes;if(s===0)return 0;var f=0,h=e.suspendedLanes,C=e.pingedLanes;e=e.warmLanes;var E=s&134217727;return E!==0?(s=E&~h,s!==0?f=Me(s):(C&=E,C!==0?f=Me(C):l||(l=E&~e,l!==0&&(f=Me(l))))):(E=s&~h,E!==0?f=Me(E):C!==0?f=Me(C):l||(l=s&~e,l!==0&&(f=Me(l)))),f===0?0:t!==0&&t!==f&&(t&h)===0&&(h=f&-f,l=t&-t,h>=l||h===32&&(l&4194048)!==0)?t:f}function Oe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qe(){var e=j;return j<<=1,(j&62914560)===0&&(j=4194304),e}function Pe(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function V(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ae(e,t,l,s,f,h){var C=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var E=e.entanglements,R=e.expirationTimes,K=e.hiddenUpdates;for(l=C&~l;0<l;){var ue=31-Zt(l),pe=1<<ue;E[ue]=0,R[ue]=-1;var X=K[ue];if(X!==null)for(K[ue]=null,ue=0;ue<X.length;ue++){var $=X[ue];$!==null&&($.lane&=-536870913)}l&=~pe}s!==0&&_(e,s,0),h!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=h&~(C&~t))}function _(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Zt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function he(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var s=31-Zt(l),f=1<<s;f&t|e[s]&t&&(e[s]|=t),l&=~f}}function Ce(e,t){var l=t&-t;return l=(l&42)!==0?1:Ae(l),(l&(e.suspendedLanes|t))!==0?0:l}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xe(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function He(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:Rp(e.type))}function ve(e,t){var l=se.p;try{return se.p=e,t()}finally{se.p=l}}var Re=Math.random().toString(36).slice(2),Le="__reactFiber$"+Re,Se="__reactProps$"+Re,Ue="__reactContainer$"+Re,Ze="__reactEvents$"+Re,Tt="__reactListeners$"+Re,ke="__reactHandles$"+Re,nt="__reactResources$"+Re,Qe="__reactMarker$"+Re;function Et(e){delete e[Le],delete e[Se],delete e[Ze],delete e[Tt],delete e[ke]}function jt(e){var t=e[Le];if(t)return t;for(var l=e.parentNode;l;){if(t=l[Ue]||l[Le]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=hp(e);e!==null;){if(l=e[Le])return l;e=hp(e)}return t}e=l,l=e.parentNode}return null}function Qt(e){if(e=e[Le]||e[Ue]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function on(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function vn(e){var t=e[nt];return t||(t=e[nt]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function _t(e){e[Qe]=!0}var Bt=new Set,qn={};function un(e,t){_n(e,t),_n(e+"Capture",t)}function _n(e,t){for(qn[e]=t,e=0;e<t.length;e++)Bt.add(t[e])}var da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),al={},Ol={};function Vl(e){return at.call(Ol,e)?!0:at.call(al,e)?!1:da.test(e)?Ol[e]=!0:(al[e]=!0,!1)}function Ho(e,t,l){if(Vl(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function Bo(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function ln(e,t,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+s)}}function Ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yl(e,t,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,h=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return f.call(this)},set:function(C){l=""+C,h.call(this,C)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(C){l=""+C},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gn(e){if(!e._valueTracker){var t=sl(e)?"checked":"value";e._valueTracker=Yl(e,t,""+e[t])}}function Jl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),s="";return e&&(s=sl(e)?e.checked?"true":"false":e.value),e=s,e!==l?(t.setValue(e),!0):!1}function qo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var yi=/[\n"\\]/g;function kn(e){return e.replace(yi,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function rl(e,t,l,s,f,h,C,E){e.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.type=C:e.removeAttribute("type"),t!=null?C==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ct(t)):e.value!==""+Ct(t)&&(e.value=""+Ct(t)):C!=="submit"&&C!=="reset"||e.removeAttribute("value"),t!=null?fa(e,C,Ct(t)):l!=null?fa(e,C,Ct(l)):s!=null&&e.removeAttribute("value"),f==null&&h!=null&&(e.defaultChecked=!!h),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Ct(E):e.removeAttribute("name")}function cs(e,t,l,s,f,h,C,E){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||l!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){Gn(e);return}l=l!=null?""+Ct(l):"",t=t!=null?""+Ct(t):l,E||t===e.value||(e.value=t),e.defaultValue=t}s=s??f,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=E?e.checked:!!s,e.defaultChecked=!!s,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(e.name=C),Gn(e)}function fa(e,t,l){t==="number"&&qo(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function ul(e,t,l,s){if(e=e.options,t){t={};for(var f=0;f<l.length;f++)t["$"+l[f]]=!0;for(l=0;l<e.length;l++)f=t.hasOwnProperty("$"+e[l].value),e[l].selected!==f&&(e[l].selected=f),f&&s&&(e[l].defaultSelected=!0)}else{for(l=""+Ct(l),t=null,f=0;f<e.length;f++){if(e[f].value===l){e[f].selected=!0,s&&(e[f].defaultSelected=!0);return}t!==null||e[f].disabled||(t=e[f])}t!==null&&(t.selected=!0)}}function ds(e,t,l){if(t!=null&&(t=""+Ct(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+Ct(l):""}function cl(e,t,l,s){if(t==null){if(s!=null){if(l!=null)throw Error(a(92));if(it(s)){if(1<s.length)throw Error(a(93));s=s[0]}l=s}l==null&&(l=""),t=l}l=Ct(t),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),Gn(e)}function Do(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var Pr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fs(e,t,l){var s=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,l):typeof l!="number"||l===0||Pr.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function hs(e,t,l){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var f in t)s=t[f],t.hasOwnProperty(f)&&l[f]!==s&&fs(e,f,s)}else for(var h in t)t.hasOwnProperty(h)&&fs(e,h,t[h])}function dl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Go(e){return xi.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function no(){}var Si=null;function ha(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Io=null,Uo=null;function pa(e){var t=Qt(e);if(t&&(e=t.stateNode)){var l=e[Se]||null;e:switch(e=t.stateNode,t.type){case"input":if(rl(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+kn(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var s=l[t];if(s!==e&&s.form===e.form){var f=s[Se]||null;if(!f)throw Error(a(90));rl(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(t=0;t<l.length;t++)s=l[t],s.form===e.form&&Jl(s)}break e;case"textarea":ds(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&ul(e,!!l.multiple,t,!1)}}}var ga=!1;function ps(e,t,l){if(ga)return e(t,l);ga=!0;try{var s=e(t);return s}finally{if(ga=!1,(Io!==null||Uo!==null)&&(tr(),Io&&(t=Io,e=Uo,Uo=Io=null,pa(t),e)))for(t=0;t<e.length;t++)pa(e[t])}}function Kl(e,t){var l=e.stateNode;if(l===null)return null;var s=l[Se]||null;if(s===null)return null;l=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(a(231,t,typeof l));return l}var ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=!1;if(ho)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{Ci=!1}var po=null,jl=null,fl=null;function ma(){if(fl)return fl;var e,t=jl,l=t.length,s,f="value"in po?po.value:po.textContent,h=f.length;for(e=0;e<l&&t[e]===f[e];e++);var C=l-e;for(s=1;s<=C&&t[l-s]===f[h-s];s++);return fl=f.slice(e,1<s?1-s:void 0)}function Wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ti(){return!0}function gs(){return!1}function On(e){function t(l,s,f,h,C){this._reactName=l,this._targetInst=f,this.type=s,this.nativeEvent=h,this.target=C,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(l=e[E],this[E]=l?l(h):h[E]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ti:gs,this.isPropagationStopped=gs,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ti)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ti)},persist:function(){},isPersistent:Ti}),t}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=On(Oo),hl=x({},Oo,{view:0,detail:0}),Lr=On(hl),ya,wi,pl,gl=x({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ai,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pl&&(pl&&e.type==="mousemove"?(ya=e.screenX-pl.screenX,wi=e.screenY-pl.screenY):wi=ya=0,pl=e),ya)},movementY:function(e){return"movementY"in e?e.movementY:wi}}),ms=On(gl),ys=x({},gl,{dataTransfer:0}),Xn=On(ys),vs=x({},hl,{relatedTarget:0}),va=On(vs),Fr=x({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),Hr=On(Fr),xa=x({},Oo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ml=On(xa),Sa=x({},Oo,{data:0}),Ca=On(Sa),Br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ta={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ea={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ea[e])?!!t[e]:!1}function Ai(){return qr}var Gr=x({},hl,{key:function(e){if(e.key){var t=Br[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ta[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ai,charCode:function(e){return e.type==="keypress"?Wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Or=On(Gr),Vr=x({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xs=On(Vr),Yr=x({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ai}),Ss=On(Yr),Jr=x({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kr=On(Jr),Xr=x({},gl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),w=On(Xr),M=x({},Oo,{newState:0,oldState:0}),D=On(M),B=[9,13,27,32],O=ho&&"CompositionEvent"in window,L=null;ho&&"documentMode"in document&&(L=document.documentMode);var Y=ho&&"TextEvent"in window&&!L,re=ho&&(!O||L&&8<L&&11>=L),Ee=" ",Ie=!1;function Ye(e,t){switch(e){case"keyup":return B.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var we=!1;function Q(e,t){switch(e){case"compositionend":return W(t);case"keypress":return t.which!==32?null:(Ie=!0,Ee);case"textInput":return e=t.data,e===Ee&&Ie?null:e;default:return null}}function oe(e,t){if(we)return e==="compositionend"||!O&&Ye(e,t)?(e=ma(),fl=jl=po=null,we=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return re&&t.locale!=="ko"?null:t.data;default:return null}}var ne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ze(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ne[e.type]:t==="textarea"}function Ve(e,t,l,s){Io?Uo?Uo.push(s):Uo=[s]:Io=s,t=rr(t,"onChange"),0<t.length&&(l=new Ei("onChange","change",null,l,s),e.push({event:l,listeners:t}))}var dt=null,vt=null;function xn(e){$h(e,0)}function Mn(e){var t=on(e);if(Jl(t))return e}function jn(e,t){if(e==="change")return t}var Wt=!1;if(ho){var yl;if(ho){var Zl="oninput"in document;if(!Zl){var bi=document.createElement("div");bi.setAttribute("oninput","return;"),Zl=typeof bi.oninput=="function"}yl=Zl}else yl=!1;Wt=yl&&(!document.documentMode||9<document.documentMode)}function oo(){dt&&(dt.detachEvent("onpropertychange",_i),vt=dt=null)}function _i(e){if(e.propertyName==="value"&&Mn(vt)){var t=[];Ve(t,vt,e,ha(e)),ps(xn,t)}}function n0(e,t,l){e==="focusin"?(oo(),dt=t,vt=l,dt.attachEvent("onpropertychange",_i)):e==="focusout"&&oo()}function o0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mn(vt)}function l0(e,t){if(e==="click")return Mn(t)}function i0(e,t){if(e==="input"||e==="change")return Mn(t)}function a0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lo=typeof Object.is=="function"?Object.is:a0;function wa(e,t){if(lo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),s=Object.keys(t);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var f=l[s];if(!at.call(t,f)||!lo(e[f],t[f]))return!1}return!0}function Td(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ed(e,t){var l=Td(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=t&&s>=t)return{node:l,offset:t-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Td(l)}}function wd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ad(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=qo(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=qo(e.document)}return t}function jr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var s0=ho&&"documentMode"in document&&11>=document.documentMode,Mi=null,Wr=null,Aa=null,Zr=!1;function bd(e,t,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Zr||Mi==null||Mi!==qo(s)||(s=Mi,"selectionStart"in s&&jr(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Aa&&wa(Aa,s)||(Aa=s,s=rr(Wr,"onSelect"),0<s.length&&(t=new Ei("onSelect","select",null,t,l),e.push({event:t,listeners:s}),t.target=Mi)))}function Ql(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var Ri={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionrun:Ql("Transition","TransitionRun"),transitionstart:Ql("Transition","TransitionStart"),transitioncancel:Ql("Transition","TransitionCancel"),transitionend:Ql("Transition","TransitionEnd")},Qr={},_d={};ho&&(_d=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function $l(e){if(Qr[e])return Qr[e];if(!Ri[e])return e;var t=Ri[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in _d)return Qr[e]=t[l];return e}var Md=$l("animationend"),Rd=$l("animationiteration"),Nd=$l("animationstart"),r0=$l("transitionrun"),u0=$l("transitionstart"),c0=$l("transitioncancel"),Dd=$l("transitionend"),Id=new Map,$r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$r.push("scrollEnd");function _o(e,t){Id.set(e,t),un(t,[e])}var Cs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},go=[],Ni=0,eu=0;function Ts(){for(var e=Ni,t=eu=Ni=0;t<e;){var l=go[t];go[t++]=null;var s=go[t];go[t++]=null;var f=go[t];go[t++]=null;var h=go[t];if(go[t++]=null,s!==null&&f!==null){var C=s.pending;C===null?f.next=f:(f.next=C.next,C.next=f),s.pending=f}h!==0&&Ud(l,f,h)}}function Es(e,t,l,s){go[Ni++]=e,go[Ni++]=t,go[Ni++]=l,go[Ni++]=s,eu|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function tu(e,t,l,s){return Es(e,t,l,s),ws(e)}function ei(e,t){return Es(e,null,null,t),ws(e)}function Ud(e,t,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var f=!1,h=e.return;h!==null;)h.childLanes|=l,s=h.alternate,s!==null&&(s.childLanes|=l),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(f=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,f&&t!==null&&(f=31-Zt(l),e=h.hiddenUpdates,s=e[f],s===null?e[f]=[t]:s.push(t),t.lane=l|536870912),h):null}function ws(e){if(50<Ka)throw Ka=0,cc=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Di={};function d0(e,t,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(e,t,l,s){return new d0(e,t,l,s)}function nu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vo(e,t){var l=e.alternate;return l===null?(l=io(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function kd(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function As(e,t,l,s,f,h){var C=0;if(s=e,typeof e=="function")nu(e)&&(C=1);else if(typeof e=="string")C=my(e,l,Te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case me:return e=io(31,l,t,f),e.elementType=me,e.lanes=h,e;case z:return ti(l.children,f,h,t);case q:C=8,f|=24;break;case F:return e=io(12,l,t,f|2),e.elementType=F,e.lanes=h,e;case _e:return e=io(13,l,t,f),e.elementType=_e,e.lanes=h,e;case ye:return e=io(19,l,t,f),e.elementType=ye,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:C=10;break e;case P:C=9;break e;case ee:C=11;break e;case ie:C=14;break e;case ge:C=16,s=null;break e}C=29,l=Error(a(130,e===null?"null":typeof e,"")),s=null}return t=io(C,l,t,f),t.elementType=e,t.type=s,t.lanes=h,t}function ti(e,t,l,s){return e=io(7,e,s,t),e.lanes=l,e}function ou(e,t,l){return e=io(6,e,null,t),e.lanes=l,e}function zd(e){var t=io(18,null,null,0);return t.stateNode=e,t}function lu(e,t,l){return t=io(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Pd=new WeakMap;function mo(e,t){if(typeof e=="object"&&e!==null){var l=Pd.get(e);return l!==void 0?l:(t={value:e,source:t,stack:ht(t)},Pd.set(e,t),t)}return{value:e,source:t,stack:ht(t)}}var Ii=[],Ui=0,bs=null,ba=0,yo=[],vo=0,vl=null,ko=1,zo="";function Yo(e,t){Ii[Ui++]=ba,Ii[Ui++]=bs,bs=e,ba=t}function Ld(e,t,l){yo[vo++]=ko,yo[vo++]=zo,yo[vo++]=vl,vl=e;var s=ko;e=zo;var f=32-Zt(s)-1;s&=~(1<<f),l+=1;var h=32-Zt(t)+f;if(30<h){var C=f-f%5;h=(s&(1<<C)-1).toString(32),s>>=C,f-=C,ko=1<<32-Zt(t)+f|l<<f|s,zo=h+e}else ko=1<<h|l<<f|s,zo=e}function iu(e){e.return!==null&&(Yo(e,1),Ld(e,1,0))}function au(e){for(;e===bs;)bs=Ii[--Ui],Ii[Ui]=null,ba=Ii[--Ui],Ii[Ui]=null;for(;e===vl;)vl=yo[--vo],yo[vo]=null,zo=yo[--vo],yo[vo]=null,ko=yo[--vo],yo[vo]=null}function Fd(e,t){yo[vo++]=ko,yo[vo++]=zo,yo[vo++]=vl,ko=t.id,zo=t.overflow,vl=e}var zn=null,$t=null,Nt=!1,xl=null,xo=!1,su=Error(a(519));function Sl(e){var t=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _a(mo(t,e)),su}function Hd(e){var t=e.stateNode,l=e.type,s=e.memoizedProps;switch(t[Le]=e,t[Se]=s,l){case"dialog":At("cancel",t),At("close",t);break;case"iframe":case"object":case"embed":At("load",t);break;case"video":case"audio":for(l=0;l<ja.length;l++)At(ja[l],t);break;case"source":At("error",t);break;case"img":case"image":case"link":At("error",t),At("load",t);break;case"details":At("toggle",t);break;case"input":At("invalid",t),cs(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":At("invalid",t);break;case"textarea":At("invalid",t),cl(t,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||s.suppressHydrationWarning===!0||op(t.textContent,l)?(s.popover!=null&&(At("beforetoggle",t),At("toggle",t)),s.onScroll!=null&&At("scroll",t),s.onScrollEnd!=null&&At("scrollend",t),s.onClick!=null&&(t.onclick=no),t=!0):t=!1,t||Sl(e,!0)}function Bd(e){for(zn=e.return;zn;)switch(zn.tag){case 5:case 31:case 13:xo=!1;return;case 27:case 3:xo=!0;return;default:zn=zn.return}}function ki(e){if(e!==zn)return!1;if(!Nt)return Bd(e),Nt=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Ac(e.type,e.memoizedProps)),l=!l),l&&$t&&Sl(e),Bd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));$t=fp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));$t=fp(e)}else t===27?(t=$t,kl(e.type)?(e=Nc,Nc=null,$t=e):$t=t):$t=zn?Co(e.stateNode.nextSibling):null;return!0}function ni(){$t=zn=null,Nt=!1}function ru(){var e=xl;return e!==null&&($n===null?$n=e:$n.push.apply($n,e),xl=null),e}function _a(e){xl===null?xl=[e]:xl.push(e)}var uu=U(null),oi=null,Jo=null;function Cl(e,t,l){be(uu,t._currentValue),t._currentValue=l}function Ko(e){e._currentValue=uu.current,te(uu)}function cu(e,t,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===l)break;e=e.return}}function du(e,t,l,s){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var h=f.dependencies;if(h!==null){var C=f.child;h=h.firstContext;e:for(;h!==null;){var E=h;h=f;for(var R=0;R<t.length;R++)if(E.context===t[R]){h.lanes|=l,E=h.alternate,E!==null&&(E.lanes|=l),cu(h.return,l,e),s||(C=null);break e}h=E.next}}else if(f.tag===18){if(C=f.return,C===null)throw Error(a(341));C.lanes|=l,h=C.alternate,h!==null&&(h.lanes|=l),cu(C,l,e),C=null}else C=f.child;if(C!==null)C.return=f;else for(C=f;C!==null;){if(C===e){C=null;break}if(f=C.sibling,f!==null){f.return=C.return,C=f;break}C=C.return}f=C}}function zi(e,t,l,s){e=null;for(var f=t,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var C=f.alternate;if(C===null)throw Error(a(387));if(C=C.memoizedProps,C!==null){var E=f.type;lo(f.pendingProps.value,C.value)||(e!==null?e.push(E):e=[E])}}else if(f===ut.current){if(C=f.alternate,C===null)throw Error(a(387));C.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(es):e=[es])}f=f.return}e!==null&&du(t,e,l,s),t.flags|=262144}function _s(e){for(e=e.firstContext;e!==null;){if(!lo(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function li(e){oi=e,Jo=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Pn(e){return qd(oi,e)}function Ms(e,t){return oi===null&&li(e),qd(e,t)}function qd(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},Jo===null){if(e===null)throw Error(a(308));Jo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Jo=Jo.next=t;return l}var f0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},h0=o.unstable_scheduleCallback,p0=o.unstable_NormalPriority,Sn={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fu(){return{controller:new f0,data:new Map,refCount:0}}function Ma(e){e.refCount--,e.refCount===0&&h0(p0,function(){e.controller.abort()})}var Ra=null,hu=0,Pi=0,Li=null;function g0(e,t){if(Ra===null){var l=Ra=[];hu=0,Pi=mc(),Li={status:"pending",value:void 0,then:function(s){l.push(s)}}}return hu++,t.then(Gd,Gd),t}function Gd(){if(--hu===0&&Ra!==null){Li!==null&&(Li.status="fulfilled");var e=Ra;Ra=null,Pi=0,Li=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function m0(e,t){var l=[],s={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var f=0;f<l.length;f++)(0,l[f])(t)},function(f){for(s.status="rejected",s.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),s}var Od=N.S;N.S=function(e,t){_h=ct(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&g0(e,t),Od!==null&&Od(e,t)};var ii=U(null);function pu(){var e=ii.current;return e!==null?e:Xt.pooledCache}function Rs(e,t){t===null?be(ii,ii.current):be(ii,t.pool)}function Vd(){var e=pu();return e===null?null:{parent:Sn._currentValue,pool:e}}var Fi=Error(a(460)),gu=Error(a(474)),Ns=Error(a(542)),Ds={then:function(){}};function Yd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jd(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(no,no),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Xd(e),e;default:if(typeof t.status=="string")t.then(no,no);else{if(e=Xt,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var f=t;f.status="fulfilled",f.value=s}},function(s){if(t.status==="pending"){var f=t;f.status="rejected",f.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Xd(e),e}throw si=t,Fi}}function ai(e){try{var t=e._init;return t(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(si=l,Fi):l}}var si=null;function Kd(){if(si===null)throw Error(a(459));var e=si;return si=null,e}function Xd(e){if(e===Fi||e===Ns)throw Error(a(483))}var Hi=null,Na=0;function Is(e){var t=Na;return Na+=1,Hi===null&&(Hi=[]),Jd(Hi,e,t)}function Da(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Us(e,t){throw t.$$typeof===T?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function jd(e){function t(G,k){if(e){var J=G.deletions;J===null?(G.deletions=[k],G.flags|=16):J.push(k)}}function l(G,k){if(!e)return null;for(;k!==null;)t(G,k),k=k.sibling;return null}function s(G){for(var k=new Map;G!==null;)G.key!==null?k.set(G.key,G):k.set(G.index,G),G=G.sibling;return k}function f(G,k){return G=Vo(G,k),G.index=0,G.sibling=null,G}function h(G,k,J){return G.index=J,e?(J=G.alternate,J!==null?(J=J.index,J<k?(G.flags|=67108866,k):J):(G.flags|=67108866,k)):(G.flags|=1048576,k)}function C(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function E(G,k,J,de){return k===null||k.tag!==6?(k=ou(J,G.mode,de),k.return=G,k):(k=f(k,J),k.return=G,k)}function R(G,k,J,de){var ot=J.type;return ot===z?ue(G,k,J.props.children,de,J.key):k!==null&&(k.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===ge&&ai(ot)===k.type)?(k=f(k,J.props),Da(k,J),k.return=G,k):(k=As(J.type,J.key,J.props,null,G.mode,de),Da(k,J),k.return=G,k)}function K(G,k,J,de){return k===null||k.tag!==4||k.stateNode.containerInfo!==J.containerInfo||k.stateNode.implementation!==J.implementation?(k=lu(J,G.mode,de),k.return=G,k):(k=f(k,J.children||[]),k.return=G,k)}function ue(G,k,J,de,ot){return k===null||k.tag!==7?(k=ti(J,G.mode,de,ot),k.return=G,k):(k=f(k,J),k.return=G,k)}function pe(G,k,J){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=ou(""+k,G.mode,J),k.return=G,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case b:return J=As(k.type,k.key,k.props,null,G.mode,J),Da(J,k),J.return=G,J;case I:return k=lu(k,G.mode,J),k.return=G,k;case ge:return k=ai(k),pe(G,k,J)}if(it(k)||Z(k))return k=ti(k,G.mode,J,null),k.return=G,k;if(typeof k.then=="function")return pe(G,Is(k),J);if(k.$$typeof===H)return pe(G,Ms(G,k),J);Us(G,k)}return null}function X(G,k,J,de){var ot=k!==null?k.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ot!==null?null:E(G,k,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===ot?R(G,k,J,de):null;case I:return J.key===ot?K(G,k,J,de):null;case ge:return J=ai(J),X(G,k,J,de)}if(it(J)||Z(J))return ot!==null?null:ue(G,k,J,de,null);if(typeof J.then=="function")return X(G,k,Is(J),de);if(J.$$typeof===H)return X(G,k,Ms(G,J),de);Us(G,J)}return null}function $(G,k,J,de,ot){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return G=G.get(J)||null,E(k,G,""+de,ot);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case b:return G=G.get(de.key===null?J:de.key)||null,R(k,G,de,ot);case I:return G=G.get(de.key===null?J:de.key)||null,K(k,G,de,ot);case ge:return de=ai(de),$(G,k,J,de,ot)}if(it(de)||Z(de))return G=G.get(J)||null,ue(k,G,de,ot,null);if(typeof de.then=="function")return $(G,k,J,Is(de),ot);if(de.$$typeof===H)return $(G,k,J,Ms(k,de),ot);Us(k,de)}return null}function Xe(G,k,J,de){for(var ot=null,kt=null,$e=k,xt=k=0,Rt=null;$e!==null&&xt<J.length;xt++){$e.index>xt?(Rt=$e,$e=null):Rt=$e.sibling;var zt=X(G,$e,J[xt],de);if(zt===null){$e===null&&($e=Rt);break}e&&$e&&zt.alternate===null&&t(G,$e),k=h(zt,k,xt),kt===null?ot=zt:kt.sibling=zt,kt=zt,$e=Rt}if(xt===J.length)return l(G,$e),Nt&&Yo(G,xt),ot;if($e===null){for(;xt<J.length;xt++)$e=pe(G,J[xt],de),$e!==null&&(k=h($e,k,xt),kt===null?ot=$e:kt.sibling=$e,kt=$e);return Nt&&Yo(G,xt),ot}for($e=s($e);xt<J.length;xt++)Rt=$($e,G,xt,J[xt],de),Rt!==null&&(e&&Rt.alternate!==null&&$e.delete(Rt.key===null?xt:Rt.key),k=h(Rt,k,xt),kt===null?ot=Rt:kt.sibling=Rt,kt=Rt);return e&&$e.forEach(function(Hl){return t(G,Hl)}),Nt&&Yo(G,xt),ot}function rt(G,k,J,de){if(J==null)throw Error(a(151));for(var ot=null,kt=null,$e=k,xt=k=0,Rt=null,zt=J.next();$e!==null&&!zt.done;xt++,zt=J.next()){$e.index>xt?(Rt=$e,$e=null):Rt=$e.sibling;var Hl=X(G,$e,zt.value,de);if(Hl===null){$e===null&&($e=Rt);break}e&&$e&&Hl.alternate===null&&t(G,$e),k=h(Hl,k,xt),kt===null?ot=Hl:kt.sibling=Hl,kt=Hl,$e=Rt}if(zt.done)return l(G,$e),Nt&&Yo(G,xt),ot;if($e===null){for(;!zt.done;xt++,zt=J.next())zt=pe(G,zt.value,de),zt!==null&&(k=h(zt,k,xt),kt===null?ot=zt:kt.sibling=zt,kt=zt);return Nt&&Yo(G,xt),ot}for($e=s($e);!zt.done;xt++,zt=J.next())zt=$($e,G,xt,zt.value,de),zt!==null&&(e&&zt.alternate!==null&&$e.delete(zt.key===null?xt:zt.key),k=h(zt,k,xt),kt===null?ot=zt:kt.sibling=zt,kt=zt);return e&&$e.forEach(function(_y){return t(G,_y)}),Nt&&Yo(G,xt),ot}function Jt(G,k,J,de){if(typeof J=="object"&&J!==null&&J.type===z&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var ot=J.key;k!==null;){if(k.key===ot){if(ot=J.type,ot===z){if(k.tag===7){l(G,k.sibling),de=f(k,J.props.children),de.return=G,G=de;break e}}else if(k.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===ge&&ai(ot)===k.type){l(G,k.sibling),de=f(k,J.props),Da(de,J),de.return=G,G=de;break e}l(G,k);break}else t(G,k);k=k.sibling}J.type===z?(de=ti(J.props.children,G.mode,de,J.key),de.return=G,G=de):(de=As(J.type,J.key,J.props,null,G.mode,de),Da(de,J),de.return=G,G=de)}return C(G);case I:e:{for(ot=J.key;k!==null;){if(k.key===ot)if(k.tag===4&&k.stateNode.containerInfo===J.containerInfo&&k.stateNode.implementation===J.implementation){l(G,k.sibling),de=f(k,J.children||[]),de.return=G,G=de;break e}else{l(G,k);break}else t(G,k);k=k.sibling}de=lu(J,G.mode,de),de.return=G,G=de}return C(G);case ge:return J=ai(J),Jt(G,k,J,de)}if(it(J))return Xe(G,k,J,de);if(Z(J)){if(ot=Z(J),typeof ot!="function")throw Error(a(150));return J=ot.call(J),rt(G,k,J,de)}if(typeof J.then=="function")return Jt(G,k,Is(J),de);if(J.$$typeof===H)return Jt(G,k,Ms(G,J),de);Us(G,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,k!==null&&k.tag===6?(l(G,k.sibling),de=f(k,J),de.return=G,G=de):(l(G,k),de=ou(J,G.mode,de),de.return=G,G=de),C(G)):l(G,k)}return function(G,k,J,de){try{Na=0;var ot=Jt(G,k,J,de);return Hi=null,ot}catch($e){if($e===Fi||$e===Ns)throw $e;var kt=io(29,$e,null,G.mode);return kt.lanes=de,kt.return=G,kt}finally{}}}var ri=jd(!0),Wd=jd(!1),Tl=!1;function mu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function El(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wl(e,t,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Lt&2)!==0){var f=s.pending;return f===null?t.next=t:(t.next=f.next,f.next=t),s.pending=t,t=ws(e),Ud(e,null,l),t}return Es(e,s,t,l),ws(e)}function Ia(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,he(e,l)}}function vu(e,t){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var f=null,h=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};h===null?f=h=C:h=h.next=C,l=l.next}while(l!==null);h===null?f=h=t:h=h.next=t}else f=h=t;l={baseState:s.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var xu=!1;function Ua(){if(xu){var e=Li;if(e!==null)throw e}}function ka(e,t,l,s){xu=!1;var f=e.updateQueue;Tl=!1;var h=f.firstBaseUpdate,C=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var R=E,K=R.next;R.next=null,C===null?h=K:C.next=K,C=R;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,E=ue.lastBaseUpdate,E!==C&&(E===null?ue.firstBaseUpdate=K:E.next=K,ue.lastBaseUpdate=R))}if(h!==null){var pe=f.baseState;C=0,ue=K=R=null,E=h;do{var X=E.lane&-536870913,$=X!==E.lane;if($?(Mt&X)===X:(s&X)===X){X!==0&&X===Pi&&(xu=!0),ue!==null&&(ue=ue.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Xe=e,rt=E;X=t;var Jt=l;switch(rt.tag){case 1:if(Xe=rt.payload,typeof Xe=="function"){pe=Xe.call(Jt,pe,X);break e}pe=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=rt.payload,X=typeof Xe=="function"?Xe.call(Jt,pe,X):Xe,X==null)break e;pe=x({},pe,X);break e;case 2:Tl=!0}}X=E.callback,X!==null&&(e.flags|=64,$&&(e.flags|=8192),$=f.callbacks,$===null?f.callbacks=[X]:$.push(X))}else $={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ue===null?(K=ue=$,R=pe):ue=ue.next=$,C|=X;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;$=E,E=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);ue===null&&(R=pe),f.baseState=R,f.firstBaseUpdate=K,f.lastBaseUpdate=ue,h===null&&(f.shared.lanes=0),Rl|=C,e.lanes=C,e.memoizedState=pe}}function Zd(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function Qd(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Zd(l[e],t)}var Bi=U(null),ks=U(0);function $d(e,t){e=nl,be(ks,e),be(Bi,t),nl=e|t.baseLanes}function Su(){be(ks,nl),be(Bi,Bi.current)}function Cu(){nl=ks.current,te(Bi),te(ks)}var ao=U(null),So=null;function Al(e){var t=e.alternate;be(pn,pn.current&1),be(ao,e),So===null&&(t===null||Bi.current!==null||t.memoizedState!==null)&&(So=e)}function Tu(e){be(pn,pn.current),be(ao,e),So===null&&(So=e)}function ef(e){e.tag===22?(be(pn,pn.current),be(ao,e),So===null&&(So=e)):bl()}function bl(){be(pn,pn.current),be(ao,ao.current)}function so(e){te(ao),So===e&&(So=null),te(pn)}var pn=U(0);function zs(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Mc(l)||Rc(l)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xo=0,yt=null,Vt=null,Cn=null,Ps=!1,qi=!1,ui=!1,Ls=0,za=0,Gi=null,y0=0;function dn(){throw Error(a(321))}function Eu(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!lo(e[l],t[l]))return!1;return!0}function wu(e,t,l,s,f,h){return Xo=h,yt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Ff:Hu,ui=!1,h=l(s,f),ui=!1,qi&&(h=nf(t,l,s,f)),tf(e),h}function tf(e){N.H=Fa;var t=Vt!==null&&Vt.next!==null;if(Xo=0,Cn=Vt=yt=null,Ps=!1,za=0,Gi=null,t)throw Error(a(300));e===null||Tn||(e=e.dependencies,e!==null&&_s(e)&&(Tn=!0))}function nf(e,t,l,s){yt=e;var f=0;do{if(qi&&(Gi=null),za=0,qi=!1,25<=f)throw Error(a(301));if(f+=1,Cn=Vt=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}N.H=Hf,h=t(l,s)}while(qi);return h}function v0(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?Pa(t):t,e=e.useState()[0],(Vt!==null?Vt.memoizedState:null)!==e&&(yt.flags|=1024),t}function Au(){var e=Ls!==0;return Ls=0,e}function bu(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function _u(e){if(Ps){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ps=!1}Xo=0,Cn=Vt=yt=null,qi=!1,za=Ls=0,Gi=null}function Kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?yt.memoizedState=Cn=e:Cn=Cn.next=e,Cn}function gn(){if(Vt===null){var e=yt.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Cn===null?yt.memoizedState:Cn.next;if(t!==null)Cn=t,Vt=e;else{if(e===null)throw yt.alternate===null?Error(a(467)):Error(a(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Cn===null?yt.memoizedState=Cn=e:Cn=Cn.next=e}return Cn}function Fs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pa(e){var t=za;return za+=1,Gi===null&&(Gi=[]),e=Jd(Gi,e,t),t=yt,(Cn===null?t.memoizedState:Cn.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Ff:Hu),e}function Hs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Pa(e);if(e.$$typeof===H)return Pn(e)}throw Error(a(438,String(e)))}function Mu(e){var t=null,l=yt.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var s=yt.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(f){return f.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=Fs(),yt.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),s=0;s<e;s++)l[s]=ce;return t.index++,l}function jo(e,t){return typeof t=="function"?t(e):t}function Bs(e){var t=gn();return Ru(t,Vt,e)}function Ru(e,t,l){var s=e.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=l;var f=e.baseQueue,h=s.pending;if(h!==null){if(f!==null){var C=f.next;f.next=h.next,h.next=C}t.baseQueue=f=h,s.pending=null}if(h=e.baseState,f===null)e.memoizedState=h;else{t=f.next;var E=C=null,R=null,K=t,ue=!1;do{var pe=K.lane&-536870913;if(pe!==K.lane?(Mt&pe)===pe:(Xo&pe)===pe){var X=K.revertLane;if(X===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),pe===Pi&&(ue=!0);else if((Xo&X)===X){K=K.next,X===Pi&&(ue=!0);continue}else pe={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},R===null?(E=R=pe,C=h):R=R.next=pe,yt.lanes|=X,Rl|=X;pe=K.action,ui&&l(h,pe),h=K.hasEagerState?K.eagerState:l(h,pe)}else X={lane:pe,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},R===null?(E=R=X,C=h):R=R.next=X,yt.lanes|=pe,Rl|=pe;K=K.next}while(K!==null&&K!==t);if(R===null?C=h:R.next=E,!lo(h,e.memoizedState)&&(Tn=!0,ue&&(l=Li,l!==null)))throw l;e.memoizedState=h,e.baseState=C,e.baseQueue=R,s.lastRenderedState=h}return f===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Nu(e){var t=gn(),l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=e;var s=l.dispatch,f=l.pending,h=t.memoizedState;if(f!==null){l.pending=null;var C=f=f.next;do h=e(h,C.action),C=C.next;while(C!==f);lo(h,t.memoizedState)||(Tn=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),l.lastRenderedState=h}return[h,s]}function of(e,t,l){var s=yt,f=gn(),h=Nt;if(h){if(l===void 0)throw Error(a(407));l=l()}else l=t();var C=!lo((Vt||f).memoizedState,l);if(C&&(f.memoizedState=l,Tn=!0),f=f.queue,Uu(sf.bind(null,s,f,e),[e]),f.getSnapshot!==t||C||Cn!==null&&Cn.memoizedState.tag&1){if(s.flags|=2048,Oi(9,{destroy:void 0},af.bind(null,s,f,l,t),null),Xt===null)throw Error(a(349));h||(Xo&127)!==0||lf(s,t,l)}return l}function lf(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=yt.updateQueue,t===null?(t=Fs(),yt.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function af(e,t,l,s){t.value=l,t.getSnapshot=s,rf(t)&&uf(e)}function sf(e,t,l){return l(function(){rf(t)&&uf(e)})}function rf(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!lo(e,l)}catch{return!0}}function uf(e){var t=ei(e,2);t!==null&&eo(t,e,2)}function Du(e){var t=Kn();if(typeof e=="function"){var l=e;if(e=l(),ui){yn(!0);try{l()}finally{yn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:e},t}function cf(e,t,l,s){return e.baseState=l,Ru(e,Vt,typeof s=="function"?s:jo)}function x0(e,t,l,s,f){if(Os(e))throw Error(a(485));if(e=t.action,e!==null){var h={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){h.listeners.push(C)}};N.T!==null?l(!0):h.isTransition=!1,s(h),l=t.pending,l===null?(h.next=t.pending=h,df(t,h)):(h.next=l.next,t.pending=l.next=h)}}function df(e,t){var l=t.action,s=t.payload,f=e.state;if(t.isTransition){var h=N.T,C={};N.T=C;try{var E=l(f,s),R=N.S;R!==null&&R(C,E),ff(e,t,E)}catch(K){Iu(e,t,K)}finally{h!==null&&C.types!==null&&(h.types=C.types),N.T=h}}else try{h=l(f,s),ff(e,t,h)}catch(K){Iu(e,t,K)}}function ff(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){hf(e,t,s)},function(s){return Iu(e,t,s)}):hf(e,t,l)}function hf(e,t,l){t.status="fulfilled",t.value=l,pf(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,df(e,l)))}function Iu(e,t,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=l,pf(t),t=t.next;while(t!==s)}e.action=null}function pf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function gf(e,t){return t}function mf(e,t){if(Nt){var l=Xt.formState;if(l!==null){e:{var s=yt;if(Nt){if($t){t:{for(var f=$t,h=xo;f.nodeType!==8;){if(!h){f=null;break t}if(f=Co(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){$t=Co(f.nextSibling),s=f.data==="F!";break e}}Sl(s)}s=!1}s&&(t=l[0])}}return l=Kn(),l.memoizedState=l.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:t},l.queue=s,l=zf.bind(null,yt,s),s.dispatch=l,s=Du(!1),h=Fu.bind(null,yt,!1,s.queue),s=Kn(),f={state:t,dispatch:null,action:e,pending:null},s.queue=f,l=x0.bind(null,yt,f,h,l),f.dispatch=l,s.memoizedState=e,[t,l,!1]}function yf(e){var t=gn();return vf(t,Vt,e)}function vf(e,t,l){if(t=Ru(e,t,gf)[0],e=Bs(jo)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Pa(t)}catch(C){throw C===Fi?Ns:C}else s=t;t=gn();var f=t.queue,h=f.dispatch;return l!==t.memoizedState&&(yt.flags|=2048,Oi(9,{destroy:void 0},S0.bind(null,f,l),null)),[s,h,e]}function S0(e,t){e.action=t}function xf(e){var t=gn(),l=Vt;if(l!==null)return vf(t,l,e);gn(),t=t.memoizedState,l=gn();var s=l.queue.dispatch;return l.memoizedState=e,[t,s,!1]}function Oi(e,t,l,s){return e={tag:e,create:l,deps:s,inst:t,next:null},t=yt.updateQueue,t===null&&(t=Fs(),yt.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,t.lastEffect=e),e}function Sf(){return gn().memoizedState}function qs(e,t,l,s){var f=Kn();yt.flags|=e,f.memoizedState=Oi(1|t,{destroy:void 0},l,s===void 0?null:s)}function Gs(e,t,l,s){var f=gn();s=s===void 0?null:s;var h=f.memoizedState.inst;Vt!==null&&s!==null&&Eu(s,Vt.memoizedState.deps)?f.memoizedState=Oi(t,h,l,s):(yt.flags|=e,f.memoizedState=Oi(1|t,h,l,s))}function Cf(e,t){qs(8390656,8,e,t)}function Uu(e,t){Gs(2048,8,e,t)}function C0(e){yt.flags|=4;var t=yt.updateQueue;if(t===null)t=Fs(),yt.updateQueue=t,t.events=[e];else{var l=t.events;l===null?t.events=[e]:l.push(e)}}function Tf(e){var t=gn().memoizedState;return C0({ref:t,nextImpl:e}),function(){if((Lt&2)!==0)throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Ef(e,t){return Gs(4,2,e,t)}function wf(e,t){return Gs(4,4,e,t)}function Af(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bf(e,t,l){l=l!=null?l.concat([e]):null,Gs(4,4,Af.bind(null,t,e),l)}function ku(){}function _f(e,t){var l=gn();t=t===void 0?null:t;var s=l.memoizedState;return t!==null&&Eu(t,s[1])?s[0]:(l.memoizedState=[e,t],e)}function Mf(e,t){var l=gn();t=t===void 0?null:t;var s=l.memoizedState;if(t!==null&&Eu(t,s[1]))return s[0];if(s=e(),ui){yn(!0);try{e()}finally{yn(!1)}}return l.memoizedState=[s,t],s}function zu(e,t,l){return l===void 0||(Xo&1073741824)!==0&&(Mt&261930)===0?e.memoizedState=t:(e.memoizedState=l,e=Rh(),yt.lanes|=e,Rl|=e,l)}function Rf(e,t,l,s){return lo(l,t)?l:Bi.current!==null?(e=zu(e,l,s),lo(e,t)||(Tn=!0),e):(Xo&42)===0||(Xo&1073741824)!==0&&(Mt&261930)===0?(Tn=!0,e.memoizedState=l):(e=Rh(),yt.lanes|=e,Rl|=e,t)}function Nf(e,t,l,s,f){var h=se.p;se.p=h!==0&&8>h?h:8;var C=N.T,E={};N.T=E,Fu(e,!1,t,l);try{var R=f(),K=N.S;if(K!==null&&K(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ue=m0(R,s);La(e,t,ue,co(e))}else La(e,t,s,co(e))}catch(pe){La(e,t,{then:function(){},status:"rejected",reason:pe},co())}finally{se.p=h,C!==null&&E.types!==null&&(C.types=E.types),N.T=C}}function T0(){}function Pu(e,t,l,s){if(e.tag!==5)throw Error(a(476));var f=Df(e).queue;Nf(e,f,t,Je,l===null?T0:function(){return If(e),l(s)})}function Df(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Je,baseState:Je,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:Je},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function If(e){var t=Df(e);t.next===null&&(t=e.alternate.memoizedState),La(e,t.next.queue,{},co())}function Lu(){return Pn(es)}function Uf(){return gn().memoizedState}function kf(){return gn().memoizedState}function E0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=co();e=El(l);var s=wl(t,e,l);s!==null&&(eo(s,t,l),Ia(s,t,l)),t={cache:fu()},e.payload=t;return}t=t.return}}function w0(e,t,l){var s=co();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Os(e)?Pf(t,l):(l=tu(e,t,l,s),l!==null&&(eo(l,e,s),Lf(l,t,s)))}function zf(e,t,l){var s=co();La(e,t,l,s)}function La(e,t,l,s){var f={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Os(e))Pf(t,f);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var C=t.lastRenderedState,E=h(C,l);if(f.hasEagerState=!0,f.eagerState=E,lo(E,C))return Es(e,t,f,0),Xt===null&&Ts(),!1}catch{}finally{}if(l=tu(e,t,f,s),l!==null)return eo(l,e,s),Lf(l,t,s),!0}return!1}function Fu(e,t,l,s){if(s={lane:2,revertLane:mc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Os(e)){if(t)throw Error(a(479))}else t=tu(e,l,s,2),t!==null&&eo(t,e,2)}function Os(e){var t=e.alternate;return e===yt||t!==null&&t===yt}function Pf(e,t){qi=Ps=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function Lf(e,t,l){if((l&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,he(e,l)}}var Fa={readContext:Pn,use:Hs,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn};Fa.useEffectEvent=dn;var Ff={readContext:Pn,use:Hs,useCallback:function(e,t){return Kn().memoizedState=[e,t===void 0?null:t],e},useContext:Pn,useEffect:Cf,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,qs(4194308,4,Af.bind(null,t,e),l)},useLayoutEffect:function(e,t){return qs(4194308,4,e,t)},useInsertionEffect:function(e,t){qs(4,2,e,t)},useMemo:function(e,t){var l=Kn();t=t===void 0?null:t;var s=e();if(ui){yn(!0);try{e()}finally{yn(!1)}}return l.memoizedState=[s,t],s},useReducer:function(e,t,l){var s=Kn();if(l!==void 0){var f=l(t);if(ui){yn(!0);try{l(t)}finally{yn(!1)}}}else f=t;return s.memoizedState=s.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},s.queue=e,e=e.dispatch=w0.bind(null,yt,e),[s.memoizedState,e]},useRef:function(e){var t=Kn();return e={current:e},t.memoizedState=e},useState:function(e){e=Du(e);var t=e.queue,l=zf.bind(null,yt,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:ku,useDeferredValue:function(e,t){var l=Kn();return zu(l,e,t)},useTransition:function(){var e=Du(!1);return e=Nf.bind(null,yt,e.queue,!0,!1),Kn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var s=yt,f=Kn();if(Nt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=t(),Xt===null)throw Error(a(349));(Mt&127)!==0||lf(s,t,l)}f.memoizedState=l;var h={value:l,getSnapshot:t};return f.queue=h,Cf(sf.bind(null,s,h,e),[e]),s.flags|=2048,Oi(9,{destroy:void 0},af.bind(null,s,h,l,t),null),l},useId:function(){var e=Kn(),t=Xt.identifierPrefix;if(Nt){var l=zo,s=ko;l=(s&~(1<<32-Zt(s)-1)).toString(32)+l,t="_"+t+"R_"+l,l=Ls++,0<l&&(t+="H"+l.toString(32)),t+="_"}else l=y0++,t="_"+t+"r_"+l.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Lu,useFormState:mf,useActionState:mf,useOptimistic:function(e){var t=Kn();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=Fu.bind(null,yt,!0,l),l.dispatch=t,[e,t]},useMemoCache:Mu,useCacheRefresh:function(){return Kn().memoizedState=E0.bind(null,yt)},useEffectEvent:function(e){var t=Kn(),l={impl:e};return t.memoizedState=l,function(){if((Lt&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Hu={readContext:Pn,use:Hs,useCallback:_f,useContext:Pn,useEffect:Uu,useImperativeHandle:bf,useInsertionEffect:Ef,useLayoutEffect:wf,useMemo:Mf,useReducer:Bs,useRef:Sf,useState:function(){return Bs(jo)},useDebugValue:ku,useDeferredValue:function(e,t){var l=gn();return Rf(l,Vt.memoizedState,e,t)},useTransition:function(){var e=Bs(jo)[0],t=gn().memoizedState;return[typeof e=="boolean"?e:Pa(e),t]},useSyncExternalStore:of,useId:Uf,useHostTransitionStatus:Lu,useFormState:yf,useActionState:yf,useOptimistic:function(e,t){var l=gn();return cf(l,Vt,e,t)},useMemoCache:Mu,useCacheRefresh:kf};Hu.useEffectEvent=Tf;var Hf={readContext:Pn,use:Hs,useCallback:_f,useContext:Pn,useEffect:Uu,useImperativeHandle:bf,useInsertionEffect:Ef,useLayoutEffect:wf,useMemo:Mf,useReducer:Nu,useRef:Sf,useState:function(){return Nu(jo)},useDebugValue:ku,useDeferredValue:function(e,t){var l=gn();return Vt===null?zu(l,e,t):Rf(l,Vt.memoizedState,e,t)},useTransition:function(){var e=Nu(jo)[0],t=gn().memoizedState;return[typeof e=="boolean"?e:Pa(e),t]},useSyncExternalStore:of,useId:Uf,useHostTransitionStatus:Lu,useFormState:xf,useActionState:xf,useOptimistic:function(e,t){var l=gn();return Vt!==null?cf(l,Vt,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Mu,useCacheRefresh:kf};Hf.useEffectEvent=Tf;function Bu(e,t,l,s){t=e.memoizedState,l=l(s,t),l=l==null?t:x({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var qu={enqueueSetState:function(e,t,l){e=e._reactInternals;var s=co(),f=El(s);f.payload=t,l!=null&&(f.callback=l),t=wl(e,f,s),t!==null&&(eo(t,e,s),Ia(t,e,s))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var s=co(),f=El(s);f.tag=1,f.payload=t,l!=null&&(f.callback=l),t=wl(e,f,s),t!==null&&(eo(t,e,s),Ia(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=co(),s=El(l);s.tag=2,t!=null&&(s.callback=t),t=wl(e,s,l),t!==null&&(eo(t,e,l),Ia(t,e,l))}};function Bf(e,t,l,s,f,h,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,C):t.prototype&&t.prototype.isPureReactComponent?!wa(l,s)||!wa(f,h):!0}function qf(e,t,l,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,s),t.state!==e&&qu.enqueueReplaceState(t,t.state,null)}function ci(e,t){var l=t;if("ref"in t){l={};for(var s in t)s!=="ref"&&(l[s]=t[s])}if(e=e.defaultProps){l===t&&(l=x({},l));for(var f in e)l[f]===void 0&&(l[f]=e[f])}return l}function Gf(e){Cs(e)}function Of(e){console.error(e)}function Vf(e){Cs(e)}function Vs(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Yf(e,t,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Gu(e,t,l){return l=El(l),l.tag=3,l.payload={element:null},l.callback=function(){Vs(e,t)},l}function Jf(e){return e=El(e),e.tag=3,e}function Kf(e,t,l,s){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var h=s.value;e.payload=function(){return f(h)},e.callback=function(){Yf(t,l,s)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(e.callback=function(){Yf(t,l,s),typeof f!="function"&&(Nl===null?Nl=new Set([this]):Nl.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})})}function A0(e,t,l,s,f){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=l.alternate,t!==null&&zi(t,l,f,!0),l=ao.current,l!==null){switch(l.tag){case 31:case 13:return So===null?nr():l.alternate===null&&fn===0&&(fn=3),l.flags&=-257,l.flags|=65536,l.lanes=f,s===Ds?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([s]):t.add(s),hc(e,s,f)),!1;case 22:return l.flags|=65536,s===Ds?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([s]):l.add(s)),hc(e,s,f)),!1}throw Error(a(435,l.tag))}return hc(e,s,f),nr(),!1}if(Nt)return t=ao.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=f,s!==su&&(e=Error(a(422),{cause:s}),_a(mo(e,l)))):(s!==su&&(t=Error(a(423),{cause:s}),_a(mo(t,l))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,s=mo(s,l),f=Gu(e.stateNode,s,f),vu(e,f),fn!==4&&(fn=2)),!1;var h=Error(a(520),{cause:s});if(h=mo(h,l),Ja===null?Ja=[h]:Ja.push(h),fn!==4&&(fn=2),t===null)return!0;s=mo(s,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=f&-f,l.lanes|=e,e=Gu(l.stateNode,s,e),vu(l,e),!1;case 1:if(t=l.type,h=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Nl===null||!Nl.has(h))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Jf(f),Kf(f,e,l,s),vu(l,f),!1}l=l.return}while(l!==null);return!1}var Ou=Error(a(461)),Tn=!1;function Ln(e,t,l,s){t.child=e===null?Wd(t,null,l,s):ri(t,e.child,l,s)}function Xf(e,t,l,s,f){l=l.render;var h=t.ref;if("ref"in s){var C={};for(var E in s)E!=="ref"&&(C[E]=s[E])}else C=s;return li(t),s=wu(e,t,l,C,h,f),E=Au(),e!==null&&!Tn?(bu(e,t,f),Wo(e,t,f)):(Nt&&E&&iu(t),t.flags|=1,Ln(e,t,s,f),t.child)}function jf(e,t,l,s,f){if(e===null){var h=l.type;return typeof h=="function"&&!nu(h)&&h.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=h,Wf(e,t,h,s,f)):(e=As(l.type,null,s,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Zu(e,f)){var C=h.memoizedProps;if(l=l.compare,l=l!==null?l:wa,l(C,s)&&e.ref===t.ref)return Wo(e,t,f)}return t.flags|=1,e=Vo(h,s),e.ref=t.ref,e.return=t,t.child=e}function Wf(e,t,l,s,f){if(e!==null){var h=e.memoizedProps;if(wa(h,s)&&e.ref===t.ref)if(Tn=!1,t.pendingProps=s=h,Zu(e,f))(e.flags&131072)!==0&&(Tn=!0);else return t.lanes=e.lanes,Wo(e,t,f)}return Vu(e,t,l,s,f)}function Zf(e,t,l,s){var f=s.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|l:l,e!==null){for(s=t.child=e.child,f=0;s!==null;)f=f|s.lanes|s.childLanes,s=s.sibling;s=f&~h}else s=0,t.child=null;return Qf(e,t,h,l,s)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Rs(t,h!==null?h.cachePool:null),h!==null?$d(t,h):Su(),ef(t);else return s=t.lanes=536870912,Qf(e,t,h!==null?h.baseLanes|l:l,l,s)}else h!==null?(Rs(t,h.cachePool),$d(t,h),bl(),t.memoizedState=null):(e!==null&&Rs(t,null),Su(),bl());return Ln(e,t,f,l),t.child}function Ha(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Qf(e,t,l,s,f){var h=pu();return h=h===null?null:{parent:Sn._currentValue,pool:h},t.memoizedState={baseLanes:l,cachePool:h},e!==null&&Rs(t,null),Su(),ef(t),e!==null&&zi(e,t,s,!0),t.childLanes=f,null}function Ys(e,t){return t=Ks({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function $f(e,t,l){return ri(t,e.child,null,l),e=Ys(t,t.pendingProps),e.flags|=2,so(t),t.memoizedState=null,e}function b0(e,t,l){var s=t.pendingProps,f=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Nt){if(s.mode==="hidden")return e=Ys(t,s),t.lanes=536870912,Ha(null,e);if(Tu(t),(e=$t)?(e=dp(e,xo),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:vl!==null?{id:ko,overflow:zo}:null,retryLane:536870912,hydrationErrors:null},l=zd(e),l.return=t,t.child=l,zn=t,$t=null)):e=null,e===null)throw Sl(t);return t.lanes=536870912,null}return Ys(t,s)}var h=e.memoizedState;if(h!==null){var C=h.dehydrated;if(Tu(t),f)if(t.flags&256)t.flags&=-257,t=$f(e,t,l);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(a(558));else if(Tn||zi(e,t,l,!1),f=(l&e.childLanes)!==0,Tn||f){if(s=Xt,s!==null&&(C=Ce(s,l),C!==0&&C!==h.retryLane))throw h.retryLane=C,ei(e,C),eo(s,e,C),Ou;nr(),t=$f(e,t,l)}else e=h.treeContext,$t=Co(C.nextSibling),zn=t,Nt=!0,xl=null,xo=!1,e!==null&&Fd(t,e),t=Ys(t,s),t.flags|=4096;return t}return e=Vo(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Js(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function Vu(e,t,l,s,f){return li(t),l=wu(e,t,l,s,void 0,f),s=Au(),e!==null&&!Tn?(bu(e,t,f),Wo(e,t,f)):(Nt&&s&&iu(t),t.flags|=1,Ln(e,t,l,f),t.child)}function eh(e,t,l,s,f,h){return li(t),t.updateQueue=null,l=nf(t,s,l,f),tf(e),s=Au(),e!==null&&!Tn?(bu(e,t,h),Wo(e,t,h)):(Nt&&s&&iu(t),t.flags|=1,Ln(e,t,l,h),t.child)}function th(e,t,l,s,f){if(li(t),t.stateNode===null){var h=Di,C=l.contextType;typeof C=="object"&&C!==null&&(h=Pn(C)),h=new l(s,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=qu,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=s,h.state=t.memoizedState,h.refs={},mu(t),C=l.contextType,h.context=typeof C=="object"&&C!==null?Pn(C):Di,h.state=t.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(Bu(t,l,C,s),h.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(C=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),C!==h.state&&qu.enqueueReplaceState(h,h.state,null),ka(t,s,h,f),Ua(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){h=t.stateNode;var E=t.memoizedProps,R=ci(l,E);h.props=R;var K=h.context,ue=l.contextType;C=Di,typeof ue=="object"&&ue!==null&&(C=Pn(ue));var pe=l.getDerivedStateFromProps;ue=typeof pe=="function"||typeof h.getSnapshotBeforeUpdate=="function",E=t.pendingProps!==E,ue||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(E||K!==C)&&qf(t,h,s,C),Tl=!1;var X=t.memoizedState;h.state=X,ka(t,s,h,f),Ua(),K=t.memoizedState,E||X!==K||Tl?(typeof pe=="function"&&(Bu(t,l,pe,s),K=t.memoizedState),(R=Tl||Bf(t,l,R,s,X,K,C))?(ue||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=K),h.props=s,h.state=K,h.context=C,s=R):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{h=t.stateNode,yu(e,t),C=t.memoizedProps,ue=ci(l,C),h.props=ue,pe=t.pendingProps,X=h.context,K=l.contextType,R=Di,typeof K=="object"&&K!==null&&(R=Pn(K)),E=l.getDerivedStateFromProps,(K=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(C!==pe||X!==R)&&qf(t,h,s,R),Tl=!1,X=t.memoizedState,h.state=X,ka(t,s,h,f),Ua();var $=t.memoizedState;C!==pe||X!==$||Tl||e!==null&&e.dependencies!==null&&_s(e.dependencies)?(typeof E=="function"&&(Bu(t,l,E,s),$=t.memoizedState),(ue=Tl||Bf(t,l,ue,s,X,$,R)||e!==null&&e.dependencies!==null&&_s(e.dependencies))?(K||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,$,R),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,$,R)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||C===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=$),h.props=s,h.state=$,h.context=R,s=ue):(typeof h.componentDidUpdate!="function"||C===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),s=!1)}return h=s,Js(e,t),s=(t.flags&128)!==0,h||s?(h=t.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&s?(t.child=ri(t,e.child,null,f),t.child=ri(t,null,l,f)):Ln(e,t,l,f),t.memoizedState=h.state,e=t.child):e=Wo(e,t,f),e}function nh(e,t,l,s){return ni(),t.flags|=256,Ln(e,t,l,s),t.child}var Yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ju(e){return{baseLanes:e,cachePool:Vd()}}function Ku(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=uo),e}function oh(e,t,l){var s=t.pendingProps,f=!1,h=(t.flags&128)!==0,C;if((C=h)||(C=e!==null&&e.memoizedState===null?!1:(pn.current&2)!==0),C&&(f=!0,t.flags&=-129),C=(t.flags&32)!==0,t.flags&=-33,e===null){if(Nt){if(f?Al(t):bl(),(e=$t)?(e=dp(e,xo),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:vl!==null?{id:ko,overflow:zo}:null,retryLane:536870912,hydrationErrors:null},l=zd(e),l.return=t,t.child=l,zn=t,$t=null)):e=null,e===null)throw Sl(t);return Rc(e)?t.lanes=32:t.lanes=536870912,null}var E=s.children;return s=s.fallback,f?(bl(),f=t.mode,E=Ks({mode:"hidden",children:E},f),s=ti(s,f,l,null),E.return=t,s.return=t,E.sibling=s,t.child=E,s=t.child,s.memoizedState=Ju(l),s.childLanes=Ku(e,C,l),t.memoizedState=Yu,Ha(null,s)):(Al(t),Xu(t,E))}var R=e.memoizedState;if(R!==null&&(E=R.dehydrated,E!==null)){if(h)t.flags&256?(Al(t),t.flags&=-257,t=ju(e,t,l)):t.memoizedState!==null?(bl(),t.child=e.child,t.flags|=128,t=null):(bl(),E=s.fallback,f=t.mode,s=Ks({mode:"visible",children:s.children},f),E=ti(E,f,l,null),E.flags|=2,s.return=t,E.return=t,s.sibling=E,t.child=s,ri(t,e.child,null,l),s=t.child,s.memoizedState=Ju(l),s.childLanes=Ku(e,C,l),t.memoizedState=Yu,t=Ha(null,s));else if(Al(t),Rc(E)){if(C=E.nextSibling&&E.nextSibling.dataset,C)var K=C.dgst;C=K,s=Error(a(419)),s.stack="",s.digest=C,_a({value:s,source:null,stack:null}),t=ju(e,t,l)}else if(Tn||zi(e,t,l,!1),C=(l&e.childLanes)!==0,Tn||C){if(C=Xt,C!==null&&(s=Ce(C,l),s!==0&&s!==R.retryLane))throw R.retryLane=s,ei(e,s),eo(C,e,s),Ou;Mc(E)||nr(),t=ju(e,t,l)}else Mc(E)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,$t=Co(E.nextSibling),zn=t,Nt=!0,xl=null,xo=!1,e!==null&&Fd(t,e),t=Xu(t,s.children),t.flags|=4096);return t}return f?(bl(),E=s.fallback,f=t.mode,R=e.child,K=R.sibling,s=Vo(R,{mode:"hidden",children:s.children}),s.subtreeFlags=R.subtreeFlags&65011712,K!==null?E=Vo(K,E):(E=ti(E,f,l,null),E.flags|=2),E.return=t,s.return=t,s.sibling=E,t.child=s,Ha(null,s),s=t.child,E=e.child.memoizedState,E===null?E=Ju(l):(f=E.cachePool,f!==null?(R=Sn._currentValue,f=f.parent!==R?{parent:R,pool:R}:f):f=Vd(),E={baseLanes:E.baseLanes|l,cachePool:f}),s.memoizedState=E,s.childLanes=Ku(e,C,l),t.memoizedState=Yu,Ha(e.child,s)):(Al(t),l=e.child,e=l.sibling,l=Vo(l,{mode:"visible",children:s.children}),l.return=t,l.sibling=null,e!==null&&(C=t.deletions,C===null?(t.deletions=[e],t.flags|=16):C.push(e)),t.child=l,t.memoizedState=null,l)}function Xu(e,t){return t=Ks({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ks(e,t){return e=io(22,e,null,t),e.lanes=0,e}function ju(e,t,l){return ri(t,e.child,null,l),e=Xu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lh(e,t,l){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),cu(e.return,t,l)}function Wu(e,t,l,s,f,h){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:f,treeForkCount:h}:(C.isBackwards=t,C.rendering=null,C.renderingStartTime=0,C.last=s,C.tail=l,C.tailMode=f,C.treeForkCount=h)}function ih(e,t,l){var s=t.pendingProps,f=s.revealOrder,h=s.tail;s=s.children;var C=pn.current,E=(C&2)!==0;if(E?(C=C&1|2,t.flags|=128):C&=1,be(pn,C),Ln(e,t,s,l),s=Nt?ba:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lh(e,l,t);else if(e.tag===19)lh(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(l=t.child,f=null;l!==null;)e=l.alternate,e!==null&&zs(e)===null&&(f=l),l=l.sibling;l=f,l===null?(f=t.child,t.child=null):(f=l.sibling,l.sibling=null),Wu(t,!1,f,l,h,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=t.child,t.child=null;f!==null;){if(e=f.alternate,e!==null&&zs(e)===null){t.child=f;break}e=f.sibling,f.sibling=l,l=f,f=e}Wu(t,!0,l,null,h,s);break;case"together":Wu(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Wo(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),Rl|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(zi(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,l=Vo(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=Vo(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function Zu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&_s(e)))}function _0(e,t,l){switch(t.tag){case 3:Ut(t,t.stateNode.containerInfo),Cl(t,Sn,e.memoizedState.cache),ni();break;case 27:case 5:Dn(t);break;case 4:Ut(t,t.stateNode.containerInfo);break;case 10:Cl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Tu(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Al(t),t.flags|=128,null):(l&t.child.childLanes)!==0?oh(e,t,l):(Al(t),e=Wo(e,t,l),e!==null?e.sibling:null);Al(t);break;case 19:var f=(e.flags&128)!==0;if(s=(l&t.childLanes)!==0,s||(zi(e,t,l,!1),s=(l&t.childLanes)!==0),f){if(s)return ih(e,t,l);t.flags|=128}if(f=t.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),be(pn,pn.current),s)break;return null;case 22:return t.lanes=0,Zf(e,t,l,t.pendingProps);case 24:Cl(t,Sn,e.memoizedState.cache)}return Wo(e,t,l)}function ah(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)Tn=!0;else{if(!Zu(e,l)&&(t.flags&128)===0)return Tn=!1,_0(e,t,l);Tn=(e.flags&131072)!==0}else Tn=!1,Nt&&(t.flags&1048576)!==0&&Ld(t,ba,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=ai(t.elementType),t.type=e,typeof e=="function")nu(e)?(s=ci(e,s),t.tag=1,t=th(null,t,e,s,l)):(t.tag=0,t=Vu(null,t,e,s,l));else{if(e!=null){var f=e.$$typeof;if(f===ee){t.tag=11,t=Xf(null,t,e,s,l);break e}else if(f===ie){t.tag=14,t=jf(null,t,e,s,l);break e}}throw t=fe(e)||e,Error(a(306,t,""))}}return t;case 0:return Vu(e,t,t.type,t.pendingProps,l);case 1:return s=t.type,f=ci(s,t.pendingProps),th(e,t,s,f,l);case 3:e:{if(Ut(t,t.stateNode.containerInfo),e===null)throw Error(a(387));s=t.pendingProps;var h=t.memoizedState;f=h.element,yu(e,t),ka(t,s,null,l);var C=t.memoizedState;if(s=C.cache,Cl(t,Sn,s),s!==h.cache&&du(t,[Sn],l,!0),Ua(),s=C.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:C.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=nh(e,t,s,l);break e}else if(s!==f){f=mo(Error(a(424)),t),_a(f),t=nh(e,t,s,l);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=Co(e.firstChild),zn=t,Nt=!0,xl=null,xo=!0,l=Wd(t,null,s,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ni(),s===f){t=Wo(e,t,l);break e}Ln(e,t,s,l)}t=t.child}return t;case 26:return Js(e,t),e===null?(l=yp(t.type,null,t.pendingProps,null))?t.memoizedState=l:Nt||(l=t.type,e=t.pendingProps,s=ur(lt.current).createElement(l),s[Le]=t,s[Se]=e,Fn(s,l,e),_t(s),t.stateNode=s):t.memoizedState=yp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Dn(t),e===null&&Nt&&(s=t.stateNode=pp(t.type,t.pendingProps,lt.current),zn=t,xo=!0,f=$t,kl(t.type)?(Nc=f,$t=Co(s.firstChild)):$t=f),Ln(e,t,t.pendingProps.children,l),Js(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Nt&&((f=s=$t)&&(s=oy(s,t.type,t.pendingProps,xo),s!==null?(t.stateNode=s,zn=t,$t=Co(s.firstChild),xo=!1,f=!0):f=!1),f||Sl(t)),Dn(t),f=t.type,h=t.pendingProps,C=e!==null?e.memoizedProps:null,s=h.children,Ac(f,h)?s=null:C!==null&&Ac(f,C)&&(t.flags|=32),t.memoizedState!==null&&(f=wu(e,t,v0,null,null,l),es._currentValue=f),Js(e,t),Ln(e,t,s,l),t.child;case 6:return e===null&&Nt&&((e=l=$t)&&(l=ly(l,t.pendingProps,xo),l!==null?(t.stateNode=l,zn=t,$t=null,e=!0):e=!1),e||Sl(t)),null;case 13:return oh(e,t,l);case 4:return Ut(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ri(t,null,s,l):Ln(e,t,s,l),t.child;case 11:return Xf(e,t,t.type,t.pendingProps,l);case 7:return Ln(e,t,t.pendingProps,l),t.child;case 8:return Ln(e,t,t.pendingProps.children,l),t.child;case 12:return Ln(e,t,t.pendingProps.children,l),t.child;case 10:return s=t.pendingProps,Cl(t,t.type,s.value),Ln(e,t,s.children,l),t.child;case 9:return f=t.type._context,s=t.pendingProps.children,li(t),f=Pn(f),s=s(f),t.flags|=1,Ln(e,t,s,l),t.child;case 14:return jf(e,t,t.type,t.pendingProps,l);case 15:return Wf(e,t,t.type,t.pendingProps,l);case 19:return ih(e,t,l);case 31:return b0(e,t,l);case 22:return Zf(e,t,l,t.pendingProps);case 24:return li(t),s=Pn(Sn),e===null?(f=pu(),f===null&&(f=Xt,h=fu(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=l),f=h),t.memoizedState={parent:s,cache:f},mu(t),Cl(t,Sn,f)):((e.lanes&l)!==0&&(yu(e,t),ka(t,null,null,l),Ua()),f=e.memoizedState,h=t.memoizedState,f.parent!==s?(f={parent:s,cache:s},t.memoizedState=f,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=f),Cl(t,Sn,s)):(s=h.cache,Cl(t,Sn,s),s!==f.cache&&du(t,[Sn],l,!0))),Ln(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Zo(e){e.flags|=4}function Qu(e,t,l,s,f){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Uh())e.flags|=8192;else throw si=Ds,gu}else e.flags&=-16777217}function sh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tp(t))if(Uh())e.flags|=8192;else throw si=Ds,gu}function Xs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?qe():536870912,e.lanes|=t,Ki|=t)}function Ba(e,t){if(!Nt)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function en(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(t)for(var f=e.child;f!==null;)l|=f.lanes|f.childLanes,s|=f.subtreeFlags&65011712,s|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)l|=f.lanes|f.childLanes,s|=f.subtreeFlags,s|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=s,e.childLanes=l,t}function M0(e,t,l){var s=t.pendingProps;switch(au(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(t),null;case 1:return en(t),null;case 3:return l=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Ko(Sn),pt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(ki(t)?Zo(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ru())),en(t),null;case 26:var f=t.type,h=t.memoizedState;return e===null?(Zo(t),h!==null?(en(t),sh(t,h)):(en(t),Qu(t,f,null,s,l))):h?h!==e.memoizedState?(Zo(t),en(t),sh(t,h)):(en(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Zo(t),en(t),Qu(t,f,e,s,l)),null;case 27:if(cn(t),l=lt.current,f=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Zo(t);else{if(!s){if(t.stateNode===null)throw Error(a(166));return en(t),null}e=Te.current,ki(t)?Hd(t):(e=pp(f,s,l),t.stateNode=e,Zo(t))}return en(t),null;case 5:if(cn(t),f=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Zo(t);else{if(!s){if(t.stateNode===null)throw Error(a(166));return en(t),null}if(h=Te.current,ki(t))Hd(t);else{var C=ur(lt.current);switch(h){case 1:h=C.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:h=C.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":h=C.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":h=C.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":h=C.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof s.is=="string"?C.createElement("select",{is:s.is}):C.createElement("select"),s.multiple?h.multiple=!0:s.size&&(h.size=s.size);break;default:h=typeof s.is=="string"?C.createElement(f,{is:s.is}):C.createElement(f)}}h[Le]=t,h[Se]=s;e:for(C=t.child;C!==null;){if(C.tag===5||C.tag===6)h.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}t.stateNode=h;e:switch(Fn(h,f,s),f){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Zo(t)}}return en(t),Qu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,l),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Zo(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(a(166));if(e=lt.current,ki(t)){if(e=t.stateNode,l=t.memoizedProps,s=null,f=zn,f!==null)switch(f.tag){case 27:case 5:s=f.memoizedProps}e[Le]=t,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||op(e.nodeValue,l)),e||Sl(t,!0)}else e=ur(e).createTextNode(s),e[Le]=t,t.stateNode=e}return en(t),null;case 31:if(l=t.memoizedState,e===null||e.memoizedState!==null){if(s=ki(t),l!==null){if(e===null){if(!s)throw Error(a(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[Le]=t}else ni(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;en(t),e=!1}else l=ru(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return t.flags&256?(so(t),t):(so(t),null);if((t.flags&128)!==0)throw Error(a(558))}return en(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=ki(t),s!==null&&s.dehydrated!==null){if(e===null){if(!f)throw Error(a(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Le]=t}else ni(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;en(t),f=!1}else f=ru(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return t.flags&256?(so(t),t):(so(t),null)}return so(t),(t.flags&128)!==0?(t.lanes=l,t):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=t.child,f=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(f=s.alternate.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==f&&(s.flags|=2048)),l!==e&&l&&(t.child.flags|=8192),Xs(t,t.updateQueue),en(t),null);case 4:return pt(),e===null&&Sc(t.stateNode.containerInfo),en(t),null;case 10:return Ko(t.type),en(t),null;case 19:if(te(pn),s=t.memoizedState,s===null)return en(t),null;if(f=(t.flags&128)!==0,h=s.rendering,h===null)if(f)Ba(s,!1);else{if(fn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=zs(e),h!==null){for(t.flags|=128,Ba(s,!1),e=h.updateQueue,t.updateQueue=e,Xs(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)kd(l,e),l=l.sibling;return be(pn,pn.current&1|2),Nt&&Yo(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&ct()>$s&&(t.flags|=128,f=!0,Ba(s,!1),t.lanes=4194304)}else{if(!f)if(e=zs(h),e!==null){if(t.flags|=128,f=!0,e=e.updateQueue,t.updateQueue=e,Xs(t,e),Ba(s,!0),s.tail===null&&s.tailMode==="hidden"&&!h.alternate&&!Nt)return en(t),null}else 2*ct()-s.renderingStartTime>$s&&l!==536870912&&(t.flags|=128,f=!0,Ba(s,!1),t.lanes=4194304);s.isBackwards?(h.sibling=t.child,t.child=h):(e=s.last,e!==null?e.sibling=h:t.child=h,s.last=h)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ct(),e.sibling=null,l=pn.current,be(pn,f?l&1|2:l&1),Nt&&Yo(t,s.treeForkCount),e):(en(t),null);case 22:case 23:return so(t),Cu(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(l&536870912)!==0&&(t.flags&128)===0&&(en(t),t.subtreeFlags&6&&(t.flags|=8192)):en(t),l=t.updateQueue,l!==null&&Xs(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==l&&(t.flags|=2048),e!==null&&te(ii),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Ko(Sn),en(t),null;case 25:return null;case 30:return null}throw Error(a(156,t.tag))}function R0(e,t){switch(au(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ko(Sn),pt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return cn(t),null;case 31:if(t.memoizedState!==null){if(so(t),t.alternate===null)throw Error(a(340));ni()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(so(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));ni()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return te(pn),null;case 4:return pt(),null;case 10:return Ko(t.type),null;case 22:case 23:return so(t),Cu(),e!==null&&te(ii),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ko(Sn),null;case 25:return null;default:return null}}function rh(e,t){switch(au(t),t.tag){case 3:Ko(Sn),pt();break;case 26:case 27:case 5:cn(t);break;case 4:pt();break;case 31:t.memoizedState!==null&&so(t);break;case 13:so(t);break;case 19:te(pn);break;case 10:Ko(t.type);break;case 22:case 23:so(t),Cu(),e!==null&&te(ii);break;case 24:Ko(Sn)}}function qa(e,t){try{var l=t.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var f=s.next;l=f;do{if((l.tag&e)===e){s=void 0;var h=l.create,C=l.inst;s=h(),C.destroy=s}l=l.next}while(l!==f)}}catch(E){Gt(t,t.return,E)}}function _l(e,t,l){try{var s=t.updateQueue,f=s!==null?s.lastEffect:null;if(f!==null){var h=f.next;s=h;do{if((s.tag&e)===e){var C=s.inst,E=C.destroy;if(E!==void 0){C.destroy=void 0,f=t;var R=l,K=E;try{K()}catch(ue){Gt(f,R,ue)}}}s=s.next}while(s!==h)}}catch(ue){Gt(t,t.return,ue)}}function uh(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{Qd(t,l)}catch(s){Gt(e,e.return,s)}}}function ch(e,t,l){l.props=ci(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){Gt(e,t,s)}}function Ga(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(f){Gt(e,t,f)}}function Po(e,t){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(f){Gt(e,t,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){Gt(e,t,f)}else l.current=null}function dh(e){var t=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(f){Gt(e,e.return,f)}}function $u(e,t,l){try{var s=e.stateNode;Z0(s,e.type,l,t),s[Se]=t}catch(f){Gt(e,e.return,f)}}function fh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&kl(e.type)||e.tag===4}function ec(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&kl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tc(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=no));else if(s!==4&&(s===27&&kl(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(tc(e,t,l),e=e.sibling;e!==null;)tc(e,t,l),e=e.sibling}function js(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(s!==4&&(s===27&&kl(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(js(e,t,l),e=e.sibling;e!==null;)js(e,t,l),e=e.sibling}function hh(e){var t=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,f=t.attributes;f.length;)t.removeAttributeNode(f[0]);Fn(t,s,l),t[Le]=e,t[Se]=l}catch(h){Gt(e,e.return,h)}}var Qo=!1,En=!1,nc=!1,ph=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function N0(e,t){if(e=e.containerInfo,Ec=mr,e=Ad(e),jr(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var f=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{l.nodeType,h.nodeType}catch{l=null;break e}var C=0,E=-1,R=-1,K=0,ue=0,pe=e,X=null;t:for(;;){for(var $;pe!==l||f!==0&&pe.nodeType!==3||(E=C+f),pe!==h||s!==0&&pe.nodeType!==3||(R=C+s),pe.nodeType===3&&(C+=pe.nodeValue.length),($=pe.firstChild)!==null;)X=pe,pe=$;for(;;){if(pe===e)break t;if(X===l&&++K===f&&(E=C),X===h&&++ue===s&&(R=C),($=pe.nextSibling)!==null)break;pe=X,X=pe.parentNode}pe=$}l=E===-1||R===-1?null:{start:E,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(wc={focusedElem:e,selectionRange:l},mr=!1,Rn=t;Rn!==null;)if(t=Rn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Rn=e;else for(;Rn!==null;){switch(t=Rn,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)f=e[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,l=t,f=h.memoizedProps,h=h.memoizedState,s=l.stateNode;try{var Xe=ci(l.type,f);e=s.getSnapshotBeforeUpdate(Xe,h),s.__reactInternalSnapshotBeforeUpdate=e}catch(rt){Gt(l,l.return,rt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)_c(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_c(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,Rn=e;break}Rn=t.return}}function gh(e,t,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:el(e,l),s&4&&qa(5,l);break;case 1:if(el(e,l),s&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(C){Gt(l,l.return,C)}else{var f=ci(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(f,t,e.__reactInternalSnapshotBeforeUpdate)}catch(C){Gt(l,l.return,C)}}s&64&&uh(l),s&512&&Ga(l,l.return);break;case 3:if(el(e,l),s&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{Qd(e,t)}catch(C){Gt(l,l.return,C)}}break;case 27:t===null&&s&4&&hh(l);case 26:case 5:el(e,l),t===null&&s&4&&dh(l),s&512&&Ga(l,l.return);break;case 12:el(e,l);break;case 31:el(e,l),s&4&&vh(e,l);break;case 13:el(e,l),s&4&&xh(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=H0.bind(null,l),iy(e,l))));break;case 22:if(s=l.memoizedState!==null||Qo,!s){t=t!==null&&t.memoizedState!==null||En,f=Qo;var h=En;Qo=s,(En=t)&&!h?tl(e,l,(l.subtreeFlags&8772)!==0):el(e,l),Qo=f,En=h}break;case 30:break;default:el(e,l)}}function mh(e){var t=e.alternate;t!==null&&(e.alternate=null,mh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Et(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var an=null,Wn=!1;function $o(e,t,l){for(l=l.child;l!==null;)yh(e,t,l),l=l.sibling}function yh(e,t,l){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(mn,l)}catch{}switch(l.tag){case 26:En||Po(l,t),$o(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:En||Po(l,t);var s=an,f=Wn;kl(l.type)&&(an=l.stateNode,Wn=!1),$o(e,t,l),Za(l.stateNode),an=s,Wn=f;break;case 5:En||Po(l,t);case 6:if(s=an,f=Wn,an=null,$o(e,t,l),an=s,Wn=f,an!==null)if(Wn)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(l.stateNode)}catch(h){Gt(l,t,h)}else try{an.removeChild(l.stateNode)}catch(h){Gt(l,t,h)}break;case 18:an!==null&&(Wn?(e=an,up(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),ta(e)):up(an,l.stateNode));break;case 4:s=an,f=Wn,an=l.stateNode.containerInfo,Wn=!0,$o(e,t,l),an=s,Wn=f;break;case 0:case 11:case 14:case 15:_l(2,l,t),En||_l(4,l,t),$o(e,t,l);break;case 1:En||(Po(l,t),s=l.stateNode,typeof s.componentWillUnmount=="function"&&ch(l,t,s)),$o(e,t,l);break;case 21:$o(e,t,l);break;case 22:En=(s=En)||l.memoizedState!==null,$o(e,t,l),En=s;break;default:$o(e,t,l)}}function vh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ta(e)}catch(l){Gt(t,t.return,l)}}}function xh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ta(e)}catch(l){Gt(t,t.return,l)}}function D0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ph),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ph),t;default:throw Error(a(435,e.tag))}}function Ws(e,t){var l=D0(e);t.forEach(function(s){if(!l.has(s)){l.add(s);var f=B0.bind(null,e,s);s.then(f,f)}})}function Zn(e,t){var l=t.deletions;if(l!==null)for(var s=0;s<l.length;s++){var f=l[s],h=e,C=t,E=C;e:for(;E!==null;){switch(E.tag){case 27:if(kl(E.type)){an=E.stateNode,Wn=!1;break e}break;case 5:an=E.stateNode,Wn=!1;break e;case 3:case 4:an=E.stateNode.containerInfo,Wn=!0;break e}E=E.return}if(an===null)throw Error(a(160));yh(h,C,f),an=null,Wn=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Sh(t,e),t=t.sibling}var Mo=null;function Sh(e,t){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zn(t,e),Qn(e),s&4&&(_l(3,e,e.return),qa(3,e),_l(5,e,e.return));break;case 1:Zn(t,e),Qn(e),s&512&&(En||l===null||Po(l,l.return)),s&64&&Qo&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var f=Mo;if(Zn(t,e),Qn(e),s&512&&(En||l===null||Po(l,l.return)),s&4){var h=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,f=f.ownerDocument||f;t:switch(s){case"title":h=f.getElementsByTagName("title")[0],(!h||h[Qe]||h[Le]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(s),f.head.insertBefore(h,f.querySelector("head > title"))),Fn(h,s,l),h[Le]=e,_t(h),s=h;break e;case"link":var C=Sp("link","href",f).get(s+(l.href||""));if(C){for(var E=0;E<C.length;E++)if(h=C[E],h.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&h.getAttribute("rel")===(l.rel==null?null:l.rel)&&h.getAttribute("title")===(l.title==null?null:l.title)&&h.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(E,1);break t}}h=f.createElement(s),Fn(h,s,l),f.head.appendChild(h);break;case"meta":if(C=Sp("meta","content",f).get(s+(l.content||""))){for(E=0;E<C.length;E++)if(h=C[E],h.getAttribute("content")===(l.content==null?null:""+l.content)&&h.getAttribute("name")===(l.name==null?null:l.name)&&h.getAttribute("property")===(l.property==null?null:l.property)&&h.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&h.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(E,1);break t}}h=f.createElement(s),Fn(h,s,l),f.head.appendChild(h);break;default:throw Error(a(468,s))}h[Le]=e,_t(h),s=h}e.stateNode=s}else Cp(f,e.type,e.stateNode);else e.stateNode=xp(f,s,e.memoizedProps);else h!==s?(h===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):h.count--,s===null?Cp(f,e.type,e.stateNode):xp(f,s,e.memoizedProps)):s===null&&e.stateNode!==null&&$u(e,e.memoizedProps,l.memoizedProps)}break;case 27:Zn(t,e),Qn(e),s&512&&(En||l===null||Po(l,l.return)),l!==null&&s&4&&$u(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Zn(t,e),Qn(e),s&512&&(En||l===null||Po(l,l.return)),e.flags&32){f=e.stateNode;try{Do(f,"")}catch(Xe){Gt(e,e.return,Xe)}}s&4&&e.stateNode!=null&&(f=e.memoizedProps,$u(e,f,l!==null?l.memoizedProps:f)),s&1024&&(nc=!0);break;case 6:if(Zn(t,e),Qn(e),s&4){if(e.stateNode===null)throw Error(a(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(Xe){Gt(e,e.return,Xe)}}break;case 3:if(fr=null,f=Mo,Mo=cr(t.containerInfo),Zn(t,e),Mo=f,Qn(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{ta(t.containerInfo)}catch(Xe){Gt(e,e.return,Xe)}nc&&(nc=!1,Ch(e));break;case 4:s=Mo,Mo=cr(e.stateNode.containerInfo),Zn(t,e),Qn(e),Mo=s;break;case 12:Zn(t,e),Qn(e);break;case 31:Zn(t,e),Qn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ws(e,s)));break;case 13:Zn(t,e),Qn(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Qs=ct()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ws(e,s)));break;case 22:f=e.memoizedState!==null;var R=l!==null&&l.memoizedState!==null,K=Qo,ue=En;if(Qo=K||f,En=ue||R,Zn(t,e),En=ue,Qo=K,Qn(e),s&8192)e:for(t=e.stateNode,t._visibility=f?t._visibility&-2:t._visibility|1,f&&(l===null||R||Qo||En||di(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){R=l=t;try{if(h=R.stateNode,f)C=h.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{E=R.stateNode;var pe=R.memoizedProps.style,X=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Xe){Gt(R,R.return,Xe)}}}else if(t.tag===6){if(l===null){R=t;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(Xe){Gt(R,R.return,Xe)}}}else if(t.tag===18){if(l===null){R=t;try{var $=R.stateNode;f?cp($,!0):cp(R.stateNode,!1)}catch(Xe){Gt(R,R.return,Xe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,Ws(e,l))));break;case 19:Zn(t,e),Qn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ws(e,s)));break;case 30:break;case 21:break;default:Zn(t,e),Qn(e)}}function Qn(e){var t=e.flags;if(t&2){try{for(var l,s=e.return;s!==null;){if(fh(s)){l=s;break}s=s.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var f=l.stateNode,h=ec(e);js(e,h,f);break;case 5:var C=l.stateNode;l.flags&32&&(Do(C,""),l.flags&=-33);var E=ec(e);js(e,E,C);break;case 3:case 4:var R=l.stateNode.containerInfo,K=ec(e);tc(e,K,R);break;default:throw Error(a(161))}}catch(ue){Gt(e,e.return,ue)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ch(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ch(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function el(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)gh(e,t.alternate,t),t=t.sibling}function di(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:_l(4,t,t.return),di(t);break;case 1:Po(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&ch(t,t.return,l),di(t);break;case 27:Za(t.stateNode);case 26:case 5:Po(t,t.return),di(t);break;case 22:t.memoizedState===null&&di(t);break;case 30:di(t);break;default:di(t)}e=e.sibling}}function tl(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,f=e,h=t,C=h.flags;switch(h.tag){case 0:case 11:case 15:tl(f,h,l),qa(4,h);break;case 1:if(tl(f,h,l),s=h,f=s.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){Gt(s,s.return,K)}if(s=h,f=s.updateQueue,f!==null){var E=s.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)Zd(R[f],E)}catch(K){Gt(s,s.return,K)}}l&&C&64&&uh(h),Ga(h,h.return);break;case 27:hh(h);case 26:case 5:tl(f,h,l),l&&s===null&&C&4&&dh(h),Ga(h,h.return);break;case 12:tl(f,h,l);break;case 31:tl(f,h,l),l&&C&4&&vh(f,h);break;case 13:tl(f,h,l),l&&C&4&&xh(f,h);break;case 22:h.memoizedState===null&&tl(f,h,l),Ga(h,h.return);break;case 30:break;default:tl(f,h,l)}t=t.sibling}}function oc(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&Ma(l))}function lc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ma(e))}function Ro(e,t,l,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Th(e,t,l,s),t=t.sibling}function Th(e,t,l,s){var f=t.flags;switch(t.tag){case 0:case 11:case 15:Ro(e,t,l,s),f&2048&&qa(9,t);break;case 1:Ro(e,t,l,s);break;case 3:Ro(e,t,l,s),f&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ma(e)));break;case 12:if(f&2048){Ro(e,t,l,s),e=t.stateNode;try{var h=t.memoizedProps,C=h.id,E=h.onPostCommit;typeof E=="function"&&E(C,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Gt(t,t.return,R)}}else Ro(e,t,l,s);break;case 31:Ro(e,t,l,s);break;case 13:Ro(e,t,l,s);break;case 23:break;case 22:h=t.stateNode,C=t.alternate,t.memoizedState!==null?h._visibility&2?Ro(e,t,l,s):Oa(e,t):h._visibility&2?Ro(e,t,l,s):(h._visibility|=2,Vi(e,t,l,s,(t.subtreeFlags&10256)!==0||!1)),f&2048&&oc(C,t);break;case 24:Ro(e,t,l,s),f&2048&&lc(t.alternate,t);break;default:Ro(e,t,l,s)}}function Vi(e,t,l,s,f){for(f=f&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,C=t,E=l,R=s,K=C.flags;switch(C.tag){case 0:case 11:case 15:Vi(h,C,E,R,f),qa(8,C);break;case 23:break;case 22:var ue=C.stateNode;C.memoizedState!==null?ue._visibility&2?Vi(h,C,E,R,f):Oa(h,C):(ue._visibility|=2,Vi(h,C,E,R,f)),f&&K&2048&&oc(C.alternate,C);break;case 24:Vi(h,C,E,R,f),f&&K&2048&&lc(C.alternate,C);break;default:Vi(h,C,E,R,f)}t=t.sibling}}function Oa(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,s=t,f=s.flags;switch(s.tag){case 22:Oa(l,s),f&2048&&oc(s.alternate,s);break;case 24:Oa(l,s),f&2048&&lc(s.alternate,s);break;default:Oa(l,s)}t=t.sibling}}var Va=8192;function Yi(e,t,l){if(e.subtreeFlags&Va)for(e=e.child;e!==null;)Eh(e,t,l),e=e.sibling}function Eh(e,t,l){switch(e.tag){case 26:Yi(e,t,l),e.flags&Va&&e.memoizedState!==null&&yy(l,Mo,e.memoizedState,e.memoizedProps);break;case 5:Yi(e,t,l);break;case 3:case 4:var s=Mo;Mo=cr(e.stateNode.containerInfo),Yi(e,t,l),Mo=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Va,Va=16777216,Yi(e,t,l),Va=s):Yi(e,t,l));break;default:Yi(e,t,l)}}function wh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ya(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];Rn=s,bh(s,e)}wh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ah(e),e=e.sibling}function Ah(e){switch(e.tag){case 0:case 11:case 15:Ya(e),e.flags&2048&&_l(9,e,e.return);break;case 3:Ya(e);break;case 12:Ya(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Zs(e)):Ya(e);break;default:Ya(e)}}function Zs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];Rn=s,bh(s,e)}wh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:_l(8,t,t.return),Zs(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,Zs(t));break;default:Zs(t)}e=e.sibling}}function bh(e,t){for(;Rn!==null;){var l=Rn;switch(l.tag){case 0:case 11:case 15:_l(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ma(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,Rn=s;else e:for(l=e;Rn!==null;){s=Rn;var f=s.sibling,h=s.return;if(mh(s),s===l){Rn=null;break e}if(f!==null){f.return=h,Rn=f;break e}Rn=h}}}var I0={getCacheForType:function(e){var t=Pn(Sn),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l},cacheSignal:function(){return Pn(Sn).controller.signal}},U0=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Xt=null,wt=null,Mt=0,qt=0,ro=null,Ml=!1,Ji=!1,ic=!1,nl=0,fn=0,Rl=0,fi=0,ac=0,uo=0,Ki=0,Ja=null,$n=null,sc=!1,Qs=0,_h=0,$s=1/0,er=null,Nl=null,wn=0,Dl=null,Xi=null,ol=0,rc=0,uc=null,Mh=null,Ka=0,cc=null;function co(){return(Lt&2)!==0&&Mt!==0?Mt&-Mt:N.T!==null?mc():He()}function Rh(){if(uo===0)if((Mt&536870912)===0||Nt){var e=to;to<<=1,(to&3932160)===0&&(to=262144),uo=e}else uo=536870912;return e=ao.current,e!==null&&(e.flags|=32),uo}function eo(e,t,l){(e===Xt&&(qt===2||qt===9)||e.cancelPendingCommit!==null)&&(ji(e,0),Il(e,Mt,uo,!1)),V(e,l),((Lt&2)===0||e!==Xt)&&(e===Xt&&((Lt&2)===0&&(fi|=l),fn===4&&Il(e,Mt,uo,!1)),Lo(e))}function Nh(e,t,l){if((Lt&6)!==0)throw Error(a(327));var s=!l&&(t&127)===0&&(t&e.expiredLanes)===0||Oe(e,t),f=s?P0(e,t):fc(e,t,!0),h=s;do{if(f===0){Ji&&!s&&Il(e,t,0,!1);break}else{if(l=e.current.alternate,h&&!k0(l)){f=fc(e,t,!1),h=!1;continue}if(f===2){if(h=t,e.errorRecoveryDisabledLanes&h)var C=0;else C=e.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){t=C;e:{var E=e;f=Ja;var R=E.current.memoizedState.isDehydrated;if(R&&(ji(E,C).flags|=256),C=fc(E,C,!1),C!==2){if(ic&&!R){E.errorRecoveryDisabledLanes|=h,fi|=h,f=4;break e}h=$n,$n=f,h!==null&&($n===null?$n=h:$n.push.apply($n,h))}f=C}if(h=!1,f!==2)continue}}if(f===1){ji(e,0),Il(e,t,0,!0);break}e:{switch(s=e,h=f,h){case 0:case 1:throw Error(a(345));case 4:if((t&4194048)!==t)break;case 6:Il(s,t,uo,!Ml);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(a(329))}if((t&62914560)===t&&(f=Qs+300-ct(),10<f)){if(Il(s,t,uo,!Ml),Be(s,0,!0)!==0)break e;ol=t,s.timeoutHandle=sp(Dh.bind(null,s,l,$n,er,sc,t,uo,fi,Ki,Ml,h,"Throttled",-0,0),f);break e}Dh(s,l,$n,er,sc,t,uo,fi,Ki,Ml,h,null,-0,0)}}break}while(!0);Lo(e)}function Dh(e,t,l,s,f,h,C,E,R,K,ue,pe,X,$){if(e.timeoutHandle=-1,pe=t.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:no},Eh(t,h,pe);var Xe=(h&62914560)===h?Qs-ct():(h&4194048)===h?_h-ct():0;if(Xe=vy(pe,Xe),Xe!==null){ol=h,e.cancelPendingCommit=Xe(Hh.bind(null,e,t,h,l,s,f,C,E,R,ue,pe,null,X,$)),Il(e,h,C,!K);return}}Hh(e,t,h,l,s,f,C,E,R)}function k0(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var f=l[s],h=f.getSnapshot;f=f.value;try{if(!lo(h(),f))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Il(e,t,l,s){t&=~ac,t&=~fi,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var f=t;0<f;){var h=31-Zt(f),C=1<<h;s[h]=-1,f&=~C}l!==0&&_(e,l,t)}function tr(){return(Lt&6)===0?(Xa(0),!1):!0}function dc(){if(wt!==null){if(qt===0)var e=wt.return;else e=wt,Jo=oi=null,_u(e),Hi=null,Na=0,e=wt;for(;e!==null;)rh(e.alternate,e),e=e.return;wt=null}}function ji(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,ey(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),ol=0,dc(),Xt=e,wt=l=Vo(e.current,null),Mt=t,qt=0,ro=null,Ml=!1,Ji=Oe(e,t),ic=!1,Ki=uo=ac=fi=Rl=fn=0,$n=Ja=null,sc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var f=31-Zt(s),h=1<<f;t|=e[f],s&=~h}return nl=t,Ts(),l}function Ih(e,t){yt=null,N.H=Fa,t===Fi||t===Ns?(t=Kd(),qt=3):t===gu?(t=Kd(),qt=4):qt=t===Ou?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ro=t,wt===null&&(fn=1,Vs(e,mo(t,e.current)))}function Uh(){var e=ao.current;return e===null?!0:(Mt&4194048)===Mt?So===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?e===So:!1}function kh(){var e=N.H;return N.H=Fa,e===null?Fa:e}function zh(){var e=N.A;return N.A=I0,e}function nr(){fn=4,Ml||(Mt&4194048)!==Mt&&ao.current!==null||(Ji=!0),(Rl&134217727)===0&&(fi&134217727)===0||Xt===null||Il(Xt,Mt,uo,!1)}function fc(e,t,l){var s=Lt;Lt|=2;var f=kh(),h=zh();(Xt!==e||Mt!==t)&&(er=null,ji(e,t)),t=!1;var C=fn;e:do try{if(qt!==0&&wt!==null){var E=wt,R=ro;switch(qt){case 8:dc(),C=6;break e;case 3:case 2:case 9:case 6:ao.current===null&&(t=!0);var K=qt;if(qt=0,ro=null,Wi(e,E,R,K),l&&Ji){C=0;break e}break;default:K=qt,qt=0,ro=null,Wi(e,E,R,K)}}z0(),C=fn;break}catch(ue){Ih(e,ue)}while(!0);return t&&e.shellSuspendCounter++,Jo=oi=null,Lt=s,N.H=f,N.A=h,wt===null&&(Xt=null,Mt=0,Ts()),C}function z0(){for(;wt!==null;)Ph(wt)}function P0(e,t){var l=Lt;Lt|=2;var s=kh(),f=zh();Xt!==e||Mt!==t?(er=null,$s=ct()+500,ji(e,t)):Ji=Oe(e,t);e:do try{if(qt!==0&&wt!==null){t=wt;var h=ro;t:switch(qt){case 1:qt=0,ro=null,Wi(e,t,h,1);break;case 2:case 9:if(Yd(h)){qt=0,ro=null,Lh(t);break}t=function(){qt!==2&&qt!==9||Xt!==e||(qt=7),Lo(e)},h.then(t,t);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:Yd(h)?(qt=0,ro=null,Lh(t)):(qt=0,ro=null,Wi(e,t,h,7));break;case 5:var C=null;switch(wt.tag){case 26:C=wt.memoizedState;case 5:case 27:var E=wt;if(C?Tp(C):E.stateNode.complete){qt=0,ro=null;var R=E.sibling;if(R!==null)wt=R;else{var K=E.return;K!==null?(wt=K,or(K)):wt=null}break t}}qt=0,ro=null,Wi(e,t,h,5);break;case 6:qt=0,ro=null,Wi(e,t,h,6);break;case 8:dc(),fn=6;break e;default:throw Error(a(462))}}L0();break}catch(ue){Ih(e,ue)}while(!0);return Jo=oi=null,N.H=s,N.A=f,Lt=l,wt!==null?0:(Xt=null,Mt=0,Ts(),fn)}function L0(){for(;wt!==null&&!sn();)Ph(wt)}function Ph(e){var t=ah(e.alternate,e,nl);e.memoizedProps=e.pendingProps,t===null?or(e):wt=t}function Lh(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=eh(l,t,t.pendingProps,t.type,void 0,Mt);break;case 11:t=eh(l,t,t.pendingProps,t.type.render,t.ref,Mt);break;case 5:_u(t);default:rh(l,t),t=wt=kd(t,nl),t=ah(l,t,nl)}e.memoizedProps=e.pendingProps,t===null?or(e):wt=t}function Wi(e,t,l,s){Jo=oi=null,_u(t),Hi=null,Na=0;var f=t.return;try{if(A0(e,f,t,l,Mt)){fn=1,Vs(e,mo(l,e.current)),wt=null;return}}catch(h){if(f!==null)throw wt=f,h;fn=1,Vs(e,mo(l,e.current)),wt=null;return}t.flags&32768?(Nt||s===1?e=!0:Ji||(Mt&536870912)!==0?e=!1:(Ml=e=!0,(s===2||s===9||s===3||s===6)&&(s=ao.current,s!==null&&s.tag===13&&(s.flags|=16384))),Fh(t,e)):or(t)}function or(e){var t=e;do{if((t.flags&32768)!==0){Fh(t,Ml);return}e=t.return;var l=M0(t.alternate,t,nl);if(l!==null){wt=l;return}if(t=t.sibling,t!==null){wt=t;return}wt=t=e}while(t!==null);fn===0&&(fn=5)}function Fh(e,t){do{var l=R0(e.alternate,e);if(l!==null){l.flags&=32767,wt=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){wt=e;return}wt=e=l}while(e!==null);fn=6,wt=null}function Hh(e,t,l,s,f,h,C,E,R){e.cancelPendingCommit=null;do lr();while(wn!==0);if((Lt&6)!==0)throw Error(a(327));if(t!==null){if(t===e.current)throw Error(a(177));if(h=t.lanes|t.childLanes,h|=eu,ae(e,l,h,C,E,R),e===Xt&&(wt=Xt=null,Mt=0),Xi=t,Dl=e,ol=l,rc=h,uc=f,Mh=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,q0(nn,function(){return Vh(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=N.T,N.T=null,f=se.p,se.p=2,C=Lt,Lt|=4;try{N0(e,t,l)}finally{Lt=C,se.p=f,N.T=s}}wn=1,Bh(),qh(),Gh()}}function Bh(){if(wn===1){wn=0;var e=Dl,t=Xi,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=N.T,N.T=null;var s=se.p;se.p=2;var f=Lt;Lt|=4;try{Sh(t,e);var h=wc,C=Ad(e.containerInfo),E=h.focusedElem,R=h.selectionRange;if(C!==E&&E&&E.ownerDocument&&wd(E.ownerDocument.documentElement,E)){if(R!==null&&jr(E)){var K=R.start,ue=R.end;if(ue===void 0&&(ue=K),"selectionStart"in E)E.selectionStart=K,E.selectionEnd=Math.min(ue,E.value.length);else{var pe=E.ownerDocument||document,X=pe&&pe.defaultView||window;if(X.getSelection){var $=X.getSelection(),Xe=E.textContent.length,rt=Math.min(R.start,Xe),Jt=R.end===void 0?rt:Math.min(R.end,Xe);!$.extend&&rt>Jt&&(C=Jt,Jt=rt,rt=C);var G=Ed(E,rt),k=Ed(E,Jt);if(G&&k&&($.rangeCount!==1||$.anchorNode!==G.node||$.anchorOffset!==G.offset||$.focusNode!==k.node||$.focusOffset!==k.offset)){var J=pe.createRange();J.setStart(G.node,G.offset),$.removeAllRanges(),rt>Jt?($.addRange(J),$.extend(k.node,k.offset)):(J.setEnd(k.node,k.offset),$.addRange(J))}}}}for(pe=[],$=E;$=$.parentNode;)$.nodeType===1&&pe.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<pe.length;E++){var de=pe[E];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}mr=!!Ec,wc=Ec=null}finally{Lt=f,se.p=s,N.T=l}}e.current=t,wn=2}}function qh(){if(wn===2){wn=0;var e=Dl,t=Xi,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=N.T,N.T=null;var s=se.p;se.p=2;var f=Lt;Lt|=4;try{gh(e,t.alternate,t)}finally{Lt=f,se.p=s,N.T=l}}wn=3}}function Gh(){if(wn===4||wn===3){wn=0,Ne();var e=Dl,t=Xi,l=ol,s=Mh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?wn=5:(wn=0,Xi=Dl=null,Oh(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Nl=null),xe(l),t=t.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(mn,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=N.T,f=se.p,se.p=2,N.T=null;try{for(var h=e.onRecoverableError,C=0;C<s.length;C++){var E=s[C];h(E.value,{componentStack:E.stack})}}finally{N.T=t,se.p=f}}(ol&3)!==0&&lr(),Lo(e),f=e.pendingLanes,(l&261930)!==0&&(f&42)!==0?e===cc?Ka++:(Ka=0,cc=e):Ka=0,Xa(0)}}function Oh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ma(t)))}function lr(){return Bh(),qh(),Gh(),Vh()}function Vh(){if(wn!==5)return!1;var e=Dl,t=rc;rc=0;var l=xe(ol),s=N.T,f=se.p;try{se.p=32>l?32:l,N.T=null,l=uc,uc=null;var h=Dl,C=ol;if(wn=0,Xi=Dl=null,ol=0,(Lt&6)!==0)throw Error(a(331));var E=Lt;if(Lt|=4,Ah(h.current),Th(h,h.current,C,l),Lt=E,Xa(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(mn,h)}catch{}return!0}finally{se.p=f,N.T=s,Oh(e,t)}}function Yh(e,t,l){t=mo(l,t),t=Gu(e.stateNode,t,2),e=wl(e,t,2),e!==null&&(V(e,2),Lo(e))}function Gt(e,t,l){if(e.tag===3)Yh(e,e,l);else for(;t!==null;){if(t.tag===3){Yh(t,e,l);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Nl===null||!Nl.has(s))){e=mo(l,e),l=Jf(2),s=wl(t,l,2),s!==null&&(Kf(l,s,t,e),V(s,2),Lo(s));break}}t=t.return}}function hc(e,t,l){var s=e.pingCache;if(s===null){s=e.pingCache=new U0;var f=new Set;s.set(t,f)}else f=s.get(t),f===void 0&&(f=new Set,s.set(t,f));f.has(l)||(ic=!0,f.add(l),e=F0.bind(null,e,t,l),t.then(e,e))}function F0(e,t,l){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Xt===e&&(Mt&l)===l&&(fn===4||fn===3&&(Mt&62914560)===Mt&&300>ct()-Qs?(Lt&2)===0&&ji(e,0):ac|=l,Ki===Mt&&(Ki=0)),Lo(e)}function Jh(e,t){t===0&&(t=qe()),e=ei(e,t),e!==null&&(V(e,t),Lo(e))}function H0(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),Jh(e,l)}function B0(e,t){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,f=e.memoizedState;f!==null&&(l=f.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(t),Jh(e,l)}function q0(e,t){return It(e,t)}var ir=null,Zi=null,pc=!1,ar=!1,gc=!1,Ul=0;function Lo(e){e!==Zi&&e.next===null&&(Zi===null?ir=Zi=e:Zi=Zi.next=e),ar=!0,pc||(pc=!0,O0())}function Xa(e,t){if(!gc&&ar){gc=!0;do for(var l=!1,s=ir;s!==null;){if(e!==0){var f=s.pendingLanes;if(f===0)var h=0;else{var C=s.suspendedLanes,E=s.pingedLanes;h=(1<<31-Zt(42|e)+1)-1,h&=f&~(C&~E),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(l=!0,Wh(s,h))}else h=Mt,h=Be(s,s===Xt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(h&3)===0||Oe(s,h)||(l=!0,Wh(s,h));s=s.next}while(l);gc=!1}}function G0(){Kh()}function Kh(){ar=pc=!1;var e=0;Ul!==0&&$0()&&(e=Ul);for(var t=ct(),l=null,s=ir;s!==null;){var f=s.next,h=Xh(s,t);h===0?(s.next=null,l===null?ir=f:l.next=f,f===null&&(Zi=l)):(l=s,(e!==0||(h&3)!==0)&&(ar=!0)),s=f}wn!==0&&wn!==5||Xa(e),Ul!==0&&(Ul=0)}function Xh(e,t){for(var l=e.suspendedLanes,s=e.pingedLanes,f=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var C=31-Zt(h),E=1<<C,R=f[C];R===-1?((E&l)===0||(E&s)!==0)&&(f[C]=Ke(E,t)):R<=t&&(e.expiredLanes|=E),h&=~E}if(t=Xt,l=Mt,l=Be(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===t&&(qt===2||qt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Fe(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Oe(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(s!==null&&Fe(s),xe(l)){case 2:case 8:l=St;break;case 32:l=nn;break;case 268435456:l=hn;break;default:l=nn}return s=jh.bind(null,e),l=It(l,s),e.callbackPriority=t,e.callbackNode=l,t}return s!==null&&s!==null&&Fe(s),e.callbackPriority=2,e.callbackNode=null,2}function jh(e,t){if(wn!==0&&wn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(lr()&&e.callbackNode!==l)return null;var s=Mt;return s=Be(e,e===Xt?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Nh(e,s,t),Xh(e,ct()),e.callbackNode!=null&&e.callbackNode===l?jh.bind(null,e):null)}function Wh(e,t){if(lr())return null;Nh(e,t,!0)}function O0(){ty(function(){(Lt&6)!==0?It(et,G0):Kh()})}function mc(){if(Ul===0){var e=Pi;e===0&&(e=Un,Un<<=1,(Un&261888)===0&&(Un=256)),Ul=e}return Ul}function Zh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Go(""+e)}function Qh(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function V0(e,t,l,s,f){if(t==="submit"&&l&&l.stateNode===f){var h=Zh((f[Se]||null).action),C=s.submitter;C&&(t=(t=C[Se]||null)?Zh(t.formAction):C.getAttribute("formAction"),t!==null&&(h=t,C=null));var E=new Ei("action","action",null,s,f);e.push({event:E,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ul!==0){var R=C?Qh(f,C):new FormData(f);Pu(l,{pending:!0,data:R,method:f.method,action:h},null,R)}}else typeof h=="function"&&(E.preventDefault(),R=C?Qh(f,C):new FormData(f),Pu(l,{pending:!0,data:R,method:f.method,action:h},h,R))},currentTarget:f}]})}}for(var yc=0;yc<$r.length;yc++){var vc=$r[yc],Y0=vc.toLowerCase(),J0=vc[0].toUpperCase()+vc.slice(1);_o(Y0,"on"+J0)}_o(Md,"onAnimationEnd"),_o(Rd,"onAnimationIteration"),_o(Nd,"onAnimationStart"),_o("dblclick","onDoubleClick"),_o("focusin","onFocus"),_o("focusout","onBlur"),_o(r0,"onTransitionRun"),_o(u0,"onTransitionStart"),_o(c0,"onTransitionCancel"),_o(Dd,"onTransitionEnd"),_n("onMouseEnter",["mouseout","mouseover"]),_n("onMouseLeave",["mouseout","mouseover"]),_n("onPointerEnter",["pointerout","pointerover"]),_n("onPointerLeave",["pointerout","pointerover"]),un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),un("onBeforeInput",["compositionend","keypress","textInput","paste"]),un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ja));function $h(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],f=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var C=s.length-1;0<=C;C--){var E=s[C],R=E.instance,K=E.currentTarget;if(E=E.listener,R!==h&&f.isPropagationStopped())break e;h=E,f.currentTarget=K;try{h(f)}catch(ue){Cs(ue)}f.currentTarget=null,h=R}else for(C=0;C<s.length;C++){if(E=s[C],R=E.instance,K=E.currentTarget,E=E.listener,R!==h&&f.isPropagationStopped())break e;h=E,f.currentTarget=K;try{h(f)}catch(ue){Cs(ue)}f.currentTarget=null,h=R}}}}function At(e,t){var l=t[Ze];l===void 0&&(l=t[Ze]=new Set);var s=e+"__bubble";l.has(s)||(ep(t,e,2,!1),l.add(s))}function xc(e,t,l){var s=0;t&&(s|=4),ep(l,e,s,t)}var sr="_reactListening"+Math.random().toString(36).slice(2);function Sc(e){if(!e[sr]){e[sr]=!0,Bt.forEach(function(l){l!=="selectionchange"&&(K0.has(l)||xc(l,!1,e),xc(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sr]||(t[sr]=!0,xc("selectionchange",!1,t))}}function ep(e,t,l,s){switch(Rp(t)){case 2:var f=Cy;break;case 8:f=Ty;break;default:f=zc}l=f.bind(null,t,l,e),f=void 0,!Ci||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(f=!0),s?f!==void 0?e.addEventListener(t,l,{capture:!0,passive:f}):e.addEventListener(t,l,!0):f!==void 0?e.addEventListener(t,l,{passive:f}):e.addEventListener(t,l,!1)}function Cc(e,t,l,s,f){var h=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var C=s.tag;if(C===3||C===4){var E=s.stateNode.containerInfo;if(E===f)break;if(C===4)for(C=s.return;C!==null;){var R=C.tag;if((R===3||R===4)&&C.stateNode.containerInfo===f)return;C=C.return}for(;E!==null;){if(C=jt(E),C===null)return;if(R=C.tag,R===5||R===6||R===26||R===27){s=h=C;continue e}E=E.parentNode}}s=s.return}ps(function(){var K=h,ue=ha(l),pe=[];e:{var X=Id.get(e);if(X!==void 0){var $=Ei,Xe=e;switch(e){case"keypress":if(Wl(l)===0)break e;case"keydown":case"keyup":$=Or;break;case"focusin":Xe="focus",$=va;break;case"focusout":Xe="blur",$=va;break;case"beforeblur":case"afterblur":$=va;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Xn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Ss;break;case Md:case Rd:case Nd:$=Hr;break;case Dd:$=Kr;break;case"scroll":case"scrollend":$=Lr;break;case"wheel":$=w;break;case"copy":case"cut":case"paste":$=ml;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=xs;break;case"toggle":case"beforetoggle":$=D}var rt=(t&4)!==0,Jt=!rt&&(e==="scroll"||e==="scrollend"),G=rt?X!==null?X+"Capture":null:X;rt=[];for(var k=K,J;k!==null;){var de=k;if(J=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||J===null||G===null||(de=Kl(k,G),de!=null&&rt.push(Wa(k,de,J))),Jt)break;k=k.return}0<rt.length&&(X=new $(X,Xe,null,l,ue),pe.push({event:X,listeners:rt}))}}if((t&7)===0){e:{if(X=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",X&&l!==Si&&(Xe=l.relatedTarget||l.fromElement)&&(jt(Xe)||Xe[Ue]))break e;if(($||X)&&(X=ue.window===ue?ue:(X=ue.ownerDocument)?X.defaultView||X.parentWindow:window,$?(Xe=l.relatedTarget||l.toElement,$=K,Xe=Xe?jt(Xe):null,Xe!==null&&(Jt=r(Xe),rt=Xe.tag,Xe!==Jt||rt!==5&&rt!==27&&rt!==6)&&(Xe=null)):($=null,Xe=K),$!==Xe)){if(rt=ms,de="onMouseLeave",G="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(rt=xs,de="onPointerLeave",G="onPointerEnter",k="pointer"),Jt=$==null?X:on($),J=Xe==null?X:on(Xe),X=new rt(de,k+"leave",$,l,ue),X.target=Jt,X.relatedTarget=J,de=null,jt(ue)===K&&(rt=new rt(G,k+"enter",Xe,l,ue),rt.target=J,rt.relatedTarget=Jt,de=rt),Jt=de,$&&Xe)t:{for(rt=X0,G=$,k=Xe,J=0,de=G;de;de=rt(de))J++;de=0;for(var ot=k;ot;ot=rt(ot))de++;for(;0<J-de;)G=rt(G),J--;for(;0<de-J;)k=rt(k),de--;for(;J--;){if(G===k||k!==null&&G===k.alternate){rt=G;break t}G=rt(G),k=rt(k)}rt=null}else rt=null;$!==null&&tp(pe,X,$,rt,!1),Xe!==null&&Jt!==null&&tp(pe,Jt,Xe,rt,!0)}}e:{if(X=K?on(K):window,$=X.nodeName&&X.nodeName.toLowerCase(),$==="select"||$==="input"&&X.type==="file")var kt=jn;else if(ze(X))if(Wt)kt=i0;else{kt=o0;var $e=n0}else $=X.nodeName,!$||$.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&dl(K.elementType)&&(kt=jn):kt=l0;if(kt&&(kt=kt(e,K))){Ve(pe,kt,l,ue);break e}$e&&$e(e,X,K),e==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&fa(X,"number",X.value)}switch($e=K?on(K):window,e){case"focusin":(ze($e)||$e.contentEditable==="true")&&(Mi=$e,Wr=K,Aa=null);break;case"focusout":Aa=Wr=Mi=null;break;case"mousedown":Zr=!0;break;case"contextmenu":case"mouseup":case"dragend":Zr=!1,bd(pe,l,ue);break;case"selectionchange":if(s0)break;case"keydown":case"keyup":bd(pe,l,ue)}var xt;if(O)e:{switch(e){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else we?Ye(e,l)&&(Rt="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Rt="onCompositionStart");Rt&&(re&&l.locale!=="ko"&&(we||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&we&&(xt=ma()):(po=ue,jl="value"in po?po.value:po.textContent,we=!0)),$e=rr(K,Rt),0<$e.length&&(Rt=new Ca(Rt,e,null,l,ue),pe.push({event:Rt,listeners:$e}),xt?Rt.data=xt:(xt=W(l),xt!==null&&(Rt.data=xt)))),(xt=Y?Q(e,l):oe(e,l))&&(Rt=rr(K,"onBeforeInput"),0<Rt.length&&($e=new Ca("onBeforeInput","beforeinput",null,l,ue),pe.push({event:$e,listeners:Rt}),$e.data=xt)),V0(pe,e,K,l,ue)}$h(pe,t)})}function Wa(e,t,l){return{instance:e,listener:t,currentTarget:l}}function rr(e,t){for(var l=t+"Capture",s=[];e!==null;){var f=e,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=Kl(e,l),f!=null&&s.unshift(Wa(e,f,h)),f=Kl(e,t),f!=null&&s.push(Wa(e,f,h))),e.tag===3)return s;e=e.return}return[]}function X0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function tp(e,t,l,s,f){for(var h=t._reactName,C=[];l!==null&&l!==s;){var E=l,R=E.alternate,K=E.stateNode;if(E=E.tag,R!==null&&R===s)break;E!==5&&E!==26&&E!==27||K===null||(R=K,f?(K=Kl(l,h),K!=null&&C.unshift(Wa(l,K,R))):f||(K=Kl(l,h),K!=null&&C.push(Wa(l,K,R)))),l=l.return}C.length!==0&&e.push({event:t,listeners:C})}var j0=/\r\n?/g,W0=/\u0000|\uFFFD/g;function np(e){return(typeof e=="string"?e:""+e).replace(j0,`
`).replace(W0,"")}function op(e,t){return t=np(t),np(e)===t}function Yt(e,t,l,s,f,h){switch(l){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Do(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Do(e,""+s);break;case"className":Bo(e,"class",s);break;case"tabIndex":Bo(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Bo(e,l,s);break;case"style":hs(e,s,h);break;case"data":if(t!=="object"){Bo(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=Go(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(l==="formAction"?(t!=="input"&&Yt(e,t,"name",f.name,f,null),Yt(e,t,"formEncType",f.formEncType,f,null),Yt(e,t,"formMethod",f.formMethod,f,null),Yt(e,t,"formTarget",f.formTarget,f,null)):(Yt(e,t,"encType",f.encType,f,null),Yt(e,t,"method",f.method,f,null),Yt(e,t,"target",f.target,f,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=Go(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=no);break;case"onScroll":s!=null&&At("scroll",e);break;case"onScrollEnd":s!=null&&At("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=Go(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":At("beforetoggle",e),At("toggle",e),Ho(e,"popover",s);break;case"xlinkActuate":ln(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ln(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ln(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ln(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ln(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ln(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ln(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ln(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ln(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Ho(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=vi.get(l)||l,Ho(e,l,s))}}function Tc(e,t,l,s,f,h){switch(l){case"style":hs(e,s,h);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=l}}break;case"children":typeof s=="string"?Do(e,s):(typeof s=="number"||typeof s=="bigint")&&Do(e,""+s);break;case"onScroll":s!=null&&At("scroll",e);break;case"onScrollEnd":s!=null&&At("scrollend",e);break;case"onClick":s!=null&&(e.onclick=no);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qn.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),t=l.slice(2,f?l.length-7:void 0),h=e[Se]||null,h=h!=null?h[l]:null,typeof h=="function"&&e.removeEventListener(t,h,f),typeof s=="function")){typeof h!="function"&&h!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,s,f);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):Ho(e,l,s)}}}function Fn(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",e),At("load",e);var s=!1,f=!1,h;for(h in l)if(l.hasOwnProperty(h)){var C=l[h];if(C!=null)switch(h){case"src":s=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Yt(e,t,h,C,l,null)}}f&&Yt(e,t,"srcSet",l.srcSet,l,null),s&&Yt(e,t,"src",l.src,l,null);return;case"input":At("invalid",e);var E=h=C=f=null,R=null,K=null;for(s in l)if(l.hasOwnProperty(s)){var ue=l[s];if(ue!=null)switch(s){case"name":f=ue;break;case"type":C=ue;break;case"checked":R=ue;break;case"defaultChecked":K=ue;break;case"value":h=ue;break;case"defaultValue":E=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,t));break;default:Yt(e,t,s,ue,l,null)}}cs(e,h,E,R,K,C,f,!1);return;case"select":At("invalid",e),s=C=h=null;for(f in l)if(l.hasOwnProperty(f)&&(E=l[f],E!=null))switch(f){case"value":h=E;break;case"defaultValue":C=E;break;case"multiple":s=E;default:Yt(e,t,f,E,l,null)}t=h,l=C,e.multiple=!!s,t!=null?ul(e,!!s,t,!1):l!=null&&ul(e,!!s,l,!0);return;case"textarea":At("invalid",e),h=f=s=null;for(C in l)if(l.hasOwnProperty(C)&&(E=l[C],E!=null))switch(C){case"value":s=E;break;case"defaultValue":f=E;break;case"children":h=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:Yt(e,t,C,E,l,null)}cl(e,s,f,h);return;case"option":for(R in l)if(l.hasOwnProperty(R)&&(s=l[R],s!=null))switch(R){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Yt(e,t,R,s,l,null)}return;case"dialog":At("beforetoggle",e),At("toggle",e),At("cancel",e),At("close",e);break;case"iframe":case"object":At("load",e);break;case"video":case"audio":for(s=0;s<ja.length;s++)At(ja[s],e);break;case"image":At("error",e),At("load",e);break;case"details":At("toggle",e);break;case"embed":case"source":case"link":At("error",e),At("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(s=l[K],s!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Yt(e,t,K,s,l,null)}return;default:if(dl(t)){for(ue in l)l.hasOwnProperty(ue)&&(s=l[ue],s!==void 0&&Tc(e,t,ue,s,l,void 0));return}}for(E in l)l.hasOwnProperty(E)&&(s=l[E],s!=null&&Yt(e,t,E,s,l,null))}function Z0(e,t,l,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,C=null,E=null,R=null,K=null,ue=null;for($ in l){var pe=l[$];if(l.hasOwnProperty($)&&pe!=null)switch($){case"checked":break;case"value":break;case"defaultValue":R=pe;default:s.hasOwnProperty($)||Yt(e,t,$,null,s,pe)}}for(var X in s){var $=s[X];if(pe=l[X],s.hasOwnProperty(X)&&($!=null||pe!=null))switch(X){case"type":h=$;break;case"name":f=$;break;case"checked":K=$;break;case"defaultChecked":ue=$;break;case"value":C=$;break;case"defaultValue":E=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(a(137,t));break;default:$!==pe&&Yt(e,t,X,$,s,pe)}}rl(e,C,E,R,K,ue,h,f);return;case"select":$=C=E=X=null;for(h in l)if(R=l[h],l.hasOwnProperty(h)&&R!=null)switch(h){case"value":break;case"multiple":$=R;default:s.hasOwnProperty(h)||Yt(e,t,h,null,s,R)}for(f in s)if(h=s[f],R=l[f],s.hasOwnProperty(f)&&(h!=null||R!=null))switch(f){case"value":X=h;break;case"defaultValue":E=h;break;case"multiple":C=h;default:h!==R&&Yt(e,t,f,h,s,R)}t=E,l=C,s=$,X!=null?ul(e,!!l,X,!1):!!s!=!!l&&(t!=null?ul(e,!!l,t,!0):ul(e,!!l,l?[]:"",!1));return;case"textarea":$=X=null;for(E in l)if(f=l[E],l.hasOwnProperty(E)&&f!=null&&!s.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Yt(e,t,E,null,s,f)}for(C in s)if(f=s[C],h=l[C],s.hasOwnProperty(C)&&(f!=null||h!=null))switch(C){case"value":X=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==h&&Yt(e,t,C,f,s,h)}ds(e,X,$);return;case"option":for(var Xe in l)if(X=l[Xe],l.hasOwnProperty(Xe)&&X!=null&&!s.hasOwnProperty(Xe))switch(Xe){case"selected":e.selected=!1;break;default:Yt(e,t,Xe,null,s,X)}for(R in s)if(X=s[R],$=l[R],s.hasOwnProperty(R)&&X!==$&&(X!=null||$!=null))switch(R){case"selected":e.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Yt(e,t,R,X,s,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in l)X=l[rt],l.hasOwnProperty(rt)&&X!=null&&!s.hasOwnProperty(rt)&&Yt(e,t,rt,null,s,X);for(K in s)if(X=s[K],$=l[K],s.hasOwnProperty(K)&&X!==$&&(X!=null||$!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,t));break;default:Yt(e,t,K,X,s,$)}return;default:if(dl(t)){for(var Jt in l)X=l[Jt],l.hasOwnProperty(Jt)&&X!==void 0&&!s.hasOwnProperty(Jt)&&Tc(e,t,Jt,void 0,s,X);for(ue in s)X=s[ue],$=l[ue],!s.hasOwnProperty(ue)||X===$||X===void 0&&$===void 0||Tc(e,t,ue,X,s,$);return}}for(var G in l)X=l[G],l.hasOwnProperty(G)&&X!=null&&!s.hasOwnProperty(G)&&Yt(e,t,G,null,s,X);for(pe in s)X=s[pe],$=l[pe],!s.hasOwnProperty(pe)||X===$||X==null&&$==null||Yt(e,t,pe,X,s,$)}function lp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Q0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var f=l[s],h=f.transferSize,C=f.initiatorType,E=f.duration;if(h&&E&&lp(C)){for(C=0,E=f.responseEnd,s+=1;s<l.length;s++){var R=l[s],K=R.startTime;if(K>E)break;var ue=R.transferSize,pe=R.initiatorType;ue&&lp(pe)&&(R=R.responseEnd,C+=ue*(R<E?1:(E-K)/(R-K)))}if(--s,t+=8*(h+C)/(f.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ec=null,wc=null;function ur(e){return e.nodeType===9?e:e.ownerDocument}function ip(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ap(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ac(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bc=null;function $0(){var e=window.event;return e&&e.type==="popstate"?e===bc?!1:(bc=e,!0):(bc=null,!1)}var sp=typeof setTimeout=="function"?setTimeout:void 0,ey=typeof clearTimeout=="function"?clearTimeout:void 0,rp=typeof Promise=="function"?Promise:void 0,ty=typeof queueMicrotask=="function"?queueMicrotask:typeof rp<"u"?function(e){return rp.resolve(null).then(e).catch(ny)}:sp;function ny(e){setTimeout(function(){throw e})}function kl(e){return e==="head"}function up(e,t){var l=t,s=0;do{var f=l.nextSibling;if(e.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(f),ta(t);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")Za(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Za(l);for(var h=l.firstChild;h;){var C=h.nextSibling,E=h.nodeName;h[Qe]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&h.rel.toLowerCase()==="stylesheet"||l.removeChild(h),h=C}}else l==="body"&&Za(e.ownerDocument.body);l=f}while(l);ta(t)}function cp(e,t){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?t?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(t?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function _c(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":_c(l),Et(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function oy(e,t,l,s){for(;e.nodeType===1;){var f=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Co(e.nextSibling),e===null)break}return null}function ly(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Co(e.nextSibling),e===null))return null;return e}function dp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Co(e.nextSibling),e===null))return null;return e}function Mc(e){return e.data==="$?"||e.data==="$~"}function Rc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function iy(e,t){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||l.readyState!=="loading")t();else{var s=function(){t(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Co(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Nc=null;function fp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(t===0)return Co(e.nextSibling);t--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||t++}e=e.nextSibling}return null}function hp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(t===0)return e;t--}else l!=="/$"&&l!=="/&"||t++}e=e.previousSibling}return null}function pp(e,t,l){switch(t=ur(l),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Za(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Et(e)}var To=new Map,gp=new Set;function cr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ll=se.d;se.d={f:ay,r:sy,D:ry,C:uy,L:cy,m:dy,X:hy,S:fy,M:py};function ay(){var e=ll.f(),t=tr();return e||t}function sy(e){var t=Qt(e);t!==null&&t.tag===5&&t.type==="form"?If(t):ll.r(e)}var Qi=typeof document>"u"?null:document;function mp(e,t,l){var s=Qi;if(s&&typeof t=="string"&&t){var f=kn(t);f='link[rel="'+e+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),gp.has(f)||(gp.add(f),e={rel:e,crossOrigin:l,href:t},s.querySelector(f)===null&&(t=s.createElement("link"),Fn(t,"link",e),_t(t),s.head.appendChild(t)))}}function ry(e){ll.D(e),mp("dns-prefetch",e,null)}function uy(e,t){ll.C(e,t),mp("preconnect",e,t)}function cy(e,t,l){ll.L(e,t,l);var s=Qi;if(s&&e&&t){var f='link[rel="preload"][as="'+kn(t)+'"]';t==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+kn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+kn(l.imageSizes)+'"]')):f+='[href="'+kn(e)+'"]';var h=f;switch(t){case"style":h=$i(e);break;case"script":h=ea(e)}To.has(h)||(e=x({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),To.set(h,e),s.querySelector(f)!==null||t==="style"&&s.querySelector(Qa(h))||t==="script"&&s.querySelector($a(h))||(t=s.createElement("link"),Fn(t,"link",e),_t(t),s.head.appendChild(t)))}}function dy(e,t){ll.m(e,t);var l=Qi;if(l&&e){var s=t&&typeof t.as=="string"?t.as:"script",f='link[rel="modulepreload"][as="'+kn(s)+'"][href="'+kn(e)+'"]',h=f;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ea(e)}if(!To.has(h)&&(e=x({rel:"modulepreload",href:e},t),To.set(h,e),l.querySelector(f)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($a(h)))return}s=l.createElement("link"),Fn(s,"link",e),_t(s),l.head.appendChild(s)}}}function fy(e,t,l){ll.S(e,t,l);var s=Qi;if(s&&e){var f=vn(s).hoistableStyles,h=$i(e);t=t||"default";var C=f.get(h);if(!C){var E={loading:0,preload:null};if(C=s.querySelector(Qa(h)))E.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},l),(l=To.get(h))&&Dc(e,l);var R=C=s.createElement("link");_t(R),Fn(R,"link",e),R._p=new Promise(function(K,ue){R.onload=K,R.onerror=ue}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,dr(C,t,s)}C={type:"stylesheet",instance:C,count:1,state:E},f.set(h,C)}}}function hy(e,t){ll.X(e,t);var l=Qi;if(l&&e){var s=vn(l).hoistableScripts,f=ea(e),h=s.get(f);h||(h=l.querySelector($a(f)),h||(e=x({src:e,async:!0},t),(t=To.get(f))&&Ic(e,t),h=l.createElement("script"),_t(h),Fn(h,"link",e),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(f,h))}}function py(e,t){ll.M(e,t);var l=Qi;if(l&&e){var s=vn(l).hoistableScripts,f=ea(e),h=s.get(f);h||(h=l.querySelector($a(f)),h||(e=x({src:e,async:!0,type:"module"},t),(t=To.get(f))&&Ic(e,t),h=l.createElement("script"),_t(h),Fn(h,"link",e),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(f,h))}}function yp(e,t,l,s){var f=(f=lt.current)?cr(f):null;if(!f)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=$i(l.href),l=vn(f).hoistableStyles,s=l.get(t),s||(s={type:"style",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=$i(l.href);var h=vn(f).hoistableStyles,C=h.get(e);if(C||(f=f.ownerDocument||f,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,C),(h=f.querySelector(Qa(e)))&&!h._p&&(C.instance=h,C.state.loading=5),To.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},To.set(e,l),h||gy(f,e,l,C.state))),t&&s===null)throw Error(a(528,""));return C}if(t&&s!==null)throw Error(a(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ea(l),l=vn(f).hoistableScripts,s=l.get(t),s||(s={type:"script",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function $i(e){return'href="'+kn(e)+'"'}function Qa(e){return'link[rel="stylesheet"]['+e+"]"}function vp(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function gy(e,t,l,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Fn(t,"link",l),_t(t),e.head.appendChild(t))}function ea(e){return'[src="'+kn(e)+'"]'}function $a(e){return"script[async]"+e}function xp(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+kn(l.href)+'"]');if(s)return t.instance=s,_t(s),s;var f=x({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),_t(s),Fn(s,"style",f),dr(s,l.precedence,e),t.instance=s;case"stylesheet":f=$i(l.href);var h=e.querySelector(Qa(f));if(h)return t.state.loading|=4,t.instance=h,_t(h),h;s=vp(l),(f=To.get(f))&&Dc(s,f),h=(e.ownerDocument||e).createElement("link"),_t(h);var C=h;return C._p=new Promise(function(E,R){C.onload=E,C.onerror=R}),Fn(h,"link",s),t.state.loading|=4,dr(h,l.precedence,e),t.instance=h;case"script":return h=ea(l.src),(f=e.querySelector($a(h)))?(t.instance=f,_t(f),f):(s=l,(f=To.get(h))&&(s=x({},l),Ic(s,f)),e=e.ownerDocument||e,f=e.createElement("script"),_t(f),Fn(f,"link",s),e.head.appendChild(f),t.instance=f);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,dr(s,l.precedence,e));return t.instance}function dr(e,t,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=s.length?s[s.length-1]:null,h=f,C=0;C<s.length;C++){var E=s[C];if(E.dataset.precedence===t)h=E;else if(h!==f)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function Dc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ic(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var fr=null;function Sp(e,t,l){if(fr===null){var s=new Map,f=fr=new Map;f.set(l,s)}else f=fr,s=f.get(l),s||(s=new Map,f.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),f=0;f<l.length;f++){var h=l[f];if(!(h[Qe]||h[Le]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var C=h.getAttribute(t)||"";C=e+C;var E=s.get(C);E?E.push(h):s.set(C,[h])}}return s}function Cp(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function my(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Tp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function yy(e,t,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=$i(s.href),h=t.querySelector(Qa(f));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=hr.bind(e),t.then(e,e)),l.state.loading|=4,l.instance=h,_t(h);return}h=t.ownerDocument||t,s=vp(s),(f=To.get(f))&&Dc(s,f),h=h.createElement("link"),_t(h);var C=h;C._p=new Promise(function(E,R){C.onload=E,C.onerror=R}),Fn(h,"link",s),l.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=hr.bind(e),t.addEventListener("load",l),t.addEventListener("error",l))}}var Uc=0;function vy(e,t){return e.stylesheets&&e.count===0&&gr(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&gr(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Uc===0&&(Uc=62500*Q0());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&gr(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Uc?50:800)+t);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(f)}}:null}function hr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pr=null;function gr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pr=new Map,t.forEach(xy,e),pr=null,hr.call(e))}function xy(e,t){if(!(t.state.loading&4)){var l=pr.get(e);if(l)var s=l.get(null);else{l=new Map,pr.set(e,l);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var C=f[h];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),s=C)}s&&l.set(null,s)}f=t.instance,C=f.getAttribute("data-precedence"),h=l.get(C)||s,h===s&&l.set(null,f),l.set(C,f),this.count++,s=hr.bind(this),f.addEventListener("load",s),f.addEventListener("error",s),h?h.parentNode.insertBefore(f,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),t.state.loading|=4}}var es={$$typeof:H,Provider:null,Consumer:null,_currentValue:Je,_currentValue2:Je,_threadCount:0};function Sy(e,t,l,s,f,h,C,E,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=s,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Ep(e,t,l,s,f,h,C,E,R,K,ue,pe){return e=new Sy(e,t,l,C,R,K,ue,pe,E),t=1,h===!0&&(t|=24),h=io(3,null,null,t),e.current=h,h.stateNode=e,t=fu(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:s,isDehydrated:l,cache:t},mu(h),e}function wp(e){return e?(e=Di,e):Di}function Ap(e,t,l,s,f,h){f=wp(f),s.context===null?s.context=f:s.pendingContext=f,s=El(t),s.payload={element:l},h=h===void 0?null:h,h!==null&&(s.callback=h),l=wl(e,s,t),l!==null&&(eo(l,e,t),Ia(l,e,t))}function bp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function kc(e,t){bp(e,t),(e=e.alternate)&&bp(e,t)}function _p(e){if(e.tag===13||e.tag===31){var t=ei(e,67108864);t!==null&&eo(t,e,67108864),kc(e,67108864)}}function Mp(e){if(e.tag===13||e.tag===31){var t=co();t=Ae(t);var l=ei(e,t);l!==null&&eo(l,e,t),kc(e,t)}}var mr=!0;function Cy(e,t,l,s){var f=N.T;N.T=null;var h=se.p;try{se.p=2,zc(e,t,l,s)}finally{se.p=h,N.T=f}}function Ty(e,t,l,s){var f=N.T;N.T=null;var h=se.p;try{se.p=8,zc(e,t,l,s)}finally{se.p=h,N.T=f}}function zc(e,t,l,s){if(mr){var f=Pc(s);if(f===null)Cc(e,t,s,yr,l),Np(e,s);else if(wy(f,e,t,l,s))s.stopPropagation();else if(Np(e,s),t&4&&-1<Ey.indexOf(e)){for(;f!==null;){var h=Qt(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var C=Me(h.pendingLanes);if(C!==0){var E=h;for(E.pendingLanes|=2,E.entangledLanes|=2;C;){var R=1<<31-Zt(C);E.entanglements[1]|=R,C&=~R}Lo(h),(Lt&6)===0&&($s=ct()+500,Xa(0))}}break;case 31:case 13:E=ei(h,2),E!==null&&eo(E,h,2),tr(),kc(h,2)}if(h=Pc(s),h===null&&Cc(e,t,s,yr,l),h===f)break;f=h}f!==null&&s.stopPropagation()}else Cc(e,t,s,null,l)}}function Pc(e){return e=ha(e),Lc(e)}var yr=null;function Lc(e){if(yr=null,e=jt(e),e!==null){var t=r(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=p(t),e!==null)return e;e=null}else if(l===31){if(e=y(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return yr=e,null}function Rp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rn()){case et:return 2;case St:return 8;case nn:case Dt:return 32;case hn:return 268435456;default:return 32}default:return 32}}var Fc=!1,zl=null,Pl=null,Ll=null,ts=new Map,ns=new Map,Fl=[],Ey="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Np(e,t){switch(e){case"focusin":case"focusout":zl=null;break;case"dragenter":case"dragleave":Pl=null;break;case"mouseover":case"mouseout":Ll=null;break;case"pointerover":case"pointerout":ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ns.delete(t.pointerId)}}function os(e,t,l,s,f,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:l,eventSystemFlags:s,nativeEvent:h,targetContainers:[f]},t!==null&&(t=Qt(t),t!==null&&_p(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,f!==null&&t.indexOf(f)===-1&&t.push(f),e)}function wy(e,t,l,s,f){switch(t){case"focusin":return zl=os(zl,e,t,l,s,f),!0;case"dragenter":return Pl=os(Pl,e,t,l,s,f),!0;case"mouseover":return Ll=os(Ll,e,t,l,s,f),!0;case"pointerover":var h=f.pointerId;return ts.set(h,os(ts.get(h)||null,e,t,l,s,f)),!0;case"gotpointercapture":return h=f.pointerId,ns.set(h,os(ns.get(h)||null,e,t,l,s,f)),!0}return!1}function Dp(e){var t=jt(e.target);if(t!==null){var l=r(t);if(l!==null){if(t=l.tag,t===13){if(t=p(l),t!==null){e.blockedOn=t,ve(e.priority,function(){Mp(l)});return}}else if(t===31){if(t=y(l),t!==null){e.blockedOn=t,ve(e.priority,function(){Mp(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=Pc(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);Si=s,l.target.dispatchEvent(s),Si=null}else return t=Qt(l),t!==null&&_p(t),e.blockedOn=l,!1;t.shift()}return!0}function Ip(e,t,l){vr(e)&&l.delete(t)}function Ay(){Fc=!1,zl!==null&&vr(zl)&&(zl=null),Pl!==null&&vr(Pl)&&(Pl=null),Ll!==null&&vr(Ll)&&(Ll=null),ts.forEach(Ip),ns.forEach(Ip)}function xr(e,t){e.blockedOn===t&&(e.blockedOn=null,Fc||(Fc=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ay)))}var Sr=null;function Up(e){Sr!==e&&(Sr=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Sr===e&&(Sr=null);for(var t=0;t<e.length;t+=3){var l=e[t],s=e[t+1],f=e[t+2];if(typeof s!="function"){if(Lc(s||l)===null)continue;break}var h=Qt(l);h!==null&&(e.splice(t,3),t-=3,Pu(h,{pending:!0,data:f,method:l.method,action:s},s,f))}}))}function ta(e){function t(R){return xr(R,e)}zl!==null&&xr(zl,e),Pl!==null&&xr(Pl,e),Ll!==null&&xr(Ll,e),ts.forEach(t),ns.forEach(t);for(var l=0;l<Fl.length;l++){var s=Fl[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Fl.length&&(l=Fl[0],l.blockedOn===null);)Dp(l),l.blockedOn===null&&Fl.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var f=l[s],h=l[s+1],C=f[Se]||null;if(typeof h=="function")C||Up(l);else if(C){var E=null;if(h&&h.hasAttribute("formAction")){if(f=h,C=h[Se]||null)E=C.formAction;else if(Lc(f)!==null)continue}else E=C.action;typeof E=="function"?l[s+1]=E:(l.splice(s,3),s-=3),Up(l)}}}function kp(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(C){return f=C})},focusReset:"manual",scroll:"manual"})}function t(){f!==null&&(f(),f=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),f!==null&&(f(),f=null)}}}function Hc(e){this._internalRoot=e}Cr.prototype.render=Hc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var l=t.current,s=co();Ap(l,s,e,t,null,null)},Cr.prototype.unmount=Hc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ap(e.current,2,null,e,null,null),tr(),t[Ue]=null}};function Cr(e){this._internalRoot=e}Cr.prototype.unstable_scheduleHydration=function(e){if(e){var t=He();e={blockedOn:null,target:e,priority:t};for(var l=0;l<Fl.length&&t!==0&&t<Fl[l].priority;l++);Fl.splice(l,0,e),l===0&&Dp(e)}};var zp=n.version;if(zp!=="19.2.0")throw Error(a(527,zp,"19.2.0"));se.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=g(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var by={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tr.isDisabled&&Tr.supportsFiber)try{mn=Tr.inject(by),Ft=Tr}catch{}}return is.createRoot=function(e,t){if(!u(e))throw Error(a(299));var l=!1,s="",f=Gf,h=Of,C=Vf;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(f=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(C=t.onRecoverableError)),t=Ep(e,1,!1,null,null,l,s,null,f,h,C,kp),e[Ue]=t.current,Sc(e),new Hc(t)},is.hydrateRoot=function(e,t,l){if(!u(e))throw Error(a(299));var s=!1,f="",h=Gf,C=Of,E=Vf,R=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(h=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.formState!==void 0&&(R=l.formState)),t=Ep(e,1,!0,t,l??null,s,f,R,h,C,E,kp),t.context=wp(null),l=t.current,s=co(),s=Ae(s),f=El(s),f.callback=null,wl(l,f,s),l=s,t.current.lanes=l,V(t,l),Lo(t),e[Ue]=t.current,Sc(e),new Cr(t)},is.version="19.2.0",is}var Yp;function zy(){if(Yp)return Gc.exports;Yp=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Gc.exports=ky(),Gc.exports}var Py=zy();const Ly=rd(Py),Fy={en:"English",it:"Italiano",es:"Espaol"},Cm=A.createContext({language:"en",setLanguage:()=>console.warn("LanguageContext not ready"),t:o=>o}),fo=()=>A.useContext(Cm),Jp={en:{uploadPages:"Upload Pages",addImage:"Add Image",saveProject:"Save Project",loadProject:"Load Project",deleteFile:"Delete {fileName}",uploadPrompt:"Upload your comic pages to get started.",sourceTextLabel:"Source Text (OCR)",sourceTextPlaceholder:"Source text from OCR will appear here.",sourceTextPlaceholderNoSelection:"Select an OCR box to view its text.",displayTextLabel:"Display Text",displayTextPlaceholder:"Text to display in the box. Edit this to change content.",displayTextPlaceholderNoSelection:"Select a Text Box to edit its content.",resize:"Resize",editingTools:"Editing Tools",undo:"Undo (Ctrl+Z)",redo:"Redo (Ctrl+Y)",magicWand:"Magic Wand",tolerance:"Tolerance: {value}",selectionEraserTooltip:"Erase parts of the active selection.",eraserSize:"Eraser Size: {value}px",clearSelection:"Clear Selection",recallSelection:"Recall Selection",inpaint:"Inpaint",inpaintSelection:"Inpaint Selection (Del)",imageEditor:"Image Editor",imageEditorTooltip:"Open the selected image or selection in a dedicated editor.",autoColor:"Auto-Color",manualColor:"Manual Color",addBox:"Add Text",addOcrBox:"Manual Selection",addOcrBoxTooltip:"Manually draw a selection area. Hold Shift to add, Alt to subtract.",splitBox:"Split Box",splitBoxTooltip:"Split the current text box at the cursor position into two boxes.",selectAll:"Select All",deselect:"Deselect",textFormatting:"Text Formatting",saveApplyStyle1:"Save Style 1 (Shift+Click, Shift+F1) / Apply Style 1 (Click, F1)",saveApplyStyle2:"Save Style 2 (Shift+Click, Shift+F2) / Apply Style 2 (Click, F2)",saveApplyStyle3:"Save Style 3 (Shift+Click, Shift+F3) / Apply Style 3 (Click, F3)",textColor:"Text Color",stroke:"Stroke",strokeWidth:"Stroke Width",cycleCase:"Cycle Case (Uppercase/Lowercase)",alignLeft:"Align Left",alignCenter:"Align Center",alignRight:"Align Right",bringForward:"Bring Forward",sendBackward:"Send Backward",lineSpacing:"Line Spacing: {value}",wordSpacing:"Word Spacing: {value}px",paintingTools:"Painting Tools",brush:"Brush",eraser:"Eraser",color:"Color",hardness:"Hardness: {value}%",opacity:"Opacity: {value}%",size:"Size: {value}px",export:"Export",saveCurrentImage:"Save Current Image",saveAllToZip:"Save all pages to a zip file",saveAsPdf:"Save as PDF",saveAsPdfTooltip:"Save all pages as a single PDF file",pickColorFromCanvas:"Pick color from canvas",hexColorCode:"Hex color code",layers:"Layers",emptyTextBox:"[Empty Text Box]",noTextLayers:"No text layers on this page.",settings:"Settings",compareOriginal:"Compare with Original",apiCalls:"API Calls: {count}",apiCallsTooltip:"API calls made today. Resets at midnight.",lastProcessTime:"Last Process: {time}s",lastProcessTimeTooltip:"The duration of the last OCR or Translation process.",translateTo:"Translate to",auto:"Auto",autoTooltip:"Automatically OCR, clean, and translate text from selection or all OCR boxes. (Alt+A)",ocr:"OCR",ocrTooltip:"Create a box from selection and extract text, or extract text from existing OCR boxes. (Alt+O)",translate:"Translate",translateTooltip:"Translate text in all OCR boxes (Alt+T)",saveModalTitle:"Save Current Image",exportAllModalTitle:"Export All Pages as ZIP",exportAsPdfModalTitle:"Export as PDF",exportAction:"Export",format:"Format",quality:"Quality: {quality}",estimatedSize:"(~{size})",download:"Download",apiKeyError:"API Key Error",apiKeyErrorBody1:"The application cannot contact the AI service. Please refer to the API Key section in Preferences for instructions on how to set it up correctly.",close:"Close",projectLoadError:"Error loading project file. It may be corrupt or in an invalid format.",originalImage:"Original Image",apply:"Apply",eyedropper:"Eyedropper",lassoErase:"Lasso Erase",brightness:"Brightness: {value}%",contrast:"Contrast: {value}%",viewOptions:"View Options",showBackground:"Show Background",imageOpacity:"Image Opacity: {value}%",moveImage:"Move Image",imageTransform:"Image Transform",resetTransform:"Reset Transform",transformHelp:"Drag to pan. Scroll to zoom. Shift+Scroll to rotate.",zoom:"Zoom",preferences:"Preferences",profiles:"Profiles",translation:"Translation",defaultTextStyle:"Default Text Style",cleaningInpainting:"Cleaning & Inpainting",layout:"Layout",fontVisibility:"Font Visibility",shortcuts:"Shortcuts",shortcutsHelp:"Here is a list of available keyboard and mouse shortcuts to speed up your workflow.",apiKey:"API Key",manageProfiles:"Manage Profiles",activeProfile:"Active Profile",activeProfileHelp:'Select a profile to view or edit its settings. Changes are saved when you click "Save & Close".',importProfile:"Import Profile",exportProfile:"Export Profile",deleteProfile:"Delete Current Profile",cannotDeleteDefault:"Cannot delete Default profile",createNewProfile:"Create New Profile",createNewProfileHelp:"Creates a new profile based on the settings of the currently selected profile above.",newProfileNamePlaceholder:"New profile name...",saveAsNewProfile:"Save as New Profile",translationSettings:"Translation Settings",defaultTargetLanguage:"Default Target Language",interfaceLanguage:"Interface Language",defaultToUppercase:"Default to Uppercase",inpaintingHelp:"Configure the default behavior for cleaning selected areas.",defaultAutoColor:"Default to Auto-Color Mode",defaultManualColor:"Default Manual Color",defaultLayout:"Default Layout",layoutHelp:"These settings control the default dimensions of UI panels at startup. Changes are applied per-profile.",panelWidths:"Panel Widths (%)",leftPanel:"Left (Files)",centerPanel:"Center (Canvas)",rightPanel:"Right (Tools)",textAreaHeights:"Tools Panel Text Area Heights (px)",sourceTextArea:"Source Text",displayTextArea:"Display Text",resetLayout:"Reset Layout to Application Defaults",fontVisibilityHelp:"Select which fonts should appear in the Text Formatting panel. This helps to keep the font list clean and relevant to your workflow.",selectAllFonts:"Select All",deselectAllFonts:"Deselect All",apiKeyHelp1:"For security reasons, the Google Gemini API key cannot be set directly within the application.",apiKeyHelp2:"It must be configured as an environment variable. If you are running this project locally, please create a file named",apiKeyHelp3:"in the root directory of the application and add the following line:",apiKeyHelp4:"Replace",apiKeyHelp5:"with your actual API key from Google AI Studio. The application will automatically use this key for all AI operations.",saveAndClose:"Save & Close",cancel:"Cancel",systemFontsSectionTitle:"System Fonts",loadSystemFontsHelp:"Load fonts installed on your computer. Your browser will ask for permission.",loadSystemFonts:"Load System Fonts",fontApiNotSupportedFallback:"Your browser doesn't support automatic system font detection. You can load font files (.ttf, .otf, .woff) manually.",loadFontFiles:"Load Font Files",loading:"Loading...",systemFontsLoaded:"{count} system fonts loaded.",systemFontsPermissionDenied:"Permission denied or an error occurred.",fontsLoaded:"{count} fonts loaded.",fontsFailed:"{count} failed to load.",clearStoredFonts:"Clear Stored Fonts",clearStoredFontsConfirmation:"Are you sure you want to delete all manually loaded fonts from your browser's storage? This action cannot be undone.",fontsCleared:"All stored fonts have been cleared. The page will now reload to apply the changes.",panCanvas:"Pan the canvas",zoomCanvas:"Zoom",addOrRemoveBoxSelection:"Add/Remove box from selection",nudgeSelectedBox:"Nudge selected box",nudgeSelectedBoxLarge:"Nudge with larger steps",deleteOrInpaint:"Delete or Inpaint",deselectClearSelection:"Deselect / clear selection",undoRedo:"Undo / Redo",runAuto:"Run Auto",runOcr:"Run OCR",runTranslate:"Run Translate",saveStyle1:"Save Style 1",saveStyle2:"Save Style 2",saveStyle3:"Save Stile 3",applyStyle1:"Apply Style 1",applyStyle2:"Apply Style 2",applyStyle3:"Apply Stile 3",removePaintStrokes:"Remove all paint/eraser strokes",zoomTo100:"Zoom to 100%",toggleBrushTool:"Toggle Brush Tool",setBrushRed:"Set Brush Color to Red (while active)",setBrushWhite:"Set Brush Color to White (while active)",shortcutCtrlDrag:"Ctrl + Drag",shortcutMouseWheel:"Mouse Wheel",shortcutShiftClick:"Shift + Click",shortcutArrowKeys:"Arrow Keys",shortcutShiftArrowKeys:"Shift + Arrow Keys",shortcutDelBackspace:"Del / Backspace",shortcutEsc:"Esc / \\",shortcutCtrlZCtrlY:"Ctrl + Z / Ctrl + Y",shortcutAltA:"Alt + A",shortcutAltO:"Alt + O",shortcutAltT:"Alt + T",shortcutShiftF1:"Shift + F1",shortcutShiftF2:"Shift + F2",shortcutShiftF3:"Shift + F3",shortcutF1:"F1",shortcutF2:"F2",shortcutF3:"F3",shortcutShiftCtrlX:"Shift + Ctrl + X",shortcutCtrl1:"Ctrl + 1",shortcutAltB:"Alt + B",shortcutAltR:"Alt + R",shortcutAltW:"Alt + W",English:"English",Spanish:"Spanish",French:"French",German:"German",Italian:"Italian",Portuguese:"Portuguese",Japanese:"Japanese",Korean:"Korean","Chinese (Simplified)":"Chinese (Simplified)",Russian:"Russian",Arabic:"Arabic"},it:{uploadPages:"Carica Pagine",addImage:"Aggiungi Immagine",saveProject:"Salva Progetto",loadProject:"Carica Progetto",deleteFile:"Elimina {fileName}",uploadPrompt:"Carica le pagine del tuo fumetto per iniziare.",sourceTextLabel:"Testo Sorgente (OCR)",sourceTextPlaceholder:"Il testo sorgente dall\\'OCR apparir qui.",sourceTextPlaceholderNoSelection:"Seleziona un box OCR per vedere il testo.",displayTextLabel:"Testo di Visualizzazione",displayTextPlaceholder:"Testo da visualizzare nel box. Modificalo per cambiare il contenuto.",displayTextPlaceholderNoSelection:"Seleziona un Box di Testo per modificarne il contenuto.",resize:"Ridimensiona",editingTools:"Strumenti di Modifica",undo:"Annulla (Ctrl+Z)",redo:"Ripristina (Ctrl+Y)",magicWand:"Bacchetta Magica",tolerance:"Tolleranza: {value}",selectionEraserTooltip:"Cancella parti della selezione attiva.",eraserSize:"Dimensione Gomma: {value}px",clearSelection:"Cancella Selezione",recallSelection:"Richiama Selezione",inpaint:"Riempi",inpaintSelection:"Riempi Selezione (Canc)",imageEditor:"Editor Immagine",imageEditorTooltip:"Apri l\\'immagine o la selezione scelta in un editor dedicato.",autoColor:"Colore Automatico",manualColor:"Colore Manuale",addBox:"Aggiungi Testo",addOcrBox:"Selezione Manuale",addOcrBoxTooltip:"Disegna un\\'area di selezione manuale. Tieni premuto Shift per aggiungere, Alt per sottrarre.",splitBox:"Dividi Box",splitBoxTooltip:"Divide il box di testo corrente in due nel punto in cui si trova il cursore.",selectAll:"Seleziona Tutto",deselect:"Deseleziona",textFormatting:"Formattazione Testo",saveApplyStyle1:"Salva Stile 1 (Maiusc+Click, Maiusc+F1) / Applica Stile 1 (Click, F1)",saveApplyStyle2:"Salva Stile 2 (Maiusc+Click, Maiusc+F2) / Applica Stile 2 (Click, F2)",saveApplyStyle3:"Salva Stile 3 (Maiusc+Click, Maiusc+F3) / Applica Stile 3 (Click, F3)",textColor:"Colore Testo",stroke:"Traccia",strokeWidth:"Larghezza Traccia",cycleCase:"Alterna Maiuscole/Minuscole",alignLeft:"Allinea a Sinistra",alignCenter:"Allinea al Centro",alignRight:"Allinea a Destra",bringForward:"Porta Avanti",sendBackward:"Porta Indietro",lineSpacing:"Interlinea: {value}",wordSpacing:"Spaziatura Parole: {value}px",paintingTools:"Strumenti di Disegno",brush:"Pennello",eraser:"Gomma",color:"Colore",hardness:"Durezza: {value}%",opacity:"Opacit: {value}%",size:"Dimensione: {value}px",export:"Esporta",saveCurrentImage:"Salva Immagine Corrente",saveAllToZip:"Salva tutte le pagine in un file zip",saveAsPdf:"Salva in PDF",saveAsPdfTooltip:"Salva tutte le pagine in un unico file PDF",pickColorFromCanvas:"Scegli colore dal canvas",hexColorCode:"Codice colore esadecimale",layers:"Livelli",emptyTextBox:"[Box di Testo Vuoto]",noTextLayers:"Nessun livello di testo in questa pagina.",settings:"Impostazioni",compareOriginal:"Confronta con Originale",apiCalls:"Chiamate API: {count}",apiCallsTooltip:"Chiamate API effettuate oggi. Si azzera a mezzanotte.",lastProcessTime:"Ultimo Processo: {time}s",lastProcessTimeTooltip:"La durata dell\\'ultimo processo di OCR o Traduzione.",translateTo:"Traduci in",auto:"Auto",autoTooltip:"Esegui OCR, pulisci e traduci automaticamente il testo dalla selezione o da tutti i box OCR. (Alt+A)",ocr:"OCR",ocrTooltip:"Crea un riquadro dalla selezione ed estrae il testo, oppure estrae il testo dai riquadri OCR esistenti. (Alt+O)",translate:"Traduci",translateTooltip:"Traduci il testo in tutti i box OCR (Alt+T)",saveModalTitle:"Salva Immagine Corrente",exportAllModalTitle:"Esporta Tutte le Pagine come ZIP",exportAsPdfModalTitle:"Esporta come PDF",exportAction:"Esporta",format:"Formato",quality:"Qualit: {quality}",estimatedSize:"(~{size})",download:"Scarica",apiKeyError:"Errore Chiave API",apiKeyErrorBody1:"L\\'applicazione non pu contattare il servizio AI. Consulta la sezione Chiave API nelle Preferenze per istruzioni su come configurarla correttamente.",close:"Chiudi",projectLoadError:"Errore nel caricamento del file di progetto. Potrebbe essere corrotto o in un formato non valido.",originalImage:"Immagine Originale",apply:"Applica",eyedropper:"Contagocce",lassoErase:"Lazo Cancella",brightness:"Luminosit: {value}%",contrast:"Contrasto: {value}%",viewOptions:"Opzioni Vista",showBackground:"Mostra Sfondo",imageOpacity:"Opacit Immagine: {value}%",moveImage:"Sposta Immagine",imageTransform:"Trasformazione Immagine",resetTransform:"Resetta Trasformazione",transformHelp:"Trascina per spostare. Rotella per zoom. Maiusc+Rotella per ruotare.",zoom:"Zoom",preferences:"Preferenze",profiles:"Profili",translation:"Traduzione",defaultTextStyle:"Stile Testo Predefinito",cleaningInpainting:"Pulizia e Inpainting",layout:"Layout",fontVisibility:"Visibilit Caratteri",shortcuts:"Scorciatoie",shortcutsHelp:"Ecco un elenco delle scorciatoie da tastiera e mouse disponibili per accelerare il tuo flusso di lavoro.",apiKey:"Chiave API",manageProfiles:"Gestisci Profili",activeProfile:"Profilo Attivo",activeProfileHelp:'Seleziona un profilo per visualizzare o modificare le sue impostazioni. Le modifiche vengono salvate cliccando "Salva & Chiudi".',importProfile:"Importa Profilo",exportProfile:"Esporta Profilo",deleteProfile:"Elimina Profilo Corrente",cannotDeleteDefault:"Impossibile eliminare il profilo Predefinito",createNewProfile:"Crea Nuovo Profilo",createNewProfileHelp:"Crea un nuovo profilo basato sulle impostazioni del profilo attualmente selezionato.",newProfileNamePlaceholder:"Nome nuovo profilo...",saveAsNewProfile:"Salva come Nuovo Profilo",translationSettings:"Impostazioni di Traduzione",defaultTargetLanguage:"Lingua di Destinazione Predefinita",interfaceLanguage:"Lingua Interfaccia",defaultToUppercase:"Predefinito a Maiuscole",inpaintingHelp:"Configura il comportamento predefinito per la pulizia delle aree selezionate.",defaultAutoColor:"Modalit Colore-Auto Predefinita",defaultManualColor:"Colore Manuale Predefinito",defaultLayout:"Layout Predefinito",layoutHelp:"Queste impostazioni controllano le dimensioni predefinite dei pannelli UI all\\'avvio. Le modifiche vengono applicate per profilo.",panelWidths:"Larghezza Pannelli (%)",leftPanel:"Sinistra (File)",centerPanel:"Centro (Canvas)",rightPanel:"Destra (Strumenti)",textAreaHeights:"Altezza Aree di Testo (px)",sourceTextArea:"Testo Sorgente",displayTextArea:"Testo di Visualizzazione",resetLayout:"Ripristina Layout Predefinito dell\\'Applicazione",fontVisibilityHelp:"Seleziona quali caratteri devono apparire nel pannello di Formattazione Testo. Questo aiuta a mantenere l\\'elenco dei caratteri pulito e pertinente al tuo flusso di lavoro.",selectAllFonts:"Seleziona Tutto",deselectAllFonts:"Deseleziona Tutto",apiKeyHelp1:"Per motivi di sicurezza, la chiave API di Google Gemini non pu essere impostata direttamente nell\\'applicazione.",apiKeyHelp2:"Deve essere configurata come variabile d\\'ambiente. Se stai eseguendo questo progetto in locale, crea un file chiamato",apiKeyHelp3:"nella directory principale dell\\'applicazione e aggiungi la seguente riga:",apiKeyHelp4:"Sostituisci",apiKeyHelp5:"con la tua chiave API effettiva da Google AI Studio. L\\'applicazione utilizzer automaticamente questa chiave per tutte le operazioni AI.",saveAndClose:"Salva & Chiudi",cancel:"Annulla",systemFontsSectionTitle:"Caratteri di Sistema",loadSystemFontsHelp:"Carica i caratteri installati sul tuo computer. Il browser chieder il permesso.",loadSystemFonts:"Carica Caratteri di Sistema",fontApiNotSupportedFallback:"Il tuo browser non supporta il rilevamento automatico dei caratteri di sistema. Puoi caricare manualmente i file dei caratteri (.ttf, .otf, .woff).",loadFontFiles:"Carica File Carattere",loading:"Caricamento...",systemFontsLoaded:"{count} caratteri di sistema caricati.",systemFontsPermissionDenied:"Permesso negato o si  verificato un errore.",fontsLoaded:"{count} caratteri caricati.",fontsFailed:"{count} non sono riusciti a caricare.",clearStoredFonts:"Cancella Font Archiviati",clearStoredFontsConfirmation:"Sei sicuro di voler eliminare tutti i caratteri caricati manualmente dalla memoria del tuo browser? Questa azione non pu essere annullata.",fontsCleared:"Tutti i caratteri memorizzati sono stati cancellati. La pagina verr ora ricaricata per applicare le modifiche.",panCanvas:"Sposta la tela",zoomCanvas:"Zoom",addOrRemoveBoxSelection:"Aggiungi/Rimuovi box dalla selezione",nudgeSelectedBox:"Sposta il box selezionato",nudgeSelectedBoxLarge:"Sposta con passi pi grandi",deleteOrInpaint:"Elimina o Riempi",deselectClearSelection:"Deseleziona / cancella selezione",undoRedo:"Annulla / Ripristina",runAuto:"Esegui Auto",runOcr:"Esegui OCR",runTranslate:"Esegui Traduzione",saveStyle1:"Salva Stile 1",saveStyle2:"Salva Stile 2",saveStyle3:"Salva Stile 3",applyStyle1:"Applica Stile 1",applyStyle2:"Applica Stile 2",applyStyle3:"Applica Stile 3",removePaintStrokes:"Rimuovi tutti i tratti di pennello/gomma",zoomTo100:"Zoom al 100%",toggleBrushTool:"Attiva/Disattiva Pennello",setBrushRed:"Imposta Pennello su Rosso (se attivo)",setBrushWhite:"Imposta Pennello su Bianco (se attivo)",shortcutCtrlDrag:"Ctrl + Trascina",shortcutMouseWheel:"Rotella Mouse",shortcutShiftClick:"Shift + Click",shortcutArrowKeys:"Tasti Freccia",shortcutShiftArrowKeys:"Shift + Tasti Freccia",shortcutDelBackspace:"Canc / Backspace",shortcutEsc:"Esc / \\",shortcutCtrlZCtrlY:"Ctrl + Z / Ctrl + Y",shortcutAltA:"Alt + A",shortcutAltO:"Alt + O",shortcutAltT:"Alt + T",shortcutShiftF1:"Shift + F1",shortcutShiftF2:"Shift + F2",shortcutShiftF3:"Shift + F3",shortcutF1:"F1",shortcutF2:"F2",shortcutF3:"F3",shortcutShiftCtrlX:"Maiusc + Ctrl + X",shortcutCtrl1:"Ctrl + 1",shortcutAltB:"Alt + B",shortcutAltR:"Alt + R",shortcutAltW:"Alt + W",English:"Inglese",Spanish:"Spagnolo",French:"Francese",German:"Tedesco",Italian:"Italiano",Portuguese:"Portoghese",Japanese:"Giapponese",Korean:"Coreano","Chinese (Simplified)":"Cinese (Semplificato)",Russian:"Russo",Arabic:"Arabo"},es:{uploadPages:"Subir Pginas",addImage:"Aadir Imagen",saveProject:"Guardar Proyecto",loadProject:"Cargar Proyecto",deleteFile:"Eliminar {fileName}",uploadPrompt:"Sube las pginas de tu cmic para empezar.",sourceTextLabel:"Texto Fuente (OCR)",sourceTextPlaceholder:"El texto fuente del OCR aparecer aqu.",sourceTextPlaceholderNoSelection:"Selecciona un cuadro de OCR para ver su texto.",displayTextLabel:"Texto a Mostrar",displayTextPlaceholder:"Texto para mostrar en el cuadro. Edtalo para cambiar el contenido.",displayTextPlaceholderNoSelection:"Selecciona un Cuadro de Texto para editar su contenido.",resize:"Redimensionar",editingTools:"Herramientas de Edicin",undo:"Deshacer (Ctrl+Z)",redo:"Rehacer (Ctrl+Y)",magicWand:"Varita Mgica",tolerance:"Tolerancia: {value}",selectionEraserTooltip:"Borra partes de la seleccin activa.",eraserSize:"Tamao de Goma: {value}px",clearSelection:"Limpiar Seleccin",recallSelection:"Recuperar Seleccin",inpaint:"Rellenar",inpaintSelection:"Rellenar Seleccin (Supr)",imageEditor:"Editor de Imagen",imageEditorTooltip:"Abre la imagen o seleccin elegida en un editor dedicado.",autoColor:"Color Automtico",manualColor:"Color Manual",addBox:"Aadir Texto",addOcrBox:"Seleccin Manual",addOcrBoxTooltip:"Dibuja un rea de seleccin manual. Mantn Shift para aadir, Alt para sustraer.",splitBox:"Dividir Caja",splitBoxTooltip:"Divide el cuadro de texto actual en dos en la posicin del cursor.",selectAll:"Seleccionar Todo",deselect:"Deseleccionar",textFormatting:"Formato de Texto",saveApplyStyle1:"Guardar Estilo 1 (Mays+Clic, Mays+F1) / Aplicar Estilo 1 (Clic, F1)",saveApplyStyle2:"Guardar Estilo 2 (Mays+Clic, Mays+F2) / Aplicar Estilo 2 (Clic, F2)",saveApplyStyle3:"Guardar Estilo 3 (Mays+Clic, Mays+F3) / Aplicar Estilo 3 (Clic, F3)",textColor:"Color del Texto",stroke:"Contorno",strokeWidth:"Ancho del Contorno",cycleCase:"Alternar Maysculas/Minsculas",alignLeft:"Alinear a la Izquierda",alignCenter:"Alinear al Centro",alignRight:"Alinear a la Derecha",bringForward:"Traer Adelante",sendBackward:"Enviar Atrs",lineSpacing:"Interlineado: {value}",wordSpacing:"Espaciado entre Palabras: {value}px",paintingTools:"Herramientas de Pintura",brush:"Pincel",eraser:"Goma",color:"Color",hardness:"Dureza: {value}%",opacity:"Opacidad: {value}%",size:"Tamao: {value}px",export:"Exportar",saveCurrentImage:"Guardar Imagen Actual",saveAllToZip:"Guardar todas las pginas en un archivo zip",saveAsPdf:"Guardar como PDF",saveAsPdfTooltip:"Guardar todas las pginas como un nico archivo PDF",pickColorFromCanvas:"Elegir color del lienzo",hexColorCode:"Cdigo de color hexadecimal",layers:"Capas",emptyTextBox:"[Cuadro de Texto Vaco]",noTextLayers:"No hay capas de texto en esta pgina.",settings:"Configuracin",compareOriginal:"Comparar con Original",apiCalls:"Llamadas API: {count}",apiCallsTooltip:"Llamadas a la API realizadas hoy. Se reinicia a medianoche.",lastProcessTime:"ltimo Proceso: {time}s",lastProcessTimeTooltip:"La duracin del ltimo proceso de OCR o Traduccin.",translateTo:"Traducir a",auto:"Auto",autoTooltip:"Ejecuta OCR, limpia y traduce automticamente el texto de la seleccin o de todos los cuadros de OCR. (Alt+A)",ocr:"OCR",ocrTooltip:"Crea un cuadro a partir de la seleccin y extrae el texto, o extrae el texto de los cuadros de OCR existentes. (Alt+O)",translate:"Traducir",translateTooltip:"Traduce el texto en todos los cuadros de OCR (Alt+T)",saveModalTitle:"Guardar Imagen Actual",exportAllModalTitle:"Exportar Todas las Pginas como ZIP",exportAsPdfModalTitle:"Exportar como PDF",exportAction:"Exportar",format:"Formato",quality:"Calidad: {quality}",estimatedSize:"(~{size})",download:"Descargar",apiKeyError:"Error de Clave API",apiKeyErrorBody1:"La aplicacin no puede contactar con el servicio de IA. Consulta la seccin de Clave API en Preferencias para obtener instrucciones sobre cmo configurarla correctamente.",close:"Cerrar",projectLoadError:"Error al cargar el archivo de proyecto. Puede estar corrupto o en un formato no vlido.",originalImage:"Imagen Original",apply:"Aplicar",eyedropper:"Cuentagotas",lassoErase:"Lazo de Borrado",brightness:"Brillo: {value}%",contrast:"Contraste: {value}%",viewOptions:"Opciones de Vista",showBackground:"Mostrar Fondo",imageOpacity:"Opacidad de Imagen: {value}%",moveImage:"Mover Imagen",imageTransform:"Transformacin de Imagen",resetTransform:"Restablecer Transformacin",transformHelp:"Arrastra para mover. Rueda para zoom. Mays+Rueda para rotar.",zoom:"Zoom",preferences:"Preferencias",profiles:"Perfiles",translation:"Traduccin",defaultTextStyle:"Estilo de Texto Predeterminado",cleaningInpainting:"Limpieza y Relleno",layout:"Diseo",fontVisibility:"Visibilidad de Fuentes",shortcuts:"Atajos",shortcutsHelp:"Aqu hay una lista de los atajos de teclado y ratn disponibles para acelerar tu flujo de trabajo.",apiKey:"Clave API",manageProfiles:"Gestionar Perfiles",activeProfile:"Perfil Activo",activeProfileHelp:'Selecciona un perfil para ver o editar su configuracin. Los cambios se guardan al hacer clic en "Guardar y Cerrar".',importProfile:"Importar Perfil",exportProfile:"Exportar Perfil",deleteProfile:"Eliminar Perfil Actual",cannotDeleteDefault:"No se puede eliminar el perfil Predeterminado",createNewProfile:"Crear Nuevo Perfil",createNewProfileHelp:"Crea un nuevo perfil basado en la configuracin del perfil actualmente seleccionado.",newProfileNamePlaceholder:"Nombre del nuevo perfil...",saveAsNewProfile:"Guardar como Nuevo Perfil",translationSettings:"Configuracin de Traduccin",defaultTargetLanguage:"Idioma de Destino Predeterminado",interfaceLanguage:"Idioma de la Interfaz",defaultToUppercase:"Predeterminado a Maysculas",inpaintingHelp:"Configura el comportamiento predeterminado para limpiar las reas seleccionadas.",defaultAutoColor:"Modo de Color Automtico Predeterminado",defaultManualColor:"Color Manual Predeterminado",defaultLayout:"Diseo Predeterminado",layoutHelp:"Estos ajustes controlan las dimensiones predeterminadas de los paneles de la interfaz al inicio. Los cambios se aplican por perfil.",panelWidths:"Ancho de Paneles (%)",leftPanel:"Izquierda (Archivos)",centerPanel:"Centro (Lienzo)",rightPanel:"Derecha (Herramientas)",textAreaHeights:"Altura de reas de Texto (px)",sourceTextArea:"Texto Fuente",displayTextArea:"Texto a Mostrar",resetLayout:"Restablecer Diseo a los Valores Predeterminados de la Aplicacin",fontVisibilityHelp:"Selecciona qu fuentes deben aparecer en el panel de Formato de Texto. Esto ayuda a mantener la lista de fuentes limpia y relevante para tu flujo de trabajo.",selectAllFonts:"Seleccionar Todo",deselectAllFonts:"Deseleccionar Todo",apiKeyHelp1:"Por razones de seguridad, la clave API de Google Gemini no se puede establecer directamente en la aplicacin.",apiKeyHelp2:"Debe configurarse como una variable de entorno. Si ests ejecutando este proyecto localmente, por favor crea un archivo llamado",apiKeyHelp3:"en el directorio raz de la aplicacin y aade la siguiente lnea:",apiKeyHelp4:"Reemplaza",apiKeyHelp5:"con tu clave API real de Google AI Studio. La aplicacin utilizar automticamente esta clave para todas las operaciones de IA.",saveAndClose:"Guardar y Cerrar",cancel:"Cancelar",systemFontsSectionTitle:"Fuentes del Sistema",loadSystemFontsHelp:"Carga las fuentes instaladas en tu ordenador. Tu navegador pedir permiso.",loadSystemFonts:"Cargar Fuentes del Sistema",fontApiNotSupportedFallback:"Tu navegador no admite la deteccin automtica de fuentes del sistema. Puedes cargar archivos de fuentes (.ttf, .otf, .woff) manualmente.",loadFontFiles:"Cargar Archivos de Fuente",loading:"Cargando...",systemFontsLoaded:"{count} fuentes del sistema cargadas.",systemFontsPermissionDenied:"Permiso denegado o ha ocurrido un error.",fontsLoaded:"{count} fuentes cargadas.",fontsFailed:"{count} no se pudieron cargar.",clearStoredFonts:"Limpiar Fuentes Almacenadas",clearStoredFontsConfirmation:"Ests seguro de que quieres eliminar todas las fuentes cargadas manualmente del almacenamiento de tu navegador? Esta accin no se puede deshacer.",fontsCleared:"Todas las fuentes almacenadas han sido eliminadas. La pgina se recargar para aplicar los cambios.",panCanvas:"Mover el lienzo",zoomCanvas:"Zoom",addOrRemoveBoxSelection:"Aadir/Quitar cuadro de la seleccin",nudgeSelectedBox:"Mover cuadro seleccionado",nudgeSelectedBoxLarge:"Mover con pasos ms grandes",deleteOrInpaint:"Eliminar o Rellenar",deselectClearSelection:"Deseleccionar / limpiar seleccin",undoRedo:"Deshacer / Rehacer",runAuto:"Ejecutar Auto",runOcr:"Ejecutar OCR",runTranslate:"Ejecutar Traduccin",saveStyle1:"Guardar Estilo 1",saveStyle2:"Guardar Estilo 2",saveStyle3:"Guardar Estilo 3",applyStyle1:"Aplicar Estilo 1",applyStyle2:"Aplicar Estilo 2",applyStyle3:"Aplicar Estilo 3",removePaintStrokes:"Eliminar todos los trazos de pincel/goma",zoomTo100:"Zoom al 100%",toggleBrushTool:"Activar/Desactivar Pincel",setBrushRed:"Establecer Pincel a Rojo (si est activo)",setBrushWhite:"Establecer Pincel a Blanco (si est activo)",shortcutCtrlDrag:"Ctrl + Arrastrar",shortcutMouseWheel:"Rueda del Ratn",shortcutShiftClick:"Mays + Clic",shortcutArrowKeys:"Teclas de Flecha",shortcutShiftArrowKeys:"Mays + Teclas de Flecha",shortcutDelBackspace:"Supr / Retroceso",shortcutEsc:"Esc / \\",shortcutCtrlZCtrlY:"Ctrl + Z / Ctrl + Y",shortcutAltA:"Alt + A",shortcutAltO:"Alt + O",shortcutAltT:"Alt + T",shortcutShiftF1:"Mays + F1",shortcutShiftF2:"Mays + F2",shortcutShiftF3:"Mays + F3",shortcutF1:"F1",shortcutF2:"F2",shortcutF3:"F3",shortcutShiftCtrlX:"Mays + Ctrl + X",shortcutCtrl1:"Ctrl + 1",shortcutAltB:"Alt + B",shortcutAltR:"Alt + R",shortcutAltW:"Alt + W",English:"Ingls",Spanish:"Espaol",French:"Francs",German:"Alemn",Italian:"Italiano",Portuguese:"Portugus",Japanese:"Japons",Korean:"Coreano","Chinese (Simplified)":"Chino (Simplificado)",Russian:"Ruso",Arabic:"rabe"}},Hy=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),By=({files:o,selectedFile:n,onFilesChange:i,onFileSelect:a,onFileDelete:u,onSaveProject:r,onLoadProject:p,onAddImage:y})=>{const v=wo.useRef(null),g=wo.useRef(null),S=wo.useRef(null),{t:x}=fo(),T=P=>{P.target.files&&i(P.target.files)},b=P=>{P.target.files&&P.target.files.length>0&&(y(P.target.files[0]),P.target&&(P.target.value=""))},I=()=>{var P;(P=v.current)==null||P.click()},z=()=>{var P;(P=S.current)==null||P.click()},q=()=>{var P;(P=g.current)==null||P.click()},F=P=>{P.target.files&&(p(P.target.files),P.target&&(P.target.value=""))};return m.jsxs("div",{className:"h-full bg-gray-800 p-4 flex flex-col overflow-hidden",children:[m.jsx("input",{type:"file",multiple:!0,accept:"image/png, image/jpeg, image/webp",ref:v,onChange:T,className:"hidden"}),m.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/webp",ref:S,onChange:b,className:"hidden"}),m.jsx("input",{type:"file",accept:".zip",ref:g,onChange:F,className:"hidden"}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-shrink-0",children:[m.jsx("button",{onClick:I,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200",children:x("uploadPages")}),m.jsx("button",{onClick:z,disabled:!n,className:"w-full bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 disabled:bg-gray-600 disabled:cursor-not-allowed",children:x("addImage")})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 mb-4 flex-shrink-0",children:[m.jsx("button",{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-3 rounded-lg transition-colors duration-200 text-sm",children:x("saveProject")}),m.jsx("button",{onClick:q,className:"w-full bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-3 rounded-lg transition-colors duration-200 text-sm",children:x("loadProject")})]}),m.jsx("div",{className:"flex-grow space-y-2 overflow-y-auto",children:o.length>0?o.map(({file:P,url:H})=>m.jsxs("div",{onClick:()=>a(P),className:`relative group flex items-center p-2 rounded-lg cursor-pointer transition-colors duration-200 ${(n==null?void 0:n.name)===P.name?"bg-indigo-700":"hover:bg-gray-700"}`,children:[m.jsx("img",{src:H,alt:P.name,className:"w-16 h-16 object-cover rounded-md mr-3"}),m.jsx("span",{className:"text-sm font-medium truncate",children:P.name}),m.jsx("button",{onClick:ee=>{ee.stopPropagation(),u(P)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-gray-800 bg-opacity-50 text-gray-300 hover:bg-red-600 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity focus:opacity-100","aria-label":x("deleteFile",{fileName:P.name}),title:x("deleteFile",{fileName:P.name}),children:m.jsx(Hy,{})})]},P.name)):m.jsx("div",{className:"text-center text-gray-400 mt-8",children:m.jsx("p",{children:x("uploadPrompt")})})})]})};function qy(o){return o?o.replace(/<sup>/g,'<style isSuperscript="true">').replace(/<\/sup>/g,"</style>").replace(/<color value="([^"]+)">/g,'<style color="$1">').replace(/<\/color>/g,"</style>"):""}function Gy(o,n,i=1){const a=qy(o),u=[],r=/(<style [^>]*>|<\/style>|[^<>]+)/g,p=a.match(r)||[],y={...n};y.fontSize=(y.fontSize??0)*i,y.strokeWidth=(y.strokeWidth??0)*i,y.wordSpacing=(y.wordSpacing??0)*i;const v=[y],g=/(\w+)="([^"]+)"/g;for(const S of p)if(S.startsWith("<style")){const x={...v[v.length-1]};let T;for(;(T=g.exec(S))!==null;){const b=T[1];let I=T[2];b==="fontSize"||b==="strokeWidth"||b==="wordSpacing"?I=parseFloat(I)*i:b==="lineHeight"?I=parseFloat(I):b==="isSuperscript"&&(I=I==="true"),x[b]=I}v.push(x)}else S==="</style>"?v.length>1&&v.pop():S.length>0&&u.push({text:S,style:v[v.length-1]});return u.length===0&&o?[{text:o,style:y}]:u}const Tm=(o,n,i,a,u,r,p=1)=>{if(!n.translatedText||!n.fontSize||n.fontSize<4)return;const y={fontFamily:n.fontFamily,fontSize:n.fontSize,textAlign:n.textAlign,fontWeight:n.fontWeight,fontStyle:n.fontStyle,lineHeight:n.lineHeight,wordSpacing:n.wordSpacing,color:n.color,strokeColor:n.strokeColor,strokeWidth:n.strokeWidth},v=Gy(n.translatedText,y,p),g=[];v.forEach(ye=>{const{style:ie}=ye,ge=ie.isSuperscript?(ie.fontSize||0)*.6:ie.fontSize||0,me=ie.wordSpacing??y.wordSpacing??0;o.font=`${ie.fontStyle} ${ie.fontWeight} ${ge}px ${ie.fontFamily}`,ye.text.split(/(\s+|\n)/).forEach(De=>{if(De){let Z=o.measureText(De).width;De.trim()===""&&De!==`
`&&(Z+=me),g.push({text:De,style:ie,width:Z})}})});const S=(n.fontSize||0)*.2*p,x=u-S*2;if(x<=0)return;const T=[];let b=[],I=0;g.forEach(ye=>{if(ye.text===`
`){T.push(b),b=[],I=0;return}b.length===0&&ye.text.trim()===""||(I+ye.width>x&&b.length>0?(T.push(b),b=ye.text.trim()===""?[]:[ye],I=b.length>0?ye.width:0):(b.push(ye),I+=ye.width))}),b.length>0&&T.push(b);const z=i+u/2,q=a+r/2;o.save(),o.translate(z,q),o.rotate(n.rotation*Math.PI/180),o.beginPath(),o.rect(-u/2,-r/2,u,r),o.clip();const F=(n.fontSize||0)*(n.lineHeight||1.2)*p,P=T.length*F;let H=0;const ee=(n.fontSize||0)*p;if(o.font=`${n.fontWeight} ${ee}px ${n.fontFamily}`,H=o.measureText("M").actualBoundingBoxAscent,T[0]&&T[0].length>0){let ye=0;T[0].forEach(ie=>{const{style:ge}=ie,me=ge.isSuperscript?(ge.fontSize||0)*.6:ge.fontSize||0;o.font=`${ge.fontStyle} ${ge.fontWeight} ${me}px ${ge.fontFamily}`,ye=Math.max(ye,o.measureText(ie.text).actualBoundingBoxAscent)}),H=ye}let _e=-P/2+H;o.textBaseline="alphabetic",T.forEach(ye=>{const ie=ye.reduce((ce,De)=>ce+De.width,0);let ge=-u/2+S;n.textAlign==="center"?ge=-ie/2:n.textAlign==="right"&&(ge=u/2-S-ie);let me=ge;ye.forEach(ce=>{const{style:De}=ce,Z=De.isSuperscript?(De.fontSize||0)*.6:De.fontSize||0,gt=De.isSuperscript?-Z*.5:0;o.font=`${De.fontStyle} ${De.fontWeight} ${Z}px ${De.fontFamily}`;const fe=De.strokeWidth||0,it=_e+gt;fe>0&&(o.strokeStyle=De.strokeColor||"#FFFFFF",o.lineWidth=fe,o.strokeText(ce.text,me,it)),o.fillStyle=De.color||"#000000",o.fillText(ce.text,me,it),me+=ce.width}),_e+=F}),o.restore()},Oy=(o,n)=>{let i=0,a=0,u=0;return o.length===4?(i=parseInt(o[1]+o[1],16),a=parseInt(o[2]+o[2],16),u=parseInt(o[3]+o[3],16)):o.length===7&&(i=parseInt(o.substring(1,3),16),a=parseInt(o.substring(3,5),16),u=parseInt(o.substring(5,7),16)),`rgba(${i},${a},${u},${n})`},Jc=(o,n,i,a,u)=>{const{hardness:r,color:p}=u,y=Math.pow(r,2),v=o.createRadialGradient(n,i,0,n,i,a),g=Oy(p,0);v.addColorStop(y,p),v.addColorStop(1,g),o.fillStyle=v,o.beginPath(),o.arc(n,i,a,0,2*Math.PI),o.fill()},Ao=(o,n,i)=>{n.forEach(a=>{const{points:u,type:r,size:p,hardness:y,shape:v,isFill:g}=a;if(u.length!==0){if(o.save(),o.globalCompositeOperation=r==="eraser"?"destination-out":"source-over",o.globalAlpha=a.opacity??1,g){if(u.length>=3){o.beginPath();const S=i(u[0]);o.moveTo(S.x,S.y);for(let x=1;x<u.length;x++){const T=i(u[x]);o.lineTo(T.x,T.y)}o.closePath(),o.fillStyle=r==="eraser"?"#000":a.color,o.fill()}}else{const S=p/2;if(S>0)if(u.length<2){const x=i(u[0]);Jc(o,x.x,x.y,S,a)}else{let x=i(u[0]);Jc(o,x.x,x.y,S,a);for(let T=1;T<u.length;T++){const b=i(u[T]),I=Math.hypot(b.x-x.x,b.y-x.y),z=v==="round"&&y<.5?.25:.5,q=Math.max(1,S*z),F=Math.ceil(I/q);for(let P=1;P<=F;P++){const H=P/F,ee=x.x*(1-H)+b.x*H,_e=x.y*(1-H)+b.y*H;Jc(o,ee,_e,S,a)}x=b}}}o.restore()}})},Vy=({box:o,style:n,onTextChange:i,onFinish:a})=>{const u=A.useRef(null),[r,p]=A.useState(o.plainText);A.useLayoutEffect(()=>{const g=u.current;if(g){g.style.height="auto",g.style.height=`${g.scrollHeight}px`;const S=parseFloat(String(n.height||"0"));g.scrollHeight<S&&(g.style.top=`${parseFloat(String(n.top||"0"))-(S-g.scrollHeight)/2}px`)}},[r,n.height,n.top]),A.useEffect(()=>{const g=u.current;g&&(g.focus(),g.select())},[]),A.useEffect(()=>{o.plainText!==r&&p(o.plainText)},[o.plainText]);const y=g=>{p(g.target.value),i(g.target.value)},v=g=>{g.key==="Escape"&&(g.preventDefault(),a())};return m.jsx("textarea",{ref:u,value:r,onChange:y,onBlur:a,onKeyDown:v,style:n,spellCheck:"false"})},Eo=8,Yy=5,na={type:null,boxId:null,startMouseX:0,startMouseY:0,startBox:null,resizeOffset:{x:0,y:0},isShiftDrawing:!1},Jy=(o,n,i)=>{const a=u=>("0"+u.toString(16)).slice(-2);return`#${a(o)}${a(n)}${a(i)}`},hi=({x:o,y:n},i)=>({x:o*Math.cos(i)-n*Math.sin(i),y:o*Math.sin(i)+n*Math.cos(i)}),Ky=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M13 20l7 -7"}),m.jsx("path",{d:"M13 20v-6a1 1 0 0 1 1 -1h6v-7a2 2 0 0 0 -2 -2h-12a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7"})]}),Xy=({imageUrl:o,textBoxes:n,strokes:i,selectedBoxIds:a,editingBoxId:u,onBoxClick:r,onBoxDoubleClick:p,onFinishEditing:y,onPlainTextChange:v,onBackgroundClick:g,onTextBoxesUpdate:S,onStrokesUpdate:x,onManualSelection:T,isEyedropperActive:b,onColorPick:I,activeTool:z,brushColor:q,paintBrushSize:F,selectionEraserSize:P,onSelectionErase:H,brushShape:ee,brushHardness:_e,brushOpacity:ye,onMagicWandSelect:ie,selectionMaskUrl:ge,onToggleNotesModal:me})=>{var qe,Pe;const ce=A.useRef(null),De=A.useRef(null),[Z,gt]=A.useState(null),[fe,it]=A.useState(1),[N,se]=A.useState({x:0,y:0}),Je=A.useRef(!1),[Ge,st]=A.useState(na),U=A.useRef(na);A.useEffect(()=>{U.current=Ge},[Ge]);const te=A.useRef(null),be=A.useRef(null),Te=A.useRef([]),je=A.useRef(null),lt=A.useRef(new Map),[ut,Ut]=A.useState(0),[pt,Dn]=A.useState(null),cn=A.useRef(null),[An,Kt]=A.useState({display:"none"}),[bt,bn]=A.useState([]),le=A.useRef(null),tt=A.useRef(null),ht=A.useRef({x:0,y:0}),[at,It]=A.useState(null),[Fe,sn]=A.useState(null),[Ne,ct]=A.useState(null),rn=A.useRef(null),et=A.useRef(null);A.useEffect(()=>{const V=ce.current;if(!V)return;const ae=_=>{_.ctrlKey&&_.preventDefault()};return V.addEventListener("wheel",ae,{passive:!1}),()=>{V.removeEventListener("wheel",ae)}},[]),A.useEffect(()=>{if(ge){const V=new Image;V.src=ge,V.onload=()=>It(V)}else It(null)},[ge]),A.useEffect(()=>{(async()=>{try{const ae=await fetch("config.json");if(!ae.ok){console.error(`config.json not found or failed to load: ${ae.statusText}`);return}const _=await ae.json();if(_.backgroundLogoPath&&typeof _.backgroundOpacity=="number"){sn({path:_.backgroundLogoPath,opacity:_.backgroundOpacity});const he=new Image;he.src=_.backgroundLogoPath,he.onload=()=>{ct(he)},he.onerror=()=>{console.error(`Failed to load background logo from path: ${he.src}`)}}else console.warn("config.json is missing backgroundLogoPath or backgroundOpacity properties.")}catch(ae){console.error("Could not load or parse /config.json:",ae)}})()},[]),A.useEffect(()=>{const V=ce.current;if(!Ne||!Fe||!V||!V.width||!V.height)return;rn.current||(rn.current=document.createElement("canvas"));const ae=rn.current;ae.width=V.width,ae.height=V.height;const _=ae.getContext("2d");if(!_)return;_.clearRect(0,0,ae.width,ae.height);const he=ae.width/ae.height,Ce=Ne.width/Ne.height;let Ae,xe,He,ve;he>Ce?(xe=ae.height,Ae=xe*Ce,He=(ae.width-Ae)/2,ve=0):(Ae=ae.width,xe=Ae/Ce,He=0,ve=(ae.height-xe)/2),_.globalAlpha=Fe.opacity,_.drawImage(Ne,He,ve,Ae,xe),_.globalAlpha=1},[Ne,Fe,(qe=ce.current)==null?void 0:qe.width,(Pe=ce.current)==null?void 0:Pe.height]),A.useEffect(()=>{bn(n)},[n]),A.useEffect(()=>{if(o){const V=new Image;V.src=o,V.onload=()=>{const ae=le.current&&V.width===le.current.width&&V.height===le.current.height;if(gt(V),le.current={width:V.width,height:V.height},(!te.current||te.current.width!==V.width||te.current.height!==V.height)&&(te.current=document.createElement("canvas"),te.current.width=V.width,te.current.height=V.height),!ae){const _=De.current;if(_){const{clientWidth:he,clientHeight:Ce}=_,xe=Math.min(he/V.width,Ce/V.height)*.95;it(xe);const He=(he-V.width*xe)/2,ve=(Ce-V.height*xe)/2;se({x:He,y:ve})}}}}else gt(null),le.current=null,it(1),se({x:0,y:0})},[o]);const St=A.useCallback((V,ae)=>Z?{x:(V-N.x)/fe,y:(ae-N.y)/fe}:{x:0,y:0},[N,fe,Z]),nn=A.useCallback((V,ae)=>({x:V*fe+N.x,y:ae*fe+N.y}),[N,fe]),Dt=A.useCallback(V=>Z?{x:V.x/Z.width,y:V.y/Z.height}:{x:0,y:0},[Z]),hn=A.useCallback(V=>{if(!Z)return{x:0,y:0};const ae=V.x*Z.width,_=V.y*Z.height;return nn(ae,_)},[Z,nn]),Ot=A.useCallback(V=>{if(!Z)return{boxX:0,boxY:0,boxWidth:0,boxHeight:0};const ae=V.width*Z.width*fe,_=V.height*Z.height*fe,he=V.x*Z.width*fe+N.x,Ce=V.y*Z.height*fe+N.y;return{boxX:he,boxY:Ce,boxWidth:ae,boxHeight:_}},[Z,fe,N]),In=A.useCallback(V=>{if(V.path)return{};const{boxX:ae,boxY:_,boxWidth:he,boxHeight:Ce}=Ot(V),Ae=Eo/2,xe=ae+he/2,He=_+Ce/2,ve=V.rotation*Math.PI/180,Re={"resize-tl":{x:-he/2,y:-Ce/2,cursor:"nwse-resize"},"resize-tr":{x:he/2,y:-Ce/2,cursor:"nesw-resize"},"resize-bl":{x:-he/2,y:Ce/2,cursor:"nesw-resize"},"resize-br":{x:he/2,y:Ce/2,cursor:"nwse-resize"},rotate:{x:0,y:-Ce/2-20,cursor:"grab"}},Le={};for(const[Se,Ue]of Object.entries(Re)){const Ze=hi(Ue,ve);Le[Se]={x:Ze.x+xe-Ae,y:Ze.y+He-Ae,cursor:Ue.cursor}}return Le},[Ot]),mn=A.useCallback(()=>{const V=ce.current,ae=De.current;if(!V||!ae)return;const _=V.getContext("2d");if(!_)return;const{clientWidth:he,clientHeight:Ce}=ae;if((V.width!==he||V.height!==Ce)&&(V.width=he,V.height=Ce),_.clearRect(0,0,V.width,V.height),rn.current&&_.drawImage(rn.current,0,0),!Z)return;if(_.drawImage(Z,N.x,N.y,Z.width*fe,Z.height*fe),at&&_.drawImage(at,N.x,N.y,Z.width*fe,Z.height*fe),tt.current&&_.drawImage(tt.current,N.x,N.y,Z.width*fe,Z.height*fe),te.current&&_.drawImage(te.current,N.x,N.y,Z.width*fe,Z.height*fe),pt&&Z){const ve=pt.x*Z.width*fe+N.x,Re=pt.y*Z.height*fe+N.y,Le=pt.width*Z.width*fe,Se=pt.height*Z.height*fe;_.save(),_.strokeStyle="#f59e0b",_.lineWidth=2,_.setLineDash([6,4]),_.fillStyle="rgba(245, 158, 11, 0.2)",_.strokeRect(ve,Re,Le,Se),_.fillRect(ve,Re,Le,Se),_.restore()}const Ae=a.length>0?a[a.length-1]:null;bt.forEach(ve=>{if(ve.id===u)return;const{boxX:Re,boxY:Le,boxWidth:Se,boxHeight:Ue}=Ot(ve),Ze=Re+Se/2,Tt=Le+Ue/2,ke=ve.id===Ae,nt=a.includes(ve.id);if(ve.path&&ve.type==="ocr"){const Qe=ke?"#f59e0b":nt?"#38bdf8":"#a16207",Et=nt?ke?"rgba(245, 158, 11, 0.2)":"rgba(56, 189, 248, 0.2)":"transparent";_.save(),_.strokeStyle=Qe,_.lineWidth=ke?3:2,_.fillStyle=Et,_.beginPath();const jt=hn(ve.path[0].anchor);_.moveTo(jt.x,jt.y);for(let on=0;on<ve.path.length-1;on++){const vn=ve.path[on],_t=ve.path[on+1],Bt=hn(vn.handle2),qn=hn(_t.handle1),un=hn(_t.anchor);_.bezierCurveTo(Bt.x,Bt.y,qn.x,qn.y,un.x,un.y)}const Qt=ve.path[ve.path.length-1];ve.path.length>2&&Qt.anchor.x===ve.path[0].anchor.x&&Qt.anchor.y===ve.path[0].anchor.y&&_.closePath(),_.stroke(),nt&&_.fill(),_.restore()}else{if(_.save(),_.translate(Ze,Tt),_.rotate(ve.rotation*Math.PI/180),ve.type==="image"&&ve.imageDataUrl){let Qe=lt.current.get(ve.imageDataUrl);Qe||(Qe=new Image,Qe.src=ve.imageDataUrl,Qe.onload=()=>Ut(Et=>Et+1),lt.current.set(ve.imageDataUrl,Qe)),Qe.complete&&Qe.naturalWidth>0&&_.drawImage(Qe,-Se/2,-Ue/2,Se,Ue)}if(ke){const Qe=ve.type==="ocr"?"#f59e0b":ve.type==="image"?"#8b5cf6":"#4ade80",Et=ve.type==="ocr"?"rgba(245, 158, 11, 0.2)":ve.type==="image"?"rgba(139, 92, 246, 0.1)":"rgba(74, 222, 128, 0.2)";_.strokeStyle=Qe,_.lineWidth=3,_.fillStyle=Et,ve.type==="ocr"&&_.setLineDash([6,4]),_.strokeRect(-Se/2,-Ue/2,Se,Ue),_.fillRect(-Se/2,-Ue/2,Se,Ue),_.setLineDash([])}else nt?(_.strokeStyle="#38bdf8",_.lineWidth=2,_.fillStyle="rgba(56, 189, 248, 0.2)",_.strokeRect(-Se/2,-Ue/2,Se,Ue),_.fillRect(-Se/2,-Ue/2,Se,Ue)):ve.type==="ocr"&&(_.strokeStyle="#a16207",_.lineWidth=2,_.setLineDash([6,4]),_.strokeRect(-Se/2,-Ue/2,Se,Ue),_.setLineDash([]));_.restore()}}),bt.forEach(ve=>{if(ve.id!==u&&ve.type==="text"){const{boxX:Re,boxY:Le,boxWidth:Se,boxHeight:Ue}=Ot(ve);Tm(_,ve,Re,Le,Se,Ue,fe)}});const xe=bt.find(ve=>ve.id===Ae);if(xe&&xe.id!==u){const{boxX:ve,boxY:Re,boxWidth:Le,boxHeight:Se}=Ot(xe),Ue=ve+Le/2,Ze=Re+Se/2,Tt=In(xe),ke=xe.type==="ocr"?"#f59e0b":xe.type==="image"?"#8b5cf6":"#4ade80";_.fillStyle=ke,Object.values(Tt).forEach(Qe=>{Qe.cursor!=="grab"&&_.fillRect(Qe.x,Qe.y,Eo,Eo)});const nt=Tt.rotate;if(nt){const Qe={x:0,y:-Se/2},Et=xe.rotation*Math.PI/180,jt=hi(Qe,Et),Qt={x:jt.x+Ue,y:jt.y+Ze};_.beginPath(),_.moveTo(Qt.x,Qt.y),_.lineTo(nt.x+Eo/2,nt.y+Eo/2),_.strokeStyle=ke,_.lineWidth=2,_.stroke(),_.beginPath(),_.arc(nt.x+Eo/2,nt.y+Eo/2,Eo,0,2*Math.PI),_.fill()}}const He=U.current;if(Z&&He.type==="paint"&&He.isShiftDrawing&&et.current){_.save();const ve=hn(et.current),Re=ht.current;_.beginPath(),_.moveTo(ve.x,ve.y),_.lineTo(Re.x,Re.y),_.strokeStyle="red",_.lineWidth=1,_.setLineDash([4,4]),_.stroke(),_.restore()}},[Z,bt,i,a,u,Ot,In,N,fe,z,F,_e,q,hn,b,pt,at,ut]);A.useEffect(()=>{if(!Z)return;(!tt.current||tt.current.width!==Z.width||tt.current.height!==Z.height)&&(tt.current=document.createElement("canvas"),tt.current.width=Z.width,tt.current.height=Z.height);const V=tt.current.getContext("2d");if(!V)return;V.clearRect(0,0,Z.width,Z.height),Ao(V,i,_=>({x:_.x*Z.width,y:_.y*Z.height}))},[i,Z]),A.useEffect(()=>{let V;const ae=()=>{mn(),V=requestAnimationFrame(ae)};return ae(),()=>{cancelAnimationFrame(V)}},[mn]);const Ft=A.useCallback(V=>{const ae=ce.current;if(!ae)return{x:0,y:0};const _=ae.getBoundingClientRect();return{x:V.clientX-_.left,y:V.clientY-_.top}},[]),yn=(V,ae)=>{const _=ce.current;if(ae.path&&ae.type==="ocr"&&_){const Se=_.getContext("2d");if(!Se)return!1;Se.beginPath();const Ue=hn(ae.path[0].anchor);Se.moveTo(Ue.x,Ue.y);for(let Tt=0;Tt<ae.path.length-1;Tt++){const ke=ae.path[Tt],nt=ae.path[Tt+1],Qe=hn(ke.handle2),Et=hn(nt.handle1),jt=hn(nt.anchor);Se.bezierCurveTo(Qe.x,Qe.y,Et.x,Et.y,jt.x,jt.y)}const Ze=ae.path[ae.path.length-1];return ae.path.length>2&&Ze.anchor.x===ae.path[0].anchor.x&&Ze.anchor.y===ae.path[0].anchor.y&&Se.closePath(),Se.isPointInPath(V.x,V.y)}const{boxX:he,boxY:Ce,boxWidth:Ae,boxHeight:xe}=Ot(ae),He=he+Ae/2,ve=Ce+xe/2,Re={x:V.x-He,y:V.y-ve},Le=hi(Re,-ae.rotation*Math.PI/180);return Math.abs(Le.x)<=Ae/2&&Math.abs(Le.y)<=xe/2},Zt=A.useCallback(()=>{if(!Z||!De.current)return;const V=De.current,{clientWidth:ae,clientHeight:_}=V,he=ae/2,Ce=_/2,Ae=St(he,Ce),xe=1,He=he-Ae.x*xe,ve=Ce-Ae.y*xe;it(xe),se({x:He,y:ve})},[Z,St]),Bn=A.useCallback(V=>{if(V.preventDefault(),!Z)return;const{x:ae,y:_}=Ft(V);if(V.metaKey||V.altKey){se(Ae=>({x:Ae.x-V.deltaX*.5,y:Ae.y-V.deltaY*.5}));return}if(V.ctrlKey||V.deltaX===0){const Ae=V.deltaY<0?fe*1.1:fe/1.1,xe=Math.max(.1,Math.min(Ae,10));if(xe===fe)return;const He=St(ae,_),ve=ae-He.x*xe,Re=_-He.y*xe;it(xe),se({x:ve,y:Re})}else se(Ae=>({x:Ae.x-V.deltaX*.5,y:Ae.y-V.deltaY*.5}))},[Z,Ft,St,fe,N]),Ht=V=>{if(u)return;const{x:ae,y:_}=Ft(V);for(let he=bt.length-1;he>=0;he--){const Ce=bt[he];if(Ce.type==="text"&&yn({x:ae,y:_},Ce)){p(Ce.id);return}}},Jn=V=>{var Ae;if(V.ctrlKey||V.metaKey){Je.current=!0,st(na),ce.current&&(ce.current.style.cursor="grabbing");return}if(b){const xe=ce.current;if(!xe){I("#000000");return}const He=xe.getContext("2d",{willReadFrequently:!0});if(!He){console.error("Could not get canvas context for eyedropper."),I("#000000");return}const{x:ve,y:Re}=Ft(V),Le=He.getImageData(ve,Re,1,1).data,Se=Jy(Le[0],Le[1],Le[2]);I(Se);return}const{x:ae,y:_}=Ft(V);if(z==="magic-wand"){const xe=St(ae,_);ie(xe,V.shiftKey,V.altKey);return}if(z==="manual-selection"){const xe=St(ae,_),He=Dt(xe);cn.current=He,Dn({x:He.x,y:He.y,width:0,height:0}),st(na);return}if(z==="brush"||z==="eraser"||z==="selection-eraser"){if(z==="selection-eraser"&&!ge)return;const xe=V.shiftKey;st({type:"paint",boxId:null,startMouseX:ae,startMouseY:_,startBox:null,isShiftDrawing:xe});const He=St(ae,_),ve=Dt(He);be.current={type:z==="brush"?"brush":"eraser",color:z==="brush"?q:"#000000",size:z==="selection-eraser"?P:F,shape:ee,hardness:z==="selection-eraser"?1:_e,opacity:z==="brush"?ye:1},xe?(et.current||(et.current=ve),Te.current=[et.current]):(et.current=null,Te.current=[ve]),je.current=He;const Re=(Ae=te.current)==null?void 0:Ae.getContext("2d");if(Re&&Z&&(Re.clearRect(0,0,Z.width,Z.height),!xe)){const Le=Se=>({x:Se.x*Z.width,y:Se.y*Z.height});Ao(Re,[{...be.current,id:0,points:Te.current}],Le)}return}const he=a.length>0?a[a.length-1]:null,Ce=bt.find(xe=>xe.id===he);if(Ce&&Ce.id!==u){const xe=In(Ce);for(const[He,ve]of Object.entries(xe))if(ae>=ve.x&&ae<=ve.x+Eo&&_>=ve.y&&_<=ve.y+Eo){const Re=He;let Le={x:0,y:0};if(Re.startsWith("resize-")){const Se=Re.split("-")[1],{boxX:Ue,boxY:Ze,boxWidth:Tt,boxHeight:ke}=Ot(Ce),nt=Ue+Tt/2,Qe=Ze+ke/2,Et=Ce.rotation*Math.PI/180,jt={x:(Se.includes("l")?-1:1)*Tt/2,y:(Se.includes("t")?-1:1)*ke/2},Qt=hi(jt,Et),on={x:Qt.x+nt,y:Qt.y+Qe};Le={x:ae-on.x,y:_-on.y}}st({type:Re,boxId:he,startMouseX:ae,startMouseY:_,startBox:{...Ce},resizeOffset:Le});return}}for(let xe=bt.length-1;xe>=0;xe--){const He=bt[xe];if(yn({x:ae,y:_},He)){st({type:"move",boxId:He.id,startMouseX:ae,startMouseY:_,startBox:{...He}});return}}st({type:null,boxId:null,startMouseX:ae,startMouseY:_,startBox:null})},Un=A.useCallback((V,ae)=>{if((z==="brush"||z==="eraser"||z==="selection-eraser")&&!b){const _=z==="selection-eraser",Ce=(_?P:F)/2*fe,Ae=_?1:_e;let xe=0,He=0,ve=0;const Re=z==="brush"?q:"rgba(255, 255, 255, 0.8)";if(Re.startsWith("#")){const Ue=parseInt(Re.substring(1),16);xe=Ue>>16&255,He=Ue>>8&255,ve=Ue&255}else if(Re.startsWith("rgb")){const Ue=Re.match(/(\d+(\.\d+)?)/g);Ue&&([xe,He,ve]=Ue.map(Number))}const Le=`rgb(${xe}, ${He}, ${ve})`,Se=`rgba(${xe}, ${He}, ${ve}, 0)`;Kt({display:"block",position:"absolute",left:`${V-Ce}px`,top:`${ae-Ce}px`,width:`${Ce*2}px`,height:`${Ce*2}px`,borderRadius:"50%",background:`radial-gradient(circle, ${Le} ${Ae*100}%, ${Se} 100%)`,border:_?"1px solid #a78bfa":"1px solid red",pointerEvents:"none",zIndex:20})}else Kt({display:"none"})},[F,P,_e,q,z,fe,b]);A.useEffect(()=>{Un(ht.current.x,ht.current.y)},[F,P,_e,q,z,fe,b,Un]);const to=V=>{var ve,Re,Le;const ae=ce.current;if(!ae||!Z)return;const{x:_,y:he}=Ft(V);if(ht.current={x:_,y:he},Un(_,he),cn.current){const Se=St(_,he),Ue=Dt(Se),Ze=cn.current,Tt=Math.min(Ze.x,Ue.x),ke=Math.min(Ze.y,Ue.y),nt=Math.abs(Ze.x-Ue.x),Qe=Math.abs(Ze.y-Ue.y);Dn({x:Tt,y:ke,width:nt,height:Qe});return}if(b){ae.style.cursor="crosshair";return}if(Je.current){se(Se=>({x:Se.x+V.movementX,y:Se.y+V.movementY}));return}if(Ge.type==="paint"){if(be.current){const Se=St(_,he),Ue=Dt(Se),Ze=(ve=te.current)==null?void 0:ve.getContext("2d");if(Ge.isShiftDrawing&&et.current)Te.current=[et.current,Ue],Ze&&Ze.clearRect(0,0,Ze.canvas.width,Ze.canvas.height);else{if(Math.hypot(Se.x-(((Re=je.current)==null?void 0:Re.x)||0),Se.y-(((Le=je.current)==null?void 0:Le.y)||0))<2)return;if(Te.current.push(Ue),je.current=Se,Ze){const ke={...be.current,points:Te.current};ke.type==="eraser"&&(ke.type="brush",ke.color=z==="selection-eraser"?"rgba(167, 139, 250, 0.6)":"rgba(255, 255, 255, 0.5)",ke.hardness=1);const nt={id:0,...ke};Ze.clearRect(0,0,Ze.canvas.width,Ze.canvas.height),Ao(Ze,[nt],Qe=>({x:Qe.x*Z.width,y:Qe.y*Z.height}))}}}return}if(!Ge.type){ae.style.cursor=V.ctrlKey?"grab":z==="brush"||z==="eraser"||z==="selection-eraser"?"none":z==="manual-selection"||z==="magic-wand"?"crosshair":"default";const Se=a.length>0?a[a.length-1]:null,Ue=bt.find(Ze=>Ze.id===Se);if(Ue&&Ue.id!==u){const Ze=In(Ue);for(const[Tt,ke]of Object.entries(Ze))if(_>=ke.x&&_<=ke.x+Eo&&he>=ke.y&&he<=ke.y+Eo){ae.style.cursor=ke.cursor;return}}for(const Ze of bt)if(yn({x:_,y:he},Ze)){ae.style.cursor="move";return}return}if(!Ge.startBox)return;const{startBox:Ce}=Ge;let Ae={...bt.find(Se=>Se.id===Ce.id)};const xe=_-Ge.startMouseX,He=he-Ge.startMouseY;switch(Ge.type){case"move":{const Se=xe/(Z.width*fe),Ue=He/(Z.height*fe);bn(Ze=>Ze.map(Tt=>{var ke;if(a.includes(Tt.id)){const nt=n.find(Qe=>Qe.id===Tt.id);if(nt){const Qe={...Tt};return Qe.x=nt.x+Se,Qe.y=nt.y+Ue,Qe.path&&(Qe.path=(ke=nt.path)==null?void 0:ke.map(Et=>({anchor:{x:Et.anchor.x+Se,y:Et.anchor.y+Ue},handle1:{x:Et.handle1.x+Se,y:Et.handle1.y+Ue},handle2:{x:Et.handle2.x+Se,y:Et.handle2.y+Ue}}))),Qe.x=Math.max(0,Math.min(Qe.x,1-Qe.width)),Qe.y=Math.max(0,Math.min(Qe.y,1-Qe.height)),Qe}}return Tt}));return}case"rotate":{const{boxX:Se,boxY:Ue,boxWidth:Ze,boxHeight:Tt}=Ot(Ce),ke=Se+Ze/2,nt=Ue+Tt/2,Qe=Math.atan2(Ge.startMouseY-nt,Ge.startMouseX-ke),jt=Math.atan2(he-nt,_-ke)-Qe;Ae.rotation=Ce.rotation+jt*180/Math.PI;break}case"resize-br":case"resize-bl":case"resize-tr":case"resize-tl":{const{startBox:Se,resizeOffset:Ue}=Ge;if(!Se)break;const Ze=Se.rotation*Math.PI/180,Tt=Ot(Se),ke=Tt.boxX+Tt.boxWidth/2,nt=Tt.boxY+Tt.boxHeight/2,Qe=Ge.type.split("-")[1],Et={tl:"br",tr:"bl",bl:"tr",br:"tl"}[Qe],jt={x:(Et.includes("l")?-1:1)*Tt.boxWidth/2,y:(Et.includes("t")?-1:1)*Tt.boxHeight/2},Qt=hi(jt,Ze),on={x:Qt.x+ke,y:Qt.y+nt},vn=_-((Ue==null?void 0:Ue.x)||0),_t=he-((Ue==null?void 0:Ue.y)||0),Bt={x:vn-on.x,y:_t-on.y},qn=hi(Bt,-Ze);let un,_n;if(Se.type==="image"&&Se.aspectRatio&&Se.aspectRatio>0){const ln=Se.aspectRatio,Ct=qn,sl=Math.sign(Ct.x)||1,Yl=Math.sign(Ct.y)||1,Gn={x:ln*sl,y:1*Yl},Jl=Ct.x*Gn.x+Ct.y*Gn.y,qo=Gn.x*Gn.x+Gn.y*Gn.y;if(qo>0){const yi=Jl/qo,kn={x:Gn.x*yi,y:Gn.y*yi};un=Math.abs(kn.x),_n=Math.abs(kn.y)}else un=Math.abs(Ct.x),_n=Math.abs(Ct.y)}else un=Math.abs(qn.x),_n=Math.abs(qn.y);un<10&&(un=10),_n<10&&(_n=10);const da={x:Math.sign(qn.x)*un,y:Math.sign(qn.y)*_n},al=hi(da,Ze),Ol={x:on.x+al.x/2,y:on.y+al.y/2},Vl=St(Ol.x,Ol.y),Ho=un/(Z.width*fe),Bo=_n/(Z.height*fe);Ae.width=Ho,Ae.height=Bo,Ae.x=Vl.x/Z.width-Ho/2,Ae.y=Vl.y/Z.height-Bo/2,Ae.rotation=Se.rotation;break}}Ae.width<.01&&(Ae.width=.01),Ae.height<.01&&(Ae.height=.01),Ae.x=Math.max(0,Math.min(Ae.x,1-Ae.width)),Ae.y=Math.max(0,Math.min(Ae.y,1-Ae.height)),bn(Se=>Se.map(Ue=>Ue.id===Ae.id?Ae:Ue))},j=V=>{var ve;if(u||b)return;if(Je.current){Je.current=!1,ce.current&&(ce.current.style.cursor=V.ctrlKey?"grab":"default");return}if(cn.current&&pt&&Z){pt.width*Z.width>5&&pt.height*Z.height>5&&T(pt,V.shiftKey,V.altKey),Dn(null),cn.current=null;return}if(Ge.type==="paint"){if(be.current&&Te.current.length>=1){if(Ge.isShiftDrawing){const{x:Le,y:Se}=Ft(V),Ue=St(Le,Se),Ze=Dt(Ue);et.current&&(Te.current=[et.current,Ze],et.current=Ze)}else et.current=null;if(z==="selection-eraser")H(Te.current,be.current.size,be.current.hardness);else{const Le={id:Date.now(),...be.current,points:Te.current};x([...i,Le])}}const Re=(ve=te.current)==null?void 0:ve.getContext("2d");Re&&Re.clearRect(0,0,Re.canvas.width,Re.canvas.height),be.current=null,Te.current=[],je.current=null,st(na);return}const{startMouseX:ae,startMouseY:_,startBox:he,type:Ce}=Ge,{x:Ae,y:xe}=Ft(V);Math.sqrt(Math.pow(Ae-ae,2)+Math.pow(xe-_,2))<Yy?Ce==="move"&&he?r(he.id,V.shiftKey):Ce===null&&g():(Ce==="move"||Ce!=null&&Ce.startsWith("resize-")||Ce==="rotate")&&S(bt),st(na)},Me=V=>{Kt({display:"none"}),cn.current&&j(V),Ge.type&&j(V)},Be=A.useCallback(V=>{(V.ctrlKey||V.metaKey)&&V.key==="1"&&(V.preventDefault(),Zt())},[Zt]),Oe=A.useMemo(()=>n.find(V=>V.id===u),[n,u]),Ke=A.useMemo(()=>{if(!Oe||!Z||!Oe.fontFamily)return{display:"none"};const{boxX:V,boxY:ae,boxWidth:_,boxHeight:he}=Ot(Oe);return{position:"absolute",left:`${V+_/2}px`,top:`${ae+he/2}px`,width:`${_}px`,height:`${he}px`,transform:`translate(-50%, -50%) rotate(${Oe.rotation}deg)`,fontFamily:Oe.fontFamily,fontSize:`${(Oe.fontSize||0)*fe}px`,color:Oe.color,textAlign:Oe.textAlign,lineHeight:Oe.lineHeight,fontWeight:Oe.fontWeight,fontStyle:Oe.fontStyle,wordSpacing:`${(Oe.wordSpacing||0)*fe}px`,background:"rgba(28, 25, 23, 0.8)",border:"1px dashed #a78bfa",padding:`${(Oe.fontSize||0)*fe*.1}px`,margin:0,resize:"none",overflow:"hidden",boxSizing:"border-box",outline:"none",whiteSpace:"pre-wrap",colorScheme:"dark",zIndex:10}},[Oe,Z,Ot,fe]);return m.jsxs("div",{ref:De,className:"relative h-full bg-gray-900 flex justify-center items-center p-4 overflow-hidden",children:[m.jsx("canvas",{ref:ce,tabIndex:0,onMouseDown:Jn,onMouseUp:j,onMouseMove:to,onMouseLeave:Me,onWheel:Bn,onDoubleClick:Ht,onKeyDown:Be,className:`${z==="brush"||z==="eraser"||z==="selection-eraser"?"cursor-none":""} ${z==="manual-selection"?"cursor-crosshair":""} ${z==="magic-wand"?"cursor-crosshair":""} ${b?"cursor-crosshair":""} outline-none`}),m.jsx("button",{onClick:me,className:"absolute top-4 left-4 bg-gray-800 bg-opacity-75 text-white p-2 rounded-full shadow-lg hover:bg-indigo-600 transition-colors z-10",title:"Notes",children:m.jsx(Ky,{})}),m.jsx("div",{style:An}),Oe&&Oe.type==="text"&&m.jsx(Vy,{box:Oe,style:Ke,onTextChange:V=>v(V,Oe.id),onFinish:y}),m.jsxs("div",{className:"absolute bottom-4 right-4 bg-gray-800 bg-opacity-75 text-white text-xs rounded-md p-2 flex items-center space-x-2 shadow-lg select-none",children:[m.jsxs("span",{children:[Math.round(fe*100),"%"]}),m.jsx("button",{onClick:Zt,className:"bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded-md transition-colors",title:"Zoom to 100% (Ctrl+1)",children:"100%"})]})]})};var ft=(o=>(o.READY="Ready",o.OCR="Extracting text from all boxes...",o.TRANSLATING="Translating all text...",o.SAVING="Saving all modified images...",o.PATH_TO_BOX="Finalizing path selection...",o.ERROR="An error occurred",o.MAGIC_WAND="Calculating selection...",o.INPAINTING="Inpainting selection...",o.SAVING_PROJECT="Saving project...",o.LOADING_PROJECT="Loading project...",o))(ft||{});const Em=({selectedFont:o,onFontChange:n,fonts:i,disabled:a,previewPosition:u="right"})=>{const[r,p]=A.useState(!1),[y,v]=A.useState(null),g=A.useRef(null);A.useEffect(()=>{function x(T){g.current&&!g.current.contains(T.target)&&p(!1)}return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[g]);const S=x=>{n(x),p(!1)};return m.jsxs("div",{ref:g,className:"relative w-full",children:[m.jsx("button",{onClick:()=>p(!r),disabled:a,style:{fontFamily:o},className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm text-left truncate focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",children:o}),r&&m.jsx("div",{className:"absolute z-20 w-full mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:i.map(x=>m.jsx("button",{onMouseEnter:()=>v(x),onMouseLeave:()=>v(null),onClick:()=>S(x),className:"block w-full text-left px-3 py-2 text-sm hover:bg-indigo-600",style:{fontFamily:x},children:x},x))}),r&&y&&m.jsx("div",{className:"absolute z-30 p-2 bg-gray-900 border border-indigo-500 rounded-lg shadow-2xl pointer-events-none",style:{...u==="right"?{left:"102%"}:{right:"102%"},top:"0",fontFamily:y,fontSize:"22px",whiteSpace:"nowrap"},children:y})]})};var jy=Sm();const Wy=rd(jy),Zy=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#808080","#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B","#424242","#E0E0E0","#FF8A65","#AED581","#4FC3F7","#7986CB","#BA68C8","#F06292","#FFE082","#A1887F","#FFD180","#8D6E63"],Qy=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M10 3.5a1.5 1.5 0 011.06.44l3.536 3.535a1.5 1.5 0 010 2.122L6.12 18.07a1.5 1.5 0 01-2.121 0l-.707-.707a1.5 1.5 0 010-2.121L11.061 4.44A1.5 1.5 0 0110 3.5zM12 7.5a1 1 0 11-2 0 1 1 0 012 0z"}),m.jsx("path",{d:"M4.343 14.343l1.414 1.414-2.121 2.122a1.5 1.5 0 01-2.121 0l-.707-.707a1.5 1.5 0 010-2.121l2.121-2.121z"})]}),ss=({color:o,onChange:n,onClose:i,onActivateEyedropper:a,labelPrefix:u,triggerRef:r})=>{const{t:p}=fo(),y=A.useRef(null),[v,g]=A.useState(null);A.useEffect(()=>{const x=setTimeout(()=>{if(r.current&&y.current){const T=r.current.getBoundingClientRect(),b=y.current.getBoundingClientRect(),I=window.innerWidth,z=window.innerHeight,q=8;let F=T.bottom+4,P=T.left;F+b.height>z-q&&(F=T.top-b.height-4),P+b.width>I-q&&(P=T.right-b.width),P<q&&(P=q),F<q&&(F=q),g({top:F,left:P})}},60);return()=>clearTimeout(x)},[r]),A.useEffect(()=>{const x=T=>{y.current&&!y.current.contains(T.target)&&r.current&&!r.current.contains(T.target)&&i()};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[i,r]);const S=m.jsxs("div",{ref:y,className:"bg-gray-800 p-3 rounded-lg shadow-2xl border border-gray-600 w-56",style:v?{position:"fixed",top:`${v.top}px`,left:`${v.left}px`,zIndex:50}:{position:"fixed",top:"-9999px",left:"-9999px",zIndex:50},children:[m.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3",children:Zy.map(x=>m.jsx("button",{onClick:()=>n(x),className:"w-6 h-6 rounded-full cursor-pointer transition-transform transform hover:scale-110 border-2",style:{backgroundColor:x,borderColor:o.toLowerCase()===x.toLowerCase()?"#38bdf8":"transparent"},"aria-label":`Color ${x}`},x))}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{onClick:()=>{a(),i()},className:"p-2 rounded-md bg-gray-700 hover:bg-gray-600 transition-colors","aria-label":p("pickColorFromCanvas"),title:p("pickColorFromCanvas"),children:m.jsx(Qy,{})}),m.jsx("label",{htmlFor:`${u}-color-picker-input`,className:"relative w-10 h-10 rounded-md overflow-hidden cursor-pointer border-2 border-gray-500",children:m.jsx("input",{id:`${u}-color-picker-input`,type:"color",value:o,onChange:x=>n(x.target.value),className:"absolute -top-2 -left-2 w-20 h-20 cursor-pointer border-none p-0 m-0"})}),m.jsx("input",{type:"text",value:o.toUpperCase(),onChange:x=>n(x.target.value),className:"bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm w-full focus:ring-indigo-500 focus:border-indigo-500","aria-label":p("hexColorCode")})]})]});return Wy.createPortal(S,document.body)},$y=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),ev=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),tv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),m.jsx("path",{d:"M15 6l3 3"}),m.jsx("path",{d:"M9 17l-1.5 -1.5"}),m.jsx("path",{d:"M12 14l-1.5 -1.5"}),m.jsx("path",{d:"M15 11l-1.5 -1.5"}),m.jsx("path",{d:"M18 8l-1.5 -1.5"})]}),nv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"}),m.jsx("path",{d:"M13.5 6.5l4 4"}),m.jsx("path",{d:"M19 19l1.5 -1.5"}),m.jsx("path",{d:"M16 16l1.5 -1.5"}),m.jsx("path",{d:"M13 13l1.5 -1.5"}),m.jsx("path",{d:"M10 10l1.5 -1.5"})]}),ov=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),lv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),m.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),iv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M10.707 4.293a1 1 0 00-1.414 0l-4 4a1 1 0 001.414 1.414L10 6.414l3.293 3.293a1 1 0 001.414-1.414l-4-4z"}),m.jsx("path",{d:"M3 12a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"})]}),av=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M9.293 15.707a1 1 0 001.414 0l4-4a1 1 0 00-1.414-1.414L10 13.586l-3.293-3.293a1 1 0 00-1.414 1.414l4 4z"}),m.jsx("path",{d:"M3 8a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"})]}),sv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 9a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),rv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM5 9a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm-2 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm2 4a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})}),uv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM9 9a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1zm-6 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm6 4a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z",clipRule:"evenodd"})}),cv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{fillRule:"evenodd",d:"M14.707 2.293a1 1 0 011.414 0l2 2a1 1 0 010 1.414l-11 11a1 1 0 01-.707.293H3a1 1 0 01-1-1v-2.414a1 1 0 01.293-.707l11-11zM14 4l2 2-9 9H5v-2l9-9z",clipRule:"evenodd"}),m.jsx("path",{fillRule:"evenodd",d:"M15 8a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})]}),dv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M15.206 2.343a1.5 1.5 0 012.122 0l1.414 1.414a1.5 1.5 0 010 2.121L8.343 18.278a1.5 1.5 0 01-2.122 0l-4.242-4.242a1.5 1.5 0 010-2.121L15.206 2.343zM7.28 9.28L3.037 13.523l4.243 4.243 4.242-4.243-4.242-4.243z",clipRule:"evenodd"})}),fv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 9.707a1 1 0 011.414 0L10 12.001l2.293-2.294a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"}),m.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v8a1 1 0 11-2 0V3a1 1 0 011-1z",clipRule:"evenodd"})]}),hv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm0 2h12v10H4V5z"}),m.jsx("path",{d:"M9 8h2v2H9V8zm-2 2h2v2H7v-2zm4 0h2v2h-2v-2z"}),m.jsx("path",{fillRule:"evenodd",d:"M8 2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H9a1 1 0 01-1-1V2z",clipRule:"evenodd"})]}),pv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"6",cy:"6",r:"3"}),m.jsx("circle",{cx:"6",cy:"18",r:"3"}),m.jsx("line",{x1:"20",y1:"4",x2:"8.12",y2:"15.88"}),m.jsx("line",{x1:"14.47",y1:"14.48",x2:"20",y2:"20"}),m.jsx("line",{x1:"8.12",y1:"8.12",x2:"12",y2:"12"})]}),Kc=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M5 2a1 1 0 00-1 1v14a1 1 0 001 1h10a1 1 0 001-1V6.414a1 1 0 00-.293-.707l-3.414-3.414A1 1 0 0011.586 2H5zm5 2.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM9 12a1 1 0 00-1 1v2a1 1 0 102 0v-2a1 1 0 00-1-1z"})}),gv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),mv=({status:o,ocrText:n,plainText:i,selectedFile:a,hasAnyBoxes:u,selectedBox:r,onAddFreeTextBox:p,onSelectAllBoxes:y,onDeselectBox:v,onPlainTextChange:g,onFormatChange:S,onSplitBox:x,onUndo:T,onRedo:b,canUndo:I,canRedo:z,onActivateEyedropper:q,activeTool:F,onToolChange:P,brushColor:H,onBrushColorChange:ee,paintBrushSize:_e,onPaintBrushSizeChange:ye,selectionEraserSize:ie,onSelectionEraserSizeChange:ge,brushHardness:me,onBrushHardnessChange:ce,brushOpacity:De,onBrushOpacityChange:Z,onSaveCurrentImage:gt,onExportAll:fe,onSaveAsPdf:it,onBringForward:N,onSendBackward:se,canBringForward:Je,canSendBackward:Ge,fonts:st,selectionToRestore:U,onSelectionRestoreComplete:te,textAreaHeights:be,onTextAreaHeightsChange:Te,textBoxes:je,magicWandTolerance:lt,onMagicWandToleranceChange:ut,isSelectionActive:Ut,onClearSelection:pt,onRecallSelection:Dn,canRecallSelection:cn,onInpaint:An,inpaintAutoColor:Kt,onInpaintAutoColorChange:bt,inpaintManualColor:bn,onInpaintManualColorChange:le,onLaunchImageEditor:tt,styleSlots:ht,onSaveStyle:at,onExportOcr:It,onExportText:Fe,onImportText:sn})=>{const{t:Ne}=fo(),ct=o!==ft.READY&&o!==ft.ERROR,rn=(r==null?void 0:r.type)==="text",et=!rn||ct,[St,nn]=wo.useState(null),[Dt,hn]=wo.useState(null),Ot=wo.useRef({type:null,startY:0,startHeight:0}),In=wo.useRef(null),mn=A.useRef(null),Ft=A.useRef(null),yn=A.useRef(null),Zt=A.useRef(null),Bn=A.useRef(null);A.useEffect(()=>{hn(null)},[r==null?void 0:r.id]),A.useLayoutEffect(()=>{const _=In.current;_&&U&&(_.focus(),_.setSelectionRange(U.start,U.end),te())},[U,te]);const Ht=A.useMemo(()=>{if(!r||!r.plainText)return{fontFamily:r==null?void 0:r.fontFamily,fontSize:r==null?void 0:r.fontSize,textAlign:r==null?void 0:r.textAlign,fontWeight:r==null?void 0:r.fontWeight,fontStyle:r==null?void 0:r.fontStyle,lineHeight:r==null?void 0:r.lineHeight,wordSpacing:r==null?void 0:r.wordSpacing,color:r==null?void 0:r.color,strokeColor:r==null?void 0:r.strokeColor,strokeWidth:r==null?void 0:r.strokeWidth};const _=Ae=>{const xe={fontFamily:r.fontFamily,fontSize:r.fontSize,textAlign:r.textAlign,fontWeight:r.fontWeight,fontStyle:r.fontStyle,lineHeight:r.lineHeight,wordSpacing:r.wordSpacing,color:r.color,strokeColor:r.strokeColor,strokeWidth:r.strokeWidth},He=r.styleSpans.find(ve=>Ae>=ve.start&&Ae<ve.end);return{...xe,...(He==null?void 0:He.style)||{}}};if(!Dt||Dt.start===Dt.end){const Ae=Dt?Dt.start:r.plainText.length;return _(Math.max(0,Ae-1))}const Ce={..._(Dt.start)};for(let Ae=Dt.start+1;Ae<Dt.end;Ae++){const xe=_(Ae);if(Object.keys(Ce).forEach(He=>{Ce[He]!==xe[He]&&delete Ce[He]}),Object.keys(Ce).length===0)break}return Ce},[r,Dt]),Jn=wo.useCallback(_=>{if(!Ot.current.type)return;const he=_.clientY-Ot.current.startY,Ce=Ot.current.startHeight+he,Ae=Math.max(60,Ce);Ot.current.type==="source"?Te({...be,source:Ae}):Te({...be,display:Ae})},[Ot,Te,be]),Un=wo.useCallback(()=>{document.body.style.cursor="default",Ot.current.type=null,window.removeEventListener("mousemove",Jn),window.removeEventListener("mouseup",Un)},[Jn]),to=(_,he)=>{_.preventDefault(),Ot.current={type:he,startY:_.clientY,startHeight:he==="source"?be.source:be.display},document.body.style.cursor="ns-resize",window.addEventListener("mousemove",Jn),window.addEventListener("mouseup",Un)},j=_=>{const{selectionStart:he,selectionEnd:Ce}=_.currentTarget;hn({start:he,end:Ce})},Me=_=>{S(_,Dt)},Be=()=>{if(!r)return;const _=r.plainText||"";let he=!0;if(Dt&&Dt.start!==Dt.end){const Ce=_.substring(Dt.start,Dt.end);he=Ce.length>0&&Ce===Ce.toUpperCase()}else he=_.length>0&&_===_.toUpperCase();Me({textTransform:he?"lowercase":"uppercase"})},Oe=()=>{if(r&&In.current){const _=In.current.selectionStart;x(_)}},Ke=A.useCallback(()=>{if(!r)return null;const _=Ce=>{const Ae={fontFamily:r.fontFamily,fontSize:r.fontSize,textAlign:r.textAlign,fontWeight:r.fontWeight,fontStyle:r.fontStyle,lineHeight:r.lineHeight,wordSpacing:r.wordSpacing,color:r.color,strokeColor:r.strokeColor,strokeWidth:r.strokeWidth};if(!r.plainText)return Ae;const xe=Math.min(Ce,r.plainText.length-1);if(xe<0)return Ae;const He=(r.styleSpans||[]).find(ve=>xe>=ve.start&&xe<ve.end);return{...Ae,...(He==null?void 0:He.style)||{}}},he=Dt?Dt.start:0;return _(he)},[r,Dt]),qe=A.useCallback(_=>{if(et)return;const he=Ke();he&&(delete he.textAlign,at(_,he))},[et,Ke,at]),Pe=A.useCallback(_=>{if(et)return;const he=ht[_];he&&S(he,Dt)},[et,ht,S,Dt]);A.useEffect(()=>{const _=he=>{if(!(he.target.tagName==="INPUT"||he.target.tagName==="TEXTAREA"&&he.target.id!=="translated-text")&&(he.key==="F1"||he.key==="F2"||he.key==="F3")){if(et)return;he.preventDefault();const Ce=he.key==="F1"?0:he.key==="F2"?1:2;he.shiftKey?qe(Ce):Pe(Ce)}};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[qe,Pe,et]);const V=()=>{var _;(_=mn.current)==null||_.click()},ae=_=>{_.target.files&&_.target.files.length>0&&(sn(_.target.files[0]),_.target&&(_.target.value=""))};return m.jsxs("div",{className:"h-full bg-gray-800 p-4 flex flex-col space-y-4 overflow-y-auto",children:[m.jsxs("div",{className:"flex flex-col space-y-2",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("div",{className:"flex items-center gap-2 mb-1",children:m.jsx("label",{htmlFor:"ocr-text",className:"font-semibold text-gray-300 flex-grow",children:Ne("sourceTextLabel")})}),m.jsxs("div",{className:"relative",children:[m.jsx("textarea",{id:"ocr-text",readOnly:!0,value:n,placeholder:(r==null?void 0:r.type)==="ocr"?Ne("sourceTextPlaceholder"):Ne("sourceTextPlaceholderNoSelection"),style:{height:`${be.source}px`},className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 pr-5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),m.jsx("div",{onMouseDown:_=>to(_,"source"),className:"absolute bottom-0 right-0 w-5 h-5 cursor-ns-resize flex items-end justify-end p-1 text-gray-500 hover:text-gray-300",title:Ne("resize"),children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M8 20L20 8M14 20l6-6"})})})]})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("label",{htmlFor:"translated-text",className:"font-semibold text-gray-300 flex-grow",children:Ne("displayTextLabel")}),m.jsx("input",{ref:mn,type:"file",accept:".json",onChange:ae,className:"hidden"}),m.jsx("button",{onClick:Fe,disabled:!je.some(_=>_.type==="text"),title:"Export display texts as JSON",className:"p-1.5 rounded-full bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-white transition-colors duration-200",children:m.jsx($y,{})}),m.jsx("button",{onClick:V,disabled:!je.some(_=>_.type==="text"),title:"Import display texts from JSON",className:"p-1.5 rounded-full bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-white transition-colors duration-200",children:m.jsx(ev,{})})]}),m.jsxs("div",{className:"relative",children:[m.jsx("textarea",{ref:In,id:"translated-text",value:i,onChange:_=>r&&g(_.target.value,r.id),onSelect:j,onFocus:j,onKeyUp:_=>j(_),onClick:_=>j(_),disabled:!rn||ct,placeholder:Ne(rn?"displayTextPlaceholder":"displayTextPlaceholderNoSelection"),style:{height:`${be.display}px`},className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 pr-5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-800 disabled:cursor-not-allowed"}),m.jsx("div",{onMouseDown:_=>to(_,"display"),className:"absolute bottom-0 right-0 w-5 h-5 cursor-ns-resize flex items-end justify-end p-1 text-gray-500 hover:text-gray-300",title:Ne("resize"),children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M8 20L20 8M14 20l6-6"})})})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-2 text-indigo-400",children:Ne("editingTools")}),m.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:p,disabled:!a||ct,className:"flex-grow flex justify-center items-center bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm",children:Ne("addBox")}),m.jsx("button",{onClick:()=>P(F==="manual-selection"?null:"manual-selection"),disabled:!a||ct,title:Ne("addOcrBoxTooltip"),className:`flex-grow flex items-center justify-center font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm ${F==="manual-selection"?"bg-amber-600 text-white":"bg-amber-500 hover:bg-amber-600"} disabled:bg-gray-600 disabled:cursor-not-allowed`,children:m.jsx("span",{children:Ne("addOcrBox")})}),m.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[m.jsx("button",{onClick:T,disabled:!I||ct,title:Ne("undo"),className:"flex justify-center items-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-bold p-2 rounded-lg transition-colors duration-200",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),m.jsx("button",{onClick:b,disabled:!z||ct,title:Ne("redo"),className:"flex justify-center items-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-bold p-2 rounded-lg transition-colors duration-200",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{className:"col-span-2 grid grid-cols-5 gap-2",children:[m.jsx("button",{onClick:()=>P(F==="magic-wand"?null:"magic-wand"),disabled:!a||ct,title:Ne("magicWand"),className:`flex items-center justify-center gap-2 font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm ${F==="magic-wand"?"bg-purple-700 text-white":"bg-purple-600 hover:bg-purple-500"} disabled:bg-gray-600 disabled:cursor-not-allowed`,children:m.jsx(tv,{})}),m.jsx("button",{onClick:()=>P(F==="selection-eraser"?null:"selection-eraser"),disabled:!Ut||ct,title:Ne("selectionEraserTooltip"),className:`flex items-center justify-center gap-2 font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm ${F==="selection-eraser"?"bg-fuchsia-700 text-white":"bg-fuchsia-600 hover:bg-fuchsia-500"} disabled:bg-gray-600 disabled:cursor-not-allowed`,children:m.jsx(nv,{})}),m.jsx("button",{onClick:An,disabled:!Ut||ct,title:Ne("inpaintSelection"),className:"flex items-center justify-center gap-2 font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm bg-rose-600 hover:bg-rose-500 disabled:bg-gray-600 disabled:cursor-not-allowed",children:m.jsx(ov,{})}),m.jsx("button",{onClick:tt,disabled:!Ut&&(r==null?void 0:r.type)!=="image",title:Ne("imageEditorTooltip"),className:"flex items-center justify-center font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-600 disabled:cursor-not-allowed",children:m.jsx(lv,{})}),m.jsx("button",{onClick:Oe,disabled:!rn,title:Ne("splitBoxTooltip"),className:"flex items-center justify-center font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-600 disabled:cursor-not-allowed",children:m.jsx(pv,{})})]}),m.jsx("button",{onClick:y,disabled:!u||ct,className:"flex justify-center items-center bg-teal-600 hover:bg-teal-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-1 px-4 rounded-lg transition-colors duration-200 text-sm",children:Ne("selectAll")}),m.jsx("button",{onClick:v,disabled:!r||ct,className:"flex justify-center items-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-bold py-1 px-4 rounded-lg transition-colors duration-200 text-sm",children:Ne("deselect")}),m.jsx("button",{onClick:Dn,disabled:!cn||ct,className:"flex justify-center items-center bg-sky-600 hover:bg-sky-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-1 px-4 rounded-lg transition-colors duration-200 text-sm",children:Ne("recallSelection")}),m.jsx("button",{onClick:pt,disabled:!Ut||ct,className:"flex justify-center items-center bg-red-600 hover:bg-red-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-1 px-4 rounded-lg transition-colors duration-200 text-sm",children:Ne("clearSelection")})]}),(F==="magic-wand"||F==="selection-eraser")&&m.jsxs("div",{className:"pt-3 border-t border-gray-600 space-y-3",children:[F==="magic-wand"&&m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400 block truncate",children:Ne("tolerance",{value:lt})}),m.jsx("input",{type:"range",min:"0",max:"200",value:lt,onChange:_=>ut(parseInt(_.target.value,10)),className:"w-full h-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),F==="selection-eraser"&&m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400 block truncate",children:Ne("eraserSize",{value:ie})}),m.jsx("input",{type:"range",min:"1",max:"300",value:ie,onChange:_=>ge(parseInt(_.target.value,10)),className:"w-full h-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]}),Ut&&m.jsx("div",{className:"pt-3 border-t border-gray-600 space-y-3",children:m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-semibold text-gray-200 -mb-1",children:Ne("inpaint")}),m.jsxs("label",{htmlFor:"auto-color-toggle",className:"flex items-center justify-between cursor-pointer mt-3",children:[m.jsx("span",{className:"text-sm text-gray-200",children:Ne("autoColor")}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"checkbox",id:"auto-color-toggle",className:"sr-only peer",checked:Kt,onChange:_=>bt(_.target.checked)}),m.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),m.jsxs("div",{className:`flex items-center justify-between transition-opacity mt-3 ${Kt?"opacity-50":"opacity-100"}`,children:[m.jsx("label",{className:"text-sm text-gray-200",children:Ne("manualColor")}),m.jsx("button",{ref:Bn,onClick:()=>!Kt&&nn(St==="inpaint"?null:"inpaint"),className:"w-24 h-8 rounded-md border-2 border-gray-500 cursor-pointer disabled:cursor-not-allowed",style:{backgroundColor:bn},"aria-label":Ne("manualColor"),disabled:Kt})]})]})}),m.jsxs("div",{className:"pt-3 border-t border-gray-600",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h4",{className:"text-md font-semibold text-gray-200",children:Ne("textFormatting")}),m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsxs("button",{disabled:et,title:Ne("saveApplyStyle1"),onClick:_=>{_.shiftKey?qe(0):Pe(0)},className:`flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-bold px-2 py-1 rounded-md transition-colors duration-200 text-xs border ${ht[0]?"border-sky-400":"border-transparent"}`,children:[m.jsx("span",{children:"1"}),m.jsx(Kc,{})]}),m.jsxs("button",{disabled:et,title:Ne("saveApplyStyle2"),onClick:_=>{_.shiftKey?qe(1):Pe(1)},className:`flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-bold px-2 py-1 rounded-md transition-colors duration-200 text-xs border ${ht[1]?"border-sky-400":"border-transparent"}`,children:[m.jsx("span",{children:"2"}),m.jsx(Kc,{})]}),m.jsxs("button",{disabled:et,title:Ne("saveApplyStyle3"),onClick:_=>{_.shiftKey?qe(2):Pe(2)},className:`flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-bold px-2 py-1 rounded-md transition-colors duration-200 text-xs border ${ht[2]?"border-sky-400":"border-transparent"}`,children:[m.jsx("span",{children:"3"}),m.jsx(Kc,{})]})]})]}),m.jsxs("div",{className:`space-y-3 ${et?"opacity-50 pointer-events-none":""}`,children:[m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(Em,{fonts:st,selectedFont:Ht.fontFamily||"Patrick Hand",onFontChange:_=>Me({fontFamily:_}),disabled:et,previewPosition:"right"}),m.jsx("input",{type:"number",value:Ht.fontSize||"",placeholder:r?String(r.fontSize):"16",onChange:_=>{const he=parseInt(_.target.value,10);isNaN(he)||Me({fontSize:he})},disabled:et,className:"bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm w-full focus:ring-indigo-500 focus:border-indigo-500"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 items-start pt-2 border-t border-gray-600",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400",children:Ne("textColor")}),m.jsx("button",{ref:Ft,onClick:()=>!et&&nn(St==="text"?null:"text"),className:"w-full h-8 mt-1 rounded-md border-2 border-gray-500 cursor-pointer",style:{backgroundColor:Ht.color||(r==null?void 0:r.color)||"#000000"},"aria-label":Ne("textColor"),disabled:et})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400",children:Ne("stroke")}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsx("div",{className:"flex-1",children:m.jsx("button",{ref:yn,onClick:()=>!et&&nn(St==="stroke"?null:"stroke"),className:"w-full h-8 rounded-md border-2 border-gray-500 cursor-pointer",style:{backgroundColor:Ht.strokeColor||(r==null?void 0:r.strokeColor)||"#FFFFFF"},"aria-label":Ne("stroke"),disabled:et})}),m.jsx("input",{type:"number",min:"0",max:"10",step:"0.5",value:Ht.strokeWidth??((r==null?void 0:r.strokeWidth)||0),onChange:_=>Me({strokeWidth:parseFloat(_.target.value)}),disabled:et,className:"bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm w-20 focus:ring-indigo-500 focus:border-indigo-500 h-8",title:Ne("strokeWidth")})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{className:"flex space-x-1 bg-gray-900 rounded-lg p-1",children:[m.jsx("button",{disabled:et,onClick:()=>Me({fontWeight:Ht.fontWeight==="bold"?"normal":"bold"}),className:`w-full p-1 rounded font-bold ${Ht.fontWeight==="bold"?"bg-indigo-600":"hover:bg-gray-700"}`,children:"B"}),m.jsx("button",{disabled:et,onClick:()=>Me({fontStyle:Ht.fontStyle==="italic"?"normal":"italic"}),className:`w-full p-1 rounded italic ${Ht.fontStyle==="italic"?"bg-indigo-600":"hover:bg-gray-700"}`,children:"I"}),m.jsx("button",{disabled:et,title:Ne("cycleCase"),onClick:Be,className:"w-full p-1 rounded hover:bg-gray-700 font-serif flex justify-center items-center",children:"Aa"}),m.jsx("button",{disabled:et,onClick:()=>Me({isSuperscript:!Ht.isSuperscript}),className:`w-full p-1 rounded ${Ht.isSuperscript?"bg-indigo-600":"hover:bg-gray-700"}`,children:"A"})]}),m.jsxs("div",{className:"flex space-x-1 bg-gray-900 rounded-lg p-1",children:[m.jsx("button",{title:Ne("alignLeft"),disabled:et,onClick:()=>Me({textAlign:"left"}),className:`w-full p-1 rounded flex justify-center items-center ${Ht.textAlign==="left"?"bg-indigo-600":"hover:bg-gray-700"}`,children:m.jsx(sv,{})}),m.jsx("button",{title:Ne("alignCenter"),disabled:et,onClick:()=>Me({textAlign:"center"}),className:`w-full p-1 rounded flex justify-center items-center ${Ht.textAlign==="center"?"bg-indigo-600":"hover:bg-gray-700"}`,children:m.jsx(rv,{})}),m.jsx("button",{title:Ne("alignRight"),disabled:et,onClick:()=>Me({textAlign:"right"}),className:`w-full p-1 rounded flex justify-center items-center ${Ht.textAlign==="right"?"bg-indigo-600":"hover:bg-gray-700"}`,children:m.jsx(uv,{})}),m.jsx("div",{className:"border-l border-gray-700 mx-1"}),m.jsx("button",{title:Ne("bringForward"),disabled:et||!Je,onClick:N,className:"w-full p-1 rounded hover:bg-gray-700 disabled:text-gray-600 disabled:hover:bg-gray-900 flex justify-center items-center",children:m.jsx(iv,{})}),m.jsx("button",{title:Ne("sendBackward"),disabled:et||!Ge,onClick:se,className:"w-full p-1 rounded hover:bg-gray-700 disabled:text-gray-600 disabled:hover:bg-gray-900 flex justify-center items-center",children:m.jsx(av,{})})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 pt-2 border-t border-gray-600",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400 block truncate",children:Ne("lineSpacing",{value:Ht.lineHeight??((r==null?void 0:r.lineHeight)||1.2)})}),m.jsx("input",{type:"range",disabled:et,min:"0.8",max:"3",step:"0.1",value:Ht.lineHeight??((r==null?void 0:r.lineHeight)||1.2),onChange:_=>Me({lineHeight:parseFloat(_.target.value)}),className:"w-full h-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400 block truncate",children:Ne("wordSpacing",{value:Ht.wordSpacing??((r==null?void 0:r.wordSpacing)||0)})}),m.jsx("input",{type:"range",disabled:et,min:"-10",max:"20",step:"0.5",value:Ht.wordSpacing??((r==null?void 0:r.wordSpacing)||0),onChange:_=>Me({wordSpacing:parseFloat(_.target.value)}),className:"w-full h-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]})]})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-2 text-indigo-400",children:Ne("paintingTools")}),m.jsxs("div",{className:`space-y-3 p-3 rounded-lg bg-gray-700 ${a?"":"opacity-50 pointer-events-none"}`,children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("div",{className:"flex-1 flex space-x-1 bg-gray-900 rounded-lg p-1",children:[m.jsx("button",{onClick:()=>P(F==="brush"?null:"brush"),title:Ne("brush"),className:`w-full p-1 rounded flex justify-center items-center transition-colors ${F==="brush"?"bg-rose-600 text-white":"hover:bg-gray-700"}`,children:m.jsx(cv,{})}),m.jsx("button",{onClick:()=>P(F==="eraser"?null:"eraser"),title:Ne("eraser"),className:`w-full p-1 rounded flex justify-center items-center transition-colors ${F==="eraser"?"bg-rose-600 text-white":"hover:bg-gray-700"}`,children:m.jsx(dv,{})})]}),m.jsxs("div",{className:"flex-1 flex items-center justify-end space-x-2",children:[m.jsx("label",{htmlFor:"brush-color-picker",className:"text-sm text-gray-400",children:Ne("color")}),m.jsx("button",{id:"brush-color-picker",ref:Zt,onClick:()=>nn(St==="brush"?null:"brush"),className:"w-16 h-8 rounded-md border-2 border-gray-500 cursor-pointer disabled:cursor-not-allowed disabled:opacity-50",style:{backgroundColor:H},"aria-label":Ne("color"),disabled:F==="eraser"})]})]}),(F==="brush"||F==="eraser")&&m.jsxs("div",{className:"pt-3 border-t border-gray-600 space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400 block truncate",children:Ne("hardness",{value:Math.round(me*100)})}),m.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:me,onChange:_=>ce(parseFloat(_.target.value)),className:"w-full h-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),F==="brush"&&m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400 block truncate",children:Ne("opacity",{value:Math.round(De*100)})}),m.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:De,onChange:_=>Z(parseFloat(_.target.value)),className:"w-full h-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400 block truncate",children:Ne("size",{value:_e})}),m.jsx("input",{type:"range",min:"1",max:"300",value:_e,onChange:_=>ye(parseInt(_.target.value,10)),className:"w-full h-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-2 text-indigo-400",children:Ne("export")}),m.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg grid grid-cols-3 gap-2",children:[m.jsx("button",{onClick:gt,disabled:!a||ct,title:Ne("saveCurrentImage"),className:"flex justify-center items-center w-full bg-green-600 hover:bg-green-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-1 px-4 rounded-lg transition-colors duration-200",children:m.jsx(fv,{})}),m.jsx("button",{onClick:fe,disabled:!a||ct,title:Ne("saveAllToZip"),className:"flex justify-center items-center w-full bg-teal-600 hover:bg-teal-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-1 px-4 rounded-lg transition-colors duration-200",children:m.jsx(hv,{})}),m.jsx("button",{onClick:it,disabled:!a||ct,title:Ne("saveAsPdfTooltip"),className:"flex justify-center items-center w-full bg-red-600 hover:bg-red-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-1 px-4 rounded-lg transition-colors duration-200",children:m.jsx(gv,{})})]})]}),St==="text"&&m.jsx(ss,{triggerRef:Ft,color:Ht.color||(r==null?void 0:r.color)||"#000000",onChange:_=>Me({color:_}),onClose:()=>nn(null),onActivateEyedropper:()=>q("color"),labelPrefix:"text"}),St==="stroke"&&m.jsx(ss,{triggerRef:yn,color:Ht.strokeColor||(r==null?void 0:r.strokeColor)||"#FFFFFF",onChange:_=>Me({strokeColor:_}),onClose:()=>nn(null),onActivateEyedropper:()=>q("strokeColor"),labelPrefix:"stroke"}),St==="brush"&&m.jsx(ss,{triggerRef:Zt,color:H,onChange:ee,onClose:()=>nn(null),onActivateEyedropper:()=>q("brush"),labelPrefix:"brush"}),St==="inpaint"&&m.jsx(ss,{triggerRef:Bn,color:bn,onChange:le,onClose:()=>nn(null),onActivateEyedropper:()=>q("inpaint"),labelPrefix:"inpaint"})]})},yv=({textBoxes:o,selectedBoxIds:n,onBoxClick:i,onTextBoxesUpdate:a})=>{const[u,r]=A.useState(null),{t:p}=fo(),y=A.useMemo(()=>o.filter(T=>T.type==="text"||T.type==="image").reverse(),[o]),v=(T,b)=>{T.dataTransfer.setData("text/plain",b.toString()),T.dataTransfer.effectAllowed="move"},g=(T,b)=>{T.preventDefault(),u!==b&&r(b)},S=()=>{r(null)},x=(T,b)=>{T.preventDefault(),r(null);const I=parseInt(T.dataTransfer.getData("text/plain"),10);if(I===b)return;const z=[...o],q=z.findIndex(ee=>ee.id===I);if(q===-1||z.findIndex(ee=>ee.id===b)===-1)return;const[P]=z.splice(q,1),H=z.findIndex(ee=>ee.id===b);q>H?z.splice(H+1,0,P):z.splice(H,0,P),a(z)};return m.jsxs("div",{className:"h-full bg-gray-800 p-4 flex flex-col overflow-y-auto",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2 text-indigo-400 flex-shrink-0",children:p("layers")}),m.jsx("div",{className:"flex-grow space-y-1",children:y.length>0?y.map(T=>{const b=n.includes(T.id),I=u===T.id,z=T.type==="image"&&T.imageDataUrl?m.jsxs("div",{className:"flex items-center min-w-0",children:[m.jsx("img",{src:T.imageDataUrl,alt:"layer thumbnail",className:"w-8 h-8 object-contain rounded-sm mr-2 bg-gray-900"}),m.jsx("span",{className:"text-sm font-medium truncate text-gray-200 italic",title:T.plainText,children:T.plainText||"[Image]"})]}):m.jsx("span",{className:"text-sm font-medium truncate text-gray-200",children:T.plainText||p("emptyTextBox")});return m.jsx("div",{draggable:!0,onDragStart:q=>v(q,T.id),onDrop:q=>x(q,T.id),onDragOver:q=>g(q,T.id),onDragLeave:S,onClick:q=>i(T.id,q.shiftKey),className:`p-2 rounded-lg cursor-pointer transition-all duration-150 border ${b?"bg-indigo-700 border-indigo-500":"bg-gray-700 hover:bg-gray-600 border-transparent"} ${I?"border-dashed border-sky-400":""}`,title:T.plainText,children:z},T.id)}):m.jsx("div",{className:"text-center text-gray-400 mt-8",children:m.jsx("p",{children:p("noTextLayers")})})})]})},wm="comic-translator-profiles",Am="comic-translator-active-profile-id",bm="comic-translator-visible-fonts",vv={fontFamily:"Patrick Hand",fontSize:50,textAlign:"center",fontWeight:"bold",fontStyle:"normal",lineHeight:1.2,wordSpacing:0,color:"#000000",strokeColor:"#FFFFFF",strokeWidth:0,textTransform:"uppercase"},Nn={targetLanguage:"Italian",interfaceLanguage:"en",defaultTextFormat:vv,brushColor:"#FFFFFF",paintBrushSize:15,selectionEraserSize:15,brushShape:"round",brushHardness:1,brushOpacity:1,panelWidths:{left:20,center:55,right:25},textAreaHeights:{source:80,display:120},inpaintAutoColor:!0,inpaintManualColor:"#FFFFFF",styleSlots:[null,null,null]},_m=()=>({id:"default",name:"Default",settings:Nn}),xv=()=>{try{const o=localStorage.getItem(wm);if(o){const n=JSON.parse(o);if(Array.isArray(n)&&n.every(i=>i.id&&i.name&&i.settings))return n.map(i=>({...i,settings:{...Nn,...i.settings,defaultTextFormat:{...Nn.defaultTextFormat,...i.settings.defaultTextFormat||{}}}}))}}catch(o){console.error("Failed to load or parse profiles from localStorage:",o)}return[_m()]},Sv=o=>{try{localStorage.setItem(wm,JSON.stringify(o))}catch(n){console.error("Failed to save profiles to localStorage:",n)}},Cv=()=>localStorage.getItem(Am),Tv=o=>{localStorage.setItem(Am,o)},Ev=o=>{try{localStorage.setItem(bm,JSON.stringify(o))}catch(n){console.error("Failed to save visible fonts to localStorage:",n)}},wv=()=>{try{const o=localStorage.getItem(bm);if(o){const n=JSON.parse(o);if(Array.isArray(n))return n}}catch(o){console.error("Failed to load or parse visible fonts from localStorage:",o)}return null},cd="gemini-api-key",dd=()=>{try{const o=localStorage.getItem(cd);if(o)return o}catch(o){console.error("Failed to read API key from localStorage:",o)}return"PLACEHOLDER_API_KEY"},Av=()=>{try{return localStorage.getItem(cd)}catch(o){return console.error("Failed to read API key from localStorage:",o),null}},bv=o=>{try{localStorage.setItem(cd,o)}catch(n){console.error("Failed to save API key to localStorage:",n)}},_v=["English","Spanish","French","German","Italian","Portuguese","Japanese","Korean","Chinese (Simplified)","Russian","Arabic"],Mv=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#808080","#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B","#424242","#E0E0E0","#FF8A65","#AED581","#4FC3F7","#7986CB","#BA68C8","#F06292","#FFE082","#A1887F","#FFD180","#8D6E63"],Rv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 9a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),Nv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM5 9a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm-2 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm2 4a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})}),Dv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM9 9a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1zm-6 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm6 4a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z",clipRule:"evenodd"})}),Xc=({color:o,onChange:n,onClose:i,labelPrefix:a})=>{const u=wo.useRef(null);return wo.useEffect(()=>{const r=p=>{u.current&&!u.current.contains(p.target)&&i()};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[i]),m.jsxs("div",{ref:u,className:"absolute z-20 bg-gray-800 p-3 rounded-lg shadow-2xl border border-gray-600 w-64 right-0 mt-2",children:[m.jsx("div",{className:"grid grid-cols-8 gap-1 mb-3",children:Mv.map(r=>m.jsx("button",{onClick:()=>n(r),className:"w-6 h-6 rounded-full cursor-pointer transition-transform transform hover:scale-110 border-2",style:{backgroundColor:r,borderColor:o.toLowerCase()===r.toLowerCase()?"#38bdf8":"transparent"},"aria-label":`Color ${r}`},r))}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("label",{htmlFor:`${a}-color-picker-input`,className:"relative w-10 h-10 rounded-md overflow-hidden cursor-pointer border-2 border-gray-500",children:m.jsx("input",{id:`${a}-color-picker-input`,type:"color",value:o,onChange:r=>n(r.target.value),className:"absolute -top-2 -left-2 w-20 h-20 cursor-pointer border-none p-0 m-0"})}),m.jsx("input",{type:"text",value:o.toUpperCase(),onChange:r=>n(r.target.value),className:"bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm w-full focus:ring-indigo-500 focus:border-indigo-500","aria-label":"Hex color code"})]})]})},Iv=({profiles:o,activeProfileId:n,currentUnsavedSettings:i,onSave:a,onClose:u,fonts:r,visibleFonts:p,appVersion:y,onLoadSystemFonts:v,onLoadFontsFromFiles:g,onClearCustomFonts:S})=>{const{t:x}=fo(),[T,b]=A.useState("profiles"),[I,z]=A.useState(()=>o.map(le=>le.id===n?{...le,settings:i}:le)),[q,F]=A.useState(n),[P,H]=A.useState(""),[ee,_e]=A.useState(null),[ye,ie]=A.useState(new Set(p)),ge=A.useRef(null),me=A.useRef(null),[ce,De]=A.useState(""),Z=A.useMemo(()=>"queryLocalFonts"in window,[]),[gt,fe]=A.useState("");A.useEffect(()=>{fe(Av()||"")},[]);const it=()=>{bv(gt),alert("API Key saved successfully!")},N=A.useMemo(()=>{var le;return(le=I.find(tt=>tt.id===q))==null?void 0:le.settings},[I,q]),se=(le,tt)=>{z(ht=>ht.map(at=>{if(at.id===q){const It=le.split("."),Fe=JSON.parse(JSON.stringify(at.settings));let sn=Fe;for(let Ne=0;Ne<It.length-1;Ne++){const ct=It[Ne];sn=sn[ct]}return sn[It[It.length-1]]=tt,{...at,settings:Fe}}return at}))},Je=(le,tt)=>{if(!N)return;const ht={...N.panelWidths};(isNaN(tt)||tt<0)&&(tt=0);let at=ht.left,It=ht.right;le==="left"?at=tt:It=tt,at+It>100&&(le==="left"?It=100-at:at=100-It);const Fe=100-at-It;se("panelWidths",{left:at,center:Fe,right:It})},Ge=()=>{var ht;if(!P.trim()){alert("Please enter a name for the new profile.");return}const le=(ht=I.find(at=>at.id===q))==null?void 0:ht.settings;if(!le)return;const tt={id:Date.now().toString(),name:P.trim(),settings:le};z(at=>[...at,tt]),F(tt.id),H("")},st=()=>{var le;if(I.length<=1){alert("Cannot delete the last profile.");return}if(window.confirm(`Are you sure you want to delete the "${(le=I.find(tt=>tt.id===q))==null?void 0:le.name}" profile?`)){const tt=I.filter(ht=>ht.id!==q);z(tt),F(tt[0].id)}},U=()=>{a(I,q,Array.from(ye))},te=()=>{const le=Nn;se("panelWidths",le.panelWidths),se("textAreaHeights",le.textAreaHeights)},be=()=>{const le=I.find(sn=>sn.id===q);if(!le){alert("Could not find the active profile to export.");return}const tt=JSON.stringify(le,null,2),ht=new Blob([tt],{type:"application/json"}),at=URL.createObjectURL(ht),It=document.createElement("a");It.href=at;const Fe=le.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();It.download=`${Fe}.prof`,document.body.appendChild(It),It.click(),document.body.removeChild(It),URL.revokeObjectURL(at)},Te=()=>{var le;(le=ge.current)==null||le.click()},je=le=>{var at;const tt=(at=le.target.files)==null?void 0:at[0];if(!tt)return;const ht=new FileReader;ht.onload=It=>{var Fe;try{const sn=(Fe=It.target)==null?void 0:Fe.result;let Ne=JSON.parse(sn);if(!Ne.id||!Ne.name||!Ne.settings)throw new Error("Invalid profile format.");const ct=Nn,rn={...ct,...Ne.settings,defaultTextFormat:{...ct.defaultTextFormat,...Ne.settings.defaultTextFormat||{}},panelWidths:Ne.settings.panelWidths||ct.panelWidths,textAreaHeights:Ne.settings.textAreaHeights||ct.textAreaHeights};Ne.settings=rn;const et=I.findIndex(St=>St.id===Ne.id);if(et>-1){if(window.confirm(`A profile with the ID "${Ne.id}" (${I[et].name}) already exists. Do you want to overwrite it?`)){const St=[...I];St[et]=Ne,z(St),F(Ne.id)}}else z(St=>[...St,Ne]),F(Ne.id)}catch(sn){alert(`Failed to import profile: ${sn instanceof Error?sn.message:"Unknown error"}`)}finally{le.target&&(le.target.value="")}},ht.readAsText(tt)},lt=q==="default",ut=[{id:"profiles",label:x("profiles")},{id:"translation",label:x("translation")},{id:"text",label:x("defaultTextStyle")},{id:"inpainting",label:x("cleaningInpainting")},{id:"layout",label:x("layout")},{id:"fonts",label:x("fontVisibility")},{id:"shortcuts",label:x("shortcuts")},{id:"apiKey",label:x("apiKey")}],Ut=(le,tt)=>{ie(ht=>{const at=new Set(ht);return tt?at.add(le):at.delete(le),at})},pt=()=>{ie(new Set(r))},Dn=()=>{ie(new Set)},cn=async()=>{De(x("loading"));const le=await v();le.status==="success"?De(x("systemFontsLoaded",{count:le.count})):De(x("systemFontsPermissionDenied"))},An=()=>{var le;(le=me.current)==null||le.click()},Kt=async le=>{const tt=le.target.files;if(!tt||tt.length===0)return;De(x("loading"));const ht=await g(tt);let at="";ht.loaded.length>0&&(at+=x("fontsLoaded",{count:ht.loaded.length})),ht.failed.length>0&&(at+=(at?" ":"")+x("fontsFailed",{count:ht.failed.length})),De(at),le.target&&(le.target.value="")},bt=async()=>{window.confirm(x("clearStoredFontsConfirmation"))&&(De(x("loading")),await S()?(alert(x("fontsCleared")),window.location.reload()):De("Failed to clear fonts."))},bn=A.useMemo(()=>[{keyKey:"shortcutCtrlDrag",descriptionKey:"panCanvas"},{keyKey:"shortcutMouseWheel",descriptionKey:"zoomCanvas"},{keyKey:"shortcutShiftClick",descriptionKey:"addOrRemoveBoxSelection"},{keyKey:"shortcutArrowKeys",descriptionKey:"nudgeSelectedBox"},{keyKey:"shortcutShiftArrowKeys",descriptionKey:"nudgeSelectedBoxLarge"},{keyKey:"shortcutDelBackspace",descriptionKey:"deleteOrInpaint"},{keyKey:"shortcutEsc",descriptionKey:"deselectClearSelection"},{keyKey:"shortcutCtrlZCtrlY",descriptionKey:"undoRedo"},{keyKey:"shortcutAltA",descriptionKey:"runAuto"},{keyKey:"shortcutAltO",descriptionKey:"runOcr"},{keyKey:"shortcutAltT",descriptionKey:"runTranslate"},{keyKey:"shortcutShiftF1",descriptionKey:"saveStyle1"},{keyKey:"shortcutShiftF2",descriptionKey:"saveStyle2"},{keyKey:"shortcutShiftF3",descriptionKey:"saveStyle3"},{keyKey:"shortcutF1",descriptionKey:"applyStyle1"},{keyKey:"shortcutF2",descriptionKey:"applyStyle2"},{keyKey:"shortcutF3",descriptionKey:"applyStyle3"},{keyKey:"shortcutShiftCtrlX",descriptionKey:"removePaintStrokes"},{keyKey:"shortcutCtrl1",descriptionKey:"zoomTo100"},{keyKey:"shortcutAltB",descriptionKey:"toggleBrushTool"},{keyKey:"shortcutAltR",descriptionKey:"setBrushRed"},{keyKey:"shortcutAltW",descriptionKey:"setBrushWhite"}],[]);return N?m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:m.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-4xl h-full max-h-[80vh] shadow-xl border border-gray-600 flex overflow-hidden",children:[m.jsxs("aside",{className:"w-1/4 bg-gray-900 p-4 border-r border-gray-700 flex flex-col",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold mb-6 text-indigo-400",children:x("preferences")}),m.jsx("nav",{children:m.jsx("ul",{children:ut.map(le=>m.jsx("li",{children:m.jsx("button",{onClick:()=>b(le.id),className:`w-full text-left p-2 rounded-md transition-colors text-lg ${T===le.id?"bg-indigo-600 text-white":"hover:bg-gray-700"}`,children:le.label})},le.id))})})]}),m.jsx("div",{className:"mt-auto pt-4 text-xs text-gray-500 break-words",children:y})]}),m.jsxs("main",{className:"w-3/4 p-6 overflow-y-auto",children:[T==="profiles"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:x("manageProfiles")}),m.jsxs("div",{className:"space-y-4 bg-gray-700 p-4 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"profile-select",className:"block text-sm font-medium text-gray-300 mb-1",children:x("activeProfile")}),m.jsx("select",{id:"profile-select",value:q,onChange:le=>F(le.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500",children:I.map(le=>m.jsx("option",{value:le.id,children:le.name},le.id))}),m.jsx("p",{className:"text-xs text-gray-400 mt-2",children:x("activeProfileHelp")})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-gray-600",children:[m.jsx("input",{ref:ge,type:"file",accept:".prof",onChange:je,className:"hidden"}),m.jsx("button",{onClick:Te,className:"w-full bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-3 rounded-lg transition-colors",children:x("importProfile")}),m.jsx("button",{onClick:be,className:"w-full bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-3 rounded-lg transition-colors",children:x("exportProfile")})]}),m.jsx("button",{onClick:st,disabled:lt,className:"w-full bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",children:x(lt?"cannotDeleteDefault":"deleteProfile")})]}),m.jsxs("div",{className:"mt-6 space-y-4 bg-gray-700 p-4 rounded-lg",children:[m.jsx("h4",{className:"text-lg font-semibold text-white",children:x("createNewProfile")}),m.jsx("p",{className:"text-sm text-gray-400",children:x("createNewProfileHelp")}),m.jsx("input",{type:"text",placeholder:x("newProfileNamePlaceholder"),value:P,onChange:le=>H(le.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500"}),m.jsx("button",{onClick:Ge,className:"w-full bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:x("saveAsNewProfile")})]})]}),T==="translation"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:x("translationSettings")}),m.jsxs("div",{className:"space-y-6 bg-gray-700 p-4 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"language-select-settings",className:"block text-sm font-medium text-gray-300",children:x("defaultTargetLanguage")}),m.jsx("select",{id:"language-select-settings",value:N.targetLanguage,onChange:le=>se("targetLanguage",le.target.value),className:"w-full mt-1 bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500",children:_v.map(le=>m.jsx("option",{value:le,children:x(le)},le))})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"interface-language-select",className:"block text-sm font-medium text-gray-300",children:x("interfaceLanguage")}),m.jsx("select",{id:"interface-language-select",value:N.interfaceLanguage,onChange:le=>se("interfaceLanguage",le.target.value),className:"w-full mt-1 bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(Fy).map(([le,tt])=>m.jsx("option",{value:le,children:tt},le))})]})]})]}),T==="text"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:x("defaultTextStyle")}),m.jsxs("div",{className:"space-y-4 p-3 rounded-lg bg-gray-700",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(Em,{fonts:r,selectedFont:N.defaultTextFormat.fontFamily,onFontChange:le=>se("defaultTextFormat.fontFamily",le),previewPosition:"right"}),m.jsx("input",{type:"number",value:N.defaultTextFormat.fontSize,onChange:le=>se("defaultTextFormat.fontSize",parseInt(le.target.value,10)),className:"bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm w-full focus:ring-indigo-500 focus:border-indigo-500"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{className:"flex space-x-1 bg-gray-900 rounded-lg p-1",children:[m.jsx("button",{onClick:()=>se("defaultTextFormat.fontWeight",N.defaultTextFormat.fontWeight==="bold"?"normal":"bold"),className:`w-full p-1 rounded font-bold ${N.defaultTextFormat.fontWeight==="bold"?"bg-indigo-600":"hover:bg-gray-700"}`,children:"B"}),m.jsx("button",{onClick:()=>se("defaultTextFormat.fontStyle",N.defaultTextFormat.fontStyle==="italic"?"normal":"italic"),className:`w-full p-1 rounded italic ${N.defaultTextFormat.fontStyle==="italic"?"bg-indigo-600":"hover:bg-gray-700"}`,children:"I"}),m.jsx("button",{title:x("defaultToUppercase"),onClick:()=>se("defaultTextFormat.textTransform",(N.defaultTextFormat.textTransform||"none")==="uppercase"?"none":"uppercase"),className:`w-full p-1 rounded font-serif flex justify-center items-center ${(N.defaultTextFormat.textTransform||"none")==="uppercase"?"bg-indigo-600":"hover:bg-gray-700"}`,children:"Aa"})]}),m.jsxs("div",{className:"flex space-x-1 bg-gray-900 rounded-lg p-1",children:[m.jsx("button",{title:x("alignLeft"),onClick:()=>se("defaultTextFormat.textAlign","left"),className:`w-full p-1 rounded flex justify-center items-center ${N.defaultTextFormat.textAlign==="left"?"bg-indigo-600":"hover:bg-gray-700"}`,children:m.jsx(Rv,{})}),m.jsx("button",{title:x("alignCenter"),onClick:()=>se("defaultTextFormat.textAlign","center"),className:`w-full p-1 rounded flex justify-center items-center ${N.defaultTextFormat.textAlign==="center"?"bg-indigo-600":"hover:bg-gray-700"}`,children:m.jsx(Nv,{})}),m.jsx("button",{title:x("alignRight"),onClick:()=>se("defaultTextFormat.textAlign","right"),className:`w-full p-1 rounded flex justify-center items-center ${N.defaultTextFormat.textAlign==="right"?"bg-indigo-600":"hover:bg-gray-700"}`,children:m.jsx(Dv,{})})]})]}),m.jsxs("div",{className:"relative flex justify-between items-center",children:[m.jsx("label",{className:"text-sm text-gray-400",children:x("textColor")}),m.jsx("button",{onClick:()=>_e(ee==="text"?null:"text"),className:"w-24 h-8 rounded-md border-2 border-gray-500 cursor-pointer",style:{backgroundColor:N.defaultTextFormat.color}}),ee==="text"&&m.jsx(Xc,{color:N.defaultTextFormat.color,onChange:le=>se("defaultTextFormat.color",le),onClose:()=>_e(null),labelPrefix:"settings-text"})]}),m.jsxs("div",{className:"space-y-3 pt-3 border-t border-gray-600",children:[m.jsx("h4",{className:"text-sm font-medium text-gray-300 -mb-1",children:x("stroke")}),m.jsxs("div",{className:"relative flex justify-between items-center",children:[m.jsx("label",{className:"text-sm text-gray-400",children:x("color")}),m.jsx("button",{onClick:()=>_e(ee==="stroke"?null:"stroke"),className:"w-24 h-8 rounded-md border-2 border-gray-500 cursor-pointer",style:{backgroundColor:N.defaultTextFormat.strokeColor}}),ee==="stroke"&&m.jsx(Xc,{color:N.defaultTextFormat.strokeColor,onChange:le=>se("defaultTextFormat.strokeColor",le),onClose:()=>_e(null),labelPrefix:"settings-stroke"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("label",{className:"text-sm text-gray-400",children:x("strokeWidth")}),m.jsx("input",{type:"number",min:"0",max:"10",step:"0.5",value:N.defaultTextFormat.strokeWidth,onChange:le=>se("defaultTextFormat.strokeWidth",parseFloat(le.target.value)),className:"bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm w-24 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400",children:x("lineSpacing",{value:N.defaultTextFormat.lineHeight})}),m.jsx("input",{type:"range",min:"0.8",max:"3",step:"0.1",value:N.defaultTextFormat.lineHeight,onChange:le=>se("defaultTextFormat.lineHeight",parseFloat(le.target.value)),className:"w-full h-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-gray-400",children:x("wordSpacing",{value:N.defaultTextFormat.wordSpacing})}),m.jsx("input",{type:"range",min:"-10",max:"20",step:"0.5",value:N.defaultTextFormat.wordSpacing,onChange:le=>se("defaultTextFormat.wordSpacing",parseFloat(le.target.value)),className:"w-full h-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]})]}),T==="inpainting"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:x("cleaningInpainting")}),m.jsxs("div",{className:"space-y-4 bg-gray-700 p-4 rounded-lg",children:[m.jsx("p",{className:"text-gray-400 text-sm",children:x("inpaintingHelp")}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("label",{htmlFor:"default-auto-color-toggle",className:"text-sm font-medium text-gray-300",children:x("defaultAutoColor")}),m.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",id:"default-auto-color-toggle",className:"sr-only peer",checked:N.inpaintAutoColor,onChange:le=>se("inpaintAutoColor",le.target.checked)}),m.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),m.jsxs("div",{className:`relative flex justify-between items-center transition-opacity ${N.inpaintAutoColor?"opacity-50":""}`,children:[m.jsx("label",{className:"text-sm font-medium text-gray-300",children:x("defaultManualColor")}),m.jsx("button",{onClick:()=>!N.inpaintAutoColor&&_e(ee==="inpaint"?null:"inpaint"),className:"w-24 h-8 rounded-md border-2 border-gray-500 cursor-pointer disabled:cursor-not-allowed",style:{backgroundColor:N.inpaintManualColor},disabled:N.inpaintAutoColor}),ee==="inpaint"&&m.jsx(Xc,{color:N.inpaintManualColor,onChange:le=>se("inpaintManualColor",le),onClose:()=>_e(null),labelPrefix:"settings-inpaint"})]})]})]}),T==="layout"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:x("defaultLayout")}),m.jsxs("div",{className:"space-y-4 bg-gray-700 p-4 rounded-lg",children:[m.jsx("p",{className:"text-gray-400 text-sm",children:x("layoutHelp")}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-lg font-semibold text-gray-200 mb-2",children:x("panelWidths")}),m.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300",children:x("leftPanel")}),m.jsx("input",{type:"number",value:N.panelWidths.left,onChange:le=>Je("left",parseInt(le.target.value,10)),className:"mt-1 w-full bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300",children:x("centerPanel")}),m.jsx("div",{className:"mt-1 w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-sm text-gray-400",children:N.panelWidths.center.toFixed(0)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300",children:x("rightPanel")}),m.jsx("input",{type:"number",value:N.panelWidths.right,onChange:le=>Je("right",parseInt(le.target.value,10)),className:"mt-1 w-full bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-lg font-semibold text-gray-200 mb-2",children:x("textAreaHeights")}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300",children:x("sourceTextArea")}),m.jsx("input",{type:"number",value:N.textAreaHeights.source,onChange:le=>se("textAreaHeights.source",parseInt(le.target.value,10)),className:"mt-1 w-full bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300",children:x("displayTextArea")}),m.jsx("input",{type:"number",value:N.textAreaHeights.display,onChange:le=>se("textAreaHeights.display",parseInt(le.target.value,10)),className:"mt-1 w-full bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),m.jsx("div",{className:"pt-4 border-t border-gray-600",children:m.jsx("button",{onClick:te,className:"w-full bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:x("resetLayout")})})]})]}),T==="fonts"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:x("fontVisibility")}),m.jsx("p",{className:"text-gray-400 mb-4",children:x("fontVisibilityHelp")}),m.jsxs("div",{className:"flex space-x-2 mb-4",children:[m.jsx("button",{onClick:pt,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:x("selectAllFonts")}),m.jsx("button",{onClick:Dn,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:x("deselectAllFonts")})]}),m.jsx("div",{className:"bg-gray-700 p-4 rounded-lg max-h-72 overflow-y-auto grid grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-2",children:r.map(le=>m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",id:`font-toggle-${le}`,checked:ye.has(le),onChange:tt=>Ut(le,tt.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),m.jsx("label",{htmlFor:`font-toggle-${le}`,className:"ml-2 text-sm text-gray-200 truncate",style:{fontFamily:le},children:le})]},le))}),m.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-600",children:[m.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:x("systemFontsSectionTitle")}),Z?m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"text-gray-400 text-sm mb-2",children:x("loadSystemFontsHelp")}),m.jsx("button",{onClick:cn,className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:x("loadSystemFonts")})]}):m.jsxs(m.Fragment,{children:[m.jsx("input",{ref:me,type:"file",multiple:!0,accept:".ttf,.otf,.woff,.woff2",onChange:Kt,className:"hidden"}),m.jsx("p",{className:"text-gray-400 text-sm mb-2",children:x("fontApiNotSupportedFallback")}),m.jsx("button",{onClick:An,className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:x("loadFontFiles")})]}),ce&&m.jsx("p",{className:"text-gray-300 mt-2 text-sm",children:ce}),m.jsx("div",{className:"mt-4",children:m.jsx("button",{onClick:bt,className:"bg-red-700 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:x("clearStoredFonts")})})]})]}),T==="shortcuts"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:x("shortcuts")}),m.jsxs("div",{className:"space-y-4 bg-gray-700 p-4 rounded-lg",children:[m.jsx("p",{className:"text-gray-300 text-sm",children:x("shortcutsHelp")}),m.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:bn.map(({keyKey:le,descriptionKey:tt})=>{const ht=x(le);return m.jsxs("div",{className:"flex justify-between items-center bg-gray-800 p-3 rounded-md text-sm",children:[m.jsx("span",{className:"text-gray-200",children:x(tt)}),m.jsx("div",{className:"flex space-x-1",children:ht.split(" / ").map(at=>m.jsx("code",{className:"bg-gray-900 px-2 py-1 rounded text-indigo-400 font-mono border border-gray-700",children:at},at))})]},le)})})]})]}),T==="apiKey"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:x("apiKey")}),m.jsxs("div",{className:"space-y-4 bg-gray-700 p-4 rounded-lg",children:[m.jsx("p",{className:"text-gray-300",children:"La chiave API verr salvata nel browser. Se vuota, l'applicazione tenter di utilizzare la chiave dal file `.env.local` come fallback."}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"api-key-input",className:"block text-sm font-medium text-gray-300 mb-1",children:"Google Gemini API Key"}),m.jsx("input",{id:"api-key-input",type:"password",value:gt,onChange:le=>fe(le.target.value),placeholder:"Enter your API Key here",className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),m.jsx("button",{onClick:it,className:"w-full bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Salva Chiave API"}),m.jsx("p",{className:"text-gray-300 text-sm pt-2 border-t border-gray-600",children:"Per ottenere una chiave, visita Google AI Studio."})]})]})]}),m.jsxs("div",{className:"absolute bottom-0 right-0 p-4 bg-gray-800 w-3/4 flex justify-end space-x-3 border-t border-gray-700",children:[m.jsx("button",{onClick:u,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:x("cancel")}),m.jsx("button",{onClick:U,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:x("saveAndClose")})]})]})}):null},Uv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 cursor-move",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),kv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),zv=({imageUrl:o,onClose:n})=>{const{t:i}=fo(),[a,u]=A.useState({x:window.innerWidth-520,y:80}),[r]=A.useState({width:500,height:600}),[p,y]=A.useState(!1),[v,g]=A.useState({x:0,y:0}),S=A.useRef(null),x=A.useRef(null),[T,b]=A.useState(null),[I,z]=A.useState(1),[q,F]=A.useState({x:0,y:0}),P=A.useRef(!1);A.useEffect(()=>{const fe=new Image;fe.src=o,fe.onload=()=>{b(fe);const it=x.current;if(it){const{clientWidth:N,clientHeight:se}=it,Ge=Math.min(N/fe.width,se/fe.height)*.95;z(Ge),F({x:(N-fe.width*Ge)/2,y:(se-fe.height*Ge)/2})}}},[o]);const H=A.useCallback((fe,it)=>({x:(fe-q.x)/I,y:(it-q.y)/I}),[q,I]),ee=A.useCallback(()=>{const fe=S.current;if(!fe||!T)return;const it=fe.getContext("2d");it&&(fe.width=fe.clientWidth,fe.height=fe.clientHeight,it.clearRect(0,0,fe.width,fe.height),it.drawImage(T,q.x,q.y,T.width*I,T.height*I))},[T,q,I]);A.useEffect(()=>{ee();const fe=()=>ee();return window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe)},[ee]);const _e=fe=>{y(!0),g({x:fe.clientX-a.x,y:fe.clientY-a.y})},ye=A.useCallback(fe=>{p&&u({x:fe.clientX-v.x,y:fe.clientY-v.y})},[p,v]),ie=A.useCallback(()=>{y(!1)},[]);A.useEffect(()=>(p&&(window.addEventListener("mousemove",ye),window.addEventListener("mouseup",ie)),()=>{window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",ie)}),[p,ye,ie]);const ge=fe=>{const it=S.current;if(!it)return{x:0,y:0};const N=it.getBoundingClientRect();return{x:fe.clientX-N.left,y:fe.clientY-N.top}},me=fe=>{P.current=!0},ce=fe=>{P.current&&F(it=>({x:it.x+fe.movementX,y:it.y+fe.movementY}))},De=()=>{P.current=!1},Z=()=>{P.current=!1},gt=fe=>{if(fe.preventDefault(),!T)return;const{x:it,y:N}=ge(fe),se=1.1,Je=fe.deltaY<0?I*se:I/se,Ge=Math.max(.1,Math.min(Je,10)),st=H(it,N);z(Ge),F({x:it-st.x*Ge,y:N-st.y*Ge})};return A.useEffect(()=>{ee()},[q,I,ee]),m.jsxs("div",{className:"absolute bg-gray-800 border border-indigo-500 rounded-lg shadow-2xl flex flex-col z-40",style:{top:a.y,left:a.x,width:r.width,height:r.height},children:[m.jsxs("div",{className:"bg-gray-900 p-2 flex justify-between items-center cursor-move",onMouseDown:_e,children:[m.jsxs("div",{className:"flex items-center text-gray-300",children:[m.jsx(Uv,{}),m.jsx("span",{className:"ml-2 font-semibold",children:i("originalImage")})]}),m.jsx("button",{onClick:n,className:"p-1 rounded-full text-gray-400 hover:bg-gray-700 hover:text-white",children:m.jsx(kv,{})})]}),m.jsx("div",{ref:x,className:"flex-grow bg-gray-900 overflow-hidden",children:m.jsx("canvas",{ref:S,className:"w-full h-full cursor-grab",onMouseDown:me,onMouseMove:ce,onMouseUp:De,onMouseLeave:Z,onWheel:gt})})]})},Pv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{fillRule:"evenodd",d:"M14.707 2.293a1 1 0 011.414 0l2 2a1 1 0 010 1.414l-11 11a1 1 0 01-.707.293H3a1 1 0 01-1-1v-2.414a1 1 0 01.293-.707l11-11zM14 4l2 2-9 9H5v-2l9-9z",clipRule:"evenodd"}),m.jsx("path",{fillRule:"evenodd",d:"M15 8a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})]}),Lv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M15.206 2.343a1.5 1.5 0 012.122 0l1.414 1.414a1.5 1.5 0 010 2.121L8.343 18.278a1.5 1.5 0 01-2.122 0l-4.242-4.242a1.5 1.5 0 010-2.121L15.206 2.343zM7.28 9.28L3.037 13.523l4.243 4.243 4.242-4.243-4.242-4.243z",clipRule:"evenodd"})}),Fv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M10 3.5a1.5 1.5 0 011.06.44l3.536 3.535a1.5 1.5 0 010 2.122L6.12 18.07a1.5 1.5 0 01-2.121 0l-.707-.707a1.5 1.5 0 010-2.121L11.061 4.44A1.5 1.5 0 0110 3.5zM12 7.5a1 1 0 11-2 0 1 1 0 012 0z"}),m.jsx("path",{d:"M4.343 14.343l1.414 1.414-2.121 2.122a1.5 1.5 0 01-2.121 0l-.707-.707a1.5 1.5 0 010-2.121l2.121-2.121z"})]}),Hv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M5.261 13.739c-1.683-2.185-1.986-5.11-.79-7.595c1.47-3.052 4.935-4.223 7.987-2.753c2.44, 1.176, 4.01, 3.522, 4.29, 6.13"}),m.jsx("path",{d:"M19.739 10.261c1.683 2.185, 1.986, 5.11,.79, 7.595c-1.47, 3.052-4.935, 4.223-7.987, 2.753c-2.44-1.176-4.01-3.522-4.29-6.13"}),m.jsx("path",{d:"M12 22v-5"}),m.jsx("path",{d:"M10 17h4"})]}),Bv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),qv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),Gv=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),m.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"}),m.jsx("path",{d:"M18.5 2.5a.5.5 0 00-1 0 .5.5 0 001 0zM20 5a.5.5 0 00-1 0 .5.5 0 001 0zM16 6a.5.5 0 00-1 0 .5.5 0 001 0z"})]}),Ov=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v2.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414L9 6.586V4a1 1 0 011-1zM10 17a1 1 0 01-1-1v-2.586l-1.293 1.293a1 1 0 11-1.414-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 11-1.414 1.414L11 13.414V16a1 1 0 01-1-1zM3 10a1 1 0 011-1h2.586l-1.293-1.293a1 1 0 111.414-1.414l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L6.586 11H4a1 1 0 01-1-1zm14 0a1 1 0 01-1 1h-2.586l1.293 1.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 111.414 1.414L13.414 9H16a1 1 0 011 1z",clipRule:"evenodd"})}),oa=10,pi=({x:o,y:n},i)=>({x:o*Math.cos(i)-n*Math.sin(i),y:o*Math.sin(i)+n*Math.cos(i)}),Vv=({imageDataUrl:o,backgroundImageUrl:n,backgroundBounds:i,onApply:a,onClose:u})=>{const{t:r}=fo(),p=A.useRef(null),y=A.useRef(null),v=A.useRef(null),g=A.useRef(null),[S,x]=A.useState(null),[T,b]=A.useState(null),[I,z]=A.useState(1),[q,F]=A.useState({x:0,y:0}),P=A.useRef(!1),[H,ee]=A.useState({past:[],present:[],future:[]}),_e=H.present,ye=H.past.length>0,ie=H.future.length>0,ge=A.useRef([]),me=A.useRef([]),[ce,De]=A.useState("move-image"),[Z,gt]=A.useState(15),[fe,it]=A.useState(.5),[N,se]=A.useState("#FFFFFF"),[Je,Ge]=A.useState({display:"none"}),[st,U]=A.useState(100),[te,be]=A.useState(100),[Te,je]=A.useState({x:0,y:0,scale:1,rotation:0}),[lt,ut]=A.useState(!0),[Ut,pt]=A.useState(1),[Dn,cn]=A.useState(!1),An=A.useRef(null),Kt=A.useRef(null),[bt,bn]=A.useState({width:Math.min(window.innerWidth*.8,1200),height:window.innerHeight*.8}),[le,tt]=A.useState({x:(window.innerWidth-Math.min(window.innerWidth*.8,1200))/2,y:(window.innerHeight-window.innerHeight*.8)/2}),ht=A.useRef(null);A.useEffect(()=>{const j=new Image;j.src=o,j.onload=()=>{x(j);const Me=y.current;if(Me){const{clientWidth:Be,clientHeight:Oe}=Me,qe=Math.min(Be/j.width,Oe/j.height)*.9;z(qe),F({x:(Be-j.width*qe)/2,y:(Oe-j.height*qe)/2})}}},[o]),A.useEffect(()=>{if(n){const j=new Image;j.src=n,j.onload=()=>{b(j)}}},[n]),A.useEffect(()=>{var j;(j=v.current)==null||j.focus()},[]);const at=A.useCallback(()=>{ee(j=>{if(j.past.length===0)return j;const Me=[...j.past],Be=Me.pop();return{past:Me,present:Be,future:[j.present,...j.future]}})},[]),It=A.useCallback(()=>{ee(j=>{if(j.future.length===0)return j;const Me=[...j.future],Be=Me.shift();return{past:[...j.past,j.present],present:Be,future:Me}})},[]),Fe=A.useCallback((j,Me)=>({x:(j-q.x)/I,y:(Me-q.y)/I}),[q,I]),sn=A.useCallback(j=>({x:j.x*I+q.x,y:j.y*I+q.y}),[I,q]),Ne=A.useCallback(j=>S?{x:j.x/S.width,y:j.y/S.height}:{x:0,y:0},[S]),ct=A.useCallback(j=>{if(!S)return{x:0,y:0};const Me=j.x*S.width,Be=j.y*S.height,{x:Oe,y:Ke,scale:qe,rotation:Pe}=Te,V=Pe*Math.PI/180,ae=S.width/2,_=S.height/2,he=Me-ae,Ce=Be-_,Ae=he*qe,xe=Ce*qe,He=pi({x:Ae,y:xe},V),ve=S.width*qe,Re=S.height*qe,Le=Oe+ve/2,Se=Ke+Re/2,Ue=Le+He.x,Ze=Se+He.y;return sn({x:Ue,y:Ze})},[S,Te,sn]),rn=A.useCallback((j,Me)=>{if(!S)return null;const Be=(j-q.x)/I,Oe=(Me-q.y)/I,{x:Ke,y:qe,scale:Pe,rotation:V}=Te,ae=V*Math.PI/180,_=S.width*Pe,he=S.height*Pe,Ce=Ke+_/2,Ae=qe+he/2,xe=Be-Ce,He=Oe-Ae,ve=pi({x:xe,y:He},-ae),Re=ve.x/Pe+S.width/2,Le=ve.y/Pe+S.height/2;return{x:Re,y:Le}},[S,q,I,Te]),et=A.useCallback(()=>{if(!S)return{};const{x:j,y:Me,scale:Be,rotation:Oe}=Te,Ke=S.width*Be,qe=S.height*Be,Pe={x:j+Ke/2,y:Me+qe/2},V=Oe*Math.PI/180,ae={"resize-tl":{x:-Ke/2,y:-qe/2,cursor:"nwse-resize"},"resize-tr":{x:Ke/2,y:-qe/2,cursor:"nesw-resize"},"resize-bl":{x:-Ke/2,y:qe/2,cursor:"nesw-resize"},"resize-br":{x:Ke/2,y:qe/2,cursor:"nwse-resize"}},_={};for(const[he,Ce]of Object.entries(ae)){const Ae=pi(Ce,V),xe={x:Ae.x+Pe.x,y:Ae.y+Pe.y},He=sn(xe);_[he]={x:He.x,y:He.y,cursor:Ce.cursor}}return _},[S,Te,sn]),St=A.useCallback(()=>{var ve;const j=p.current;if(!j||!S)return;(!g.current||g.current.width!==S.width||g.current.height!==S.height)&&(g.current=document.createElement("canvas"),g.current.width=S.width,g.current.height=S.height);const Me=g.current,Be=Me.getContext("2d");if(!Be)return;Be.clearRect(0,0,S.width,S.height),Be.filter=`brightness(${st}%) contrast(${te}%)`,Be.drawImage(S,0,0),Be.filter="none";const Oe=Re=>({x:Re.x*S.width,y:Re.y*S.height}),Ke=_e.filter(Re=>Re.type==="brush"||Re.type==="eraser");Ke.length>0&&Ao(Be,Ke,Oe);const qe=_e.filter(Re=>Re.type==="magic-brush");if(qe.length>0){const Re=qe.map(Le=>({...Le,type:"brush",color:"rgba(128, 0, 128, 0.6)",hardness:1}));Ao(Be,Re,Oe)}if(((ve=Kt.current)==null?void 0:ve.type)!=="move"&&ge.current.length>0){let Re=null;ce==="brush"||ce==="eraser"?Re={type:ce,color:N,size:Z,hardness:fe,shape:"round",points:ge.current,opacity:1}:ce==="magic-brush"&&(Re={type:"brush",color:"rgba(128, 0, 128, 0.6)",size:Z,hardness:1,shape:"round",points:ge.current,opacity:1}),Re&&Ao(Be,[Re],Oe)}const Pe=j.getContext("2d");if(!Pe)return;if(j.width=j.clientWidth,j.height=j.clientHeight,Pe.fillStyle="#1a202c",Pe.fillRect(0,0,j.width,j.height),Pe.save(),Pe.translate(q.x,q.y),Pe.scale(I,I),lt&&T&&i){Pe.save(),Pe.globalAlpha=.5;const Re=i.width*T.width;if(Re>0){const Le=S.width/Re,Se=T.width*Le,Ue=T.height*Le,Ze=S.width/2,Tt=S.height/2,ke=(i.x+i.width/2)*T.width,nt=(i.y+i.height/2)*T.height,Qe=Ze-ke*Le,Et=Tt-nt*Le;Pe.drawImage(T,Qe,Et,Se,Ue)}Pe.restore()}Pe.save(),Pe.globalAlpha=Ut;const{x:V,y:ae,scale:_,rotation:he}=Te,Ce=S.width*_,Ae=S.height*_,xe=V+Ce/2,He=ae+Ae/2;if(Pe.translate(xe,He),Pe.rotate(he*Math.PI/180),Pe.translate(-xe,-He),Pe.drawImage(Me,V,ae,Ce,Ae),Pe.restore(),Pe.restore(),ce==="move-image"){const Re=et();Pe.fillStyle="#8b5cf6",Pe.strokeStyle="#FFFFFF",Pe.lineWidth=1.5,Object.values(Re).forEach(Le=>{Pe.beginPath(),Pe.rect(Le.x-oa/2,Le.y-oa/2,oa,oa),Pe.fill(),Pe.stroke()})}if(Kt.current===null&&me.current.length>1){Pe.save(),Pe.strokeStyle="#03A9F4",Pe.fillStyle="rgba(3, 169, 244, 0.25)",Pe.lineWidth=2,Pe.beginPath();const Re=ct(me.current[0]);Pe.moveTo(Re.x,Re.y);for(let Le=1;Le<me.current.length;Le++){const Se=ct(me.current[Le]);Pe.lineTo(Se.x,Se.y)}Pe.closePath(),Pe.stroke(),Pe.fill(),Pe.restore()}},[S,T,i,q,I,_e,ce,Z,fe,N,st,te,ct,lt,Ut,Te,et]);A.useEffect(()=>{St()},[St,_e,bt]);const nn=j=>{const Me=p.current;if(!Me)return{x:0,y:0};const Be=Me.getBoundingClientRect();return{x:j.clientX-Be.left,y:j.clientY-Be.top}},Dt=A.useCallback((j,Me)=>{const Be=Z/2*I;if(ce==="magic-brush"){Ge({display:"block",position:"absolute",left:`${j-Be}px`,top:`${Me-Be}px`,width:`${Be*2}px`,height:`${Be*2}px`,borderRadius:"50%",background:"transparent",border:"2px solid red",pointerEvents:"none",zIndex:100});return}const Oe=fe,Ke=ce==="brush"?N:"rgba(255, 0, 0, 0.5)";Ge({display:"block",position:"absolute",left:`${j-Be}px`,top:`${Me-Be}px`,width:`${Be*2}px`,height:`${Be*2}px`,borderRadius:"50%",background:`radial-gradient(circle, ${Ke} ${Oe*100}%, transparent 100%)`,border:"1px solid white",pointerEvents:"none",zIndex:100})},[Z,fe,ce,I,N]),hn=j=>{const{x:Me,y:Be}=nn(j);if(ce==="eyedropper"){const Oe=p.current,Ke=Oe==null?void 0:Oe.getContext("2d",{willReadFrequently:!0});if(!Ke)return;const qe=Ke.getImageData(Me,Be,1,1).data,Pe=`#${("00"+qe[0].toString(16)).slice(-2)}${("00"+qe[1].toString(16)).slice(-2)}${("00"+qe[2].toString(16)).slice(-2)}`;se(Pe),De("brush");return}if(j.ctrlKey||j.metaKey){P.current=!0;return}if(ce==="move-image"){const Oe=Fe(Me,Be);if(!Oe)return;const Ke=et();for(const[qe,Pe]of Object.entries(Ke))if(Math.hypot(Me-Pe.x,Be-Pe.y)<oa){if(!S)return;const{x:V,y:ae,scale:_,rotation:he}=Te,Ce=S.width*_,Ae=S.height*_,xe={x:V+Ce/2,y:ae+Ae/2},He=he*Math.PI/180,ve=qe.split("-")[1],Re={tl:"resize-br",tr:"resize-bl",bl:"resize-tr",br:"resize-tl"}[ve],Le={x:(Re.includes("l")?-1:1)*Ce/2,y:(Re.includes("t")?-1:1)*Ae/2},Se=pi(Le,He),Ue={x:Se.x+xe.x,y:Se.y+xe.y};Kt.current={type:qe,startMouseWorld:Oe,startTransform:Te,pivotWorld:Ue};return}Kt.current={type:"move",startMouseWorld:Oe,startTransform:Te}}else if(ce==="brush"||ce==="eraser"||ce==="magic-brush"){Kt.current=null;const Oe=rn(Me,Be);if(!Oe)return;const Ke=Ne(Oe);ge.current=[Ke]}else if(ce==="lasso"){Kt.current=null;const Oe=rn(Me,Be);if(!Oe)return;const Ke=Ne(Oe);me.current=[Ke]}},Ot=j=>{const{x:Me,y:Be}=nn(j),Oe=p.current;if(!(!Oe||!S)){if(ce==="brush"||ce==="eraser"||ce==="magic-brush"?Dt(Me,Be):Ge({display:"none"}),P.current){F(Ke=>({x:Ke.x+j.movementX,y:Ke.y+j.movementY})),St();return}if(Kt.current){const Ke=Fe(Me,Be);if(!Ke)return;const{type:qe,startMouseWorld:Pe,startTransform:V,pivotWorld:ae}=Kt.current;if(qe==="move"){const _=Ke.x-Pe.x,he=Ke.y-Pe.y;je({...V,x:V.x+_,y:V.y+he})}else if(qe.startsWith("resize-")&&ae){const _=V.rotation*Math.PI/180,he={x:Ke.x-ae.x,y:Ke.y-ae.y},Ce=pi(he,-_),Ae=S.width/S.height,xe=Ce,He=Math.sign(xe.x)||1,ve=Math.sign(xe.y)||1,Re={x:Ae*He,y:1*ve},Le=xe.x*Re.x+xe.y*Re.y,Se=Re.x*Re.x+Re.y*Re.y;let Ue=0,Ze=0;if(Se>0){const on=Le/Se,vn={x:Re.x*on,y:Re.y*on};Ue=Math.abs(vn.x),Ze=Math.abs(vn.y)}Ue<10&&(Ue=10),Ze<10&&(Ze=10);const Tt={x:Math.sign(Ce.x)*Ue,y:Math.sign(Ce.y)*Ze},ke=pi(Tt,_),nt={x:ae.x+ke.x/2,y:ae.y+ke.y/2},Qe=Ue/S.width,Et={x:-Ue/2,y:-Ze/2},jt=pi(Et,_),Qt={x:nt.x+jt.x,y:nt.y+jt.y};je({scale:Qe,rotation:V.rotation,x:Qt.x,y:Qt.y})}}else if(ge.current.length>0){const Ke=rn(Me,Be);if(!Ke)return;const qe=Ne(Ke);ge.current.push(qe)}else if(me.current.length>0){const Ke=rn(Me,Be);if(!Ke)return;const qe=Ne(Ke);me.current.push(qe)}else if(ce==="move-image"){const Ke=et();let qe=!1;for(const Pe of Object.values(Ke))if(Math.hypot(Me-Pe.x,Be-Pe.y)<oa){Oe.style.cursor=Pe.cursor,qe=!0;break}qe||(Oe.style.cursor="move")}else Oe.style.cursor=ce==="eyedropper"||ce==="lasso"?"crosshair":ce?"none":"grab";St()}},In=()=>{if(P.current=!1,Kt.current===null){if(ce==="brush"||ce==="eraser"||ce==="magic-brush"){if(ge.current.length>0){const j={id:Date.now(),type:ce,color:N,size:Z,hardness:ce==="magic-brush"?1:fe,shape:"round",points:[...ge.current],opacity:1};ee(Me=>({past:[...Me.past,Me.present],present:[...Me.present,j],future:[]}))}}else if(ce==="lasso"&&me.current.length>2){const j={id:Date.now(),type:"eraser",color:"#000000",size:1,hardness:1,shape:"round",points:[...me.current],isFill:!0,opacity:1};ee(Me=>({past:[...Me.past,Me.present],present:[...Me.present,j],future:[]}))}}Kt.current=null,ge.current=[],me.current=[]},mn=()=>{(Kt.current||P.current||ge.current.length>0||me.current.length>0)&&In(),Ge({display:"none"})},Ft=j=>{if(!S)return;if(ce==="move-image"){if(j.preventDefault(),j.shiftKey){const V=j.deltaY>0?2:-2;je(ae=>({...ae,rotation:ae.rotation+V}))}else{const{x:V,y:ae}=nn(j),_=1.05,he=Te.scale,Ce=j.deltaY<0?he*_:he/_,Ae=Math.max(.1,Math.min(Ce,10)),xe=Fe(V,ae);if(!xe)return;const He=xe.x-(xe.x-Te.x)*(Ae/he),ve=xe.y-(xe.y-Te.y)*(Ae/he);je(Re=>({...Re,scale:Ae,x:He,y:ve}))}return}j.preventDefault();const{x:Me,y:Be}=nn(j),Oe=1.1,Ke=j.deltaY<0?I*Oe:I/Oe,qe=Math.max(.1,Math.min(Ke,10)),Pe=Fe(Me,Be);Pe&&(z(qe),F({x:Me-Pe.x*qe,y:Be-Pe.y*qe}),St())},yn=()=>{if(!S)return;const j=_e.filter(qe=>qe.type==="magic-brush"),Me=document.createElement("canvas");Me.width=S.width,Me.height=S.height;const Be=Me.getContext("2d");if(!Be)return;Be.filter=`brightness(${st}%) contrast(${te}%)`,Be.drawImage(S,0,0),Be.filter="none";const Oe=_e.filter(qe=>qe.type==="brush"||qe.type==="eraser");Ao(Be,Oe,qe=>({x:qe.x*S.width,y:qe.y*S.height})),a(Me.toDataURL(),Te,j.length>0?j:void 0)},Zt=j=>{if(j.ctrlKey||j.metaKey){j.key==="z"?(j.preventDefault(),ye&&at()):j.key==="y"&&(j.preventDefault(),ie&&It());return}if(j.key==="Escape"){u();return}if(j.key.startsWith("Arrow")){j.preventDefault();const Me=j.shiftKey?10:1;let Be=0,Oe=0;switch(j.key){case"ArrowUp":Oe=-Me;break;case"ArrowDown":Oe=Me;break;case"ArrowLeft":Be=-Me;break;case"ArrowRight":Be=Me;break}(Be!==0||Oe!==0)&&je(Ke=>({...Ke,x:Ke.x+Be,y:Ke.y+Oe}))}},Bn=A.useCallback(j=>{if(!ht.current)return;const{type:Me,startX:Be,startY:Oe,startWidth:Ke,startHeight:qe,startLeft:Pe,startTop:V}=ht.current,ae=j.clientX-Be,_=j.clientY-Oe,he=500,Ce=400;if(Me==="drag")tt({x:Pe+ae,y:V+_});else{let Ae=Ke,xe=qe,He=Pe,ve=V;Me.includes("r")&&(Ae=Ke+ae),Me.includes("l")&&(Ae=Ke-ae,He=Pe+ae),Me.includes("b")&&(xe=qe+_),Me.includes("t")&&(xe=qe-_,ve=V+_),Ae<he&&(Me.includes("l")&&(He=Pe+Ke-he),Ae=he),xe<Ce&&(Me.includes("t")&&(ve=V+qe-Ce),xe=Ce),bn({width:Ae,height:xe}),tt({x:He,y:ve})}},[]),Ht=A.useCallback((j,Me)=>{j.preventDefault(),ht.current={type:Me,startX:j.clientX,startY:j.clientY,startWidth:bt.width,startHeight:bt.height,startLeft:le.x,startTop:le.y};const Be=()=>{ht.current=null,window.removeEventListener("mousemove",Bn),window.removeEventListener("mouseup",Be)};window.addEventListener("mousemove",Bn),window.addEventListener("mouseup",Be)},[bt,le,Bn]),Jn=()=>{je({x:0,y:0,scale:1,rotation:0})},Un=["resize-tl","resize-t","resize-tr","resize-l","resize-r","resize-bl","resize-b","resize-br"],to={drag:"move","resize-tl":"nwse-resize","resize-tr":"nesw-resize","resize-bl":"nesw-resize","resize-br":"nwse-resize","resize-t":"ns-resize","resize-b":"ns-resize","resize-l":"ew-resize","resize-r":"ew-resize"};return m.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 p-4",children:[m.jsxs("div",{ref:v,tabIndex:-1,onKeyDown:Zt,style:{position:"absolute",top:le.y,left:le.x,width:bt.width,height:bt.height},className:"bg-gray-800 rounded-lg shadow-xl border border-gray-600 flex flex-col overflow-hidden outline-none",children:[m.jsxs("header",{onMouseDown:j=>Ht(j,"drag"),className:"flex-shrink-0 p-3 bg-gray-900 flex justify-between items-center border-b border-gray-700 cursor-move",children:[m.jsx("h2",{className:"text-xl font-bold text-indigo-400",children:r("imageEditor")}),m.jsx("button",{onClick:u,className:"p-1 rounded-full text-gray-400 hover:bg-gray-700 hover:text-white",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsxs("div",{className:"flex-grow flex min-h-0",children:[m.jsxs("aside",{className:"w-16 flex-shrink-0 bg-gray-900 p-2 flex flex-col items-center space-y-2 border-r border-gray-700",children:[m.jsx("button",{onClick:()=>De("move-image"),className:`p-2 rounded-lg ${ce==="move-image"?"bg-indigo-600":"bg-gray-700 hover:bg-gray-600"}`,title:r("moveImage"),children:m.jsx(Ov,{})}),m.jsx("button",{onClick:()=>De("brush"),className:`p-2 rounded-lg ${ce==="brush"?"bg-indigo-600":"bg-gray-700 hover:bg-gray-600"}`,title:r("brush"),children:m.jsx(Pv,{})}),m.jsx("button",{onClick:()=>De("eraser"),className:`p-2 rounded-lg ${ce==="eraser"?"bg-indigo-600":"bg-gray-700 hover:bg-gray-600"}`,title:r("eraser"),children:m.jsx(Lv,{})}),m.jsx("button",{onClick:()=>De("lasso"),className:`p-2 rounded-lg ${ce==="lasso"?"bg-indigo-600":"bg-gray-700 hover:bg-gray-600"}`,title:r("lassoErase"),children:m.jsx(Hv,{})}),m.jsx("button",{onClick:()=>De("magic-brush"),className:`p-2 rounded-lg ${ce==="magic-brush"?"bg-indigo-600":"bg-gray-700 hover:bg-gray-600"}`,title:"Magic Brush",children:m.jsx(Gv,{})}),m.jsx("button",{onClick:()=>De("eyedropper"),className:`p-2 rounded-lg ${ce==="eyedropper"?"bg-indigo-600":"bg-gray-700 hover:bg-gray-600"}`,title:r("eyedropper"),children:m.jsx(Fv,{})})]}),m.jsxs("main",{ref:y,className:"flex-grow relative overflow-hidden",children:[m.jsx("canvas",{ref:p,className:"absolute top-0 left-0 w-full h-full",onMouseDown:hn,onMouseMove:Ot,onMouseUp:In,onMouseLeave:mn,onWheel:Ft}),m.jsx("div",{style:Je}),m.jsxs("div",{className:"absolute bottom-2 right-2 bg-gray-800 bg-opacity-75 text-white text-xs rounded-md p-2 shadow-lg select-none",children:[m.jsxs("span",{children:[r("imageTransform"),": ",Math.round(Te.scale*100),"%"]})," | ",m.jsxs("span",{children:[r("zoom"),": ",Math.round(I*100),"%"]})]})]}),m.jsxs("aside",{className:"w-64 flex-shrink-0 bg-gray-900 p-4 space-y-6 overflow-y-auto border-l border-gray-700",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-300 mb-2",children:"Actions"}),m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx("button",{onClick:at,disabled:!ye,className:"flex-1 p-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed flex justify-center",title:r("undo"),children:m.jsx(Bv,{})}),m.jsx("button",{onClick:It,disabled:!ie,className:"flex-1 p-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed flex justify-center",title:r("redo"),children:m.jsx(qv,{})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-300 mb-2",children:r("viewOptions")}),m.jsxs("div",{className:"space-y-3 bg-gray-800 p-2 rounded-lg",children:[m.jsxs("label",{htmlFor:"show-bg-toggle",className:"flex items-center justify-between cursor-pointer text-sm",children:[m.jsx("span",{className:"text-gray-300",children:r("showBackground")}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"checkbox",id:"show-bg-toggle",className:"sr-only peer",checked:lt,onChange:j=>ut(j.target.checked),disabled:!T}),m.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600 peer-disabled:opacity-50"})]})]}),m.jsxs("div",{className:"text-sm",children:[m.jsx("label",{className:"text-gray-300 whitespace-nowrap",children:r("imageOpacity",{value:Math.round(Ut*100)})}),m.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:Ut,onChange:j=>pt(parseFloat(j.target.value)),className:"w-full accent-indigo-500"})]})]})]}),(ce==="brush"||ce==="eraser"||ce==="magic-brush")&&m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-300 mb-2",children:"Tool Options"}),m.jsxs("div",{className:"space-y-3",children:[ce==="brush"&&m.jsxs("div",{className:"flex items-center justify-between text-sm",children:[m.jsx("label",{className:"text-gray-300 whitespace-nowrap",children:r("color")}),m.jsx("button",{ref:An,onClick:()=>cn(j=>!j),className:"w-24 h-8 rounded-md border-2 border-gray-500",style:{backgroundColor:N},title:r("color")+`: ${N}`})]}),m.jsxs("div",{className:"text-sm",children:[m.jsx("label",{className:"text-gray-300 whitespace-nowrap",children:r("size",{value:Z})}),m.jsx("input",{type:"range",min:"1",max:"300",value:Z,onChange:j=>gt(parseInt(j.target.value,10)),className:"w-full accent-indigo-500"})]}),(ce==="brush"||ce==="eraser")&&m.jsxs("div",{className:"text-sm",children:[m.jsx("label",{className:"text-gray-300 whitespace-nowrap",children:r("hardness",{value:Math.round(fe*100)})}),m.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:fe,onChange:j=>it(parseFloat(j.target.value)),className:"w-full accent-indigo-500"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-300 mb-2",children:r("imageTransform")}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs text-gray-400",children:r("transformHelp")}),m.jsx("button",{onClick:Jn,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:r("resetTransform")})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-300 mb-2",children:"Adjustments"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"text-sm",children:[m.jsx("label",{className:"text-gray-300 whitespace-nowrap",children:r("brightness",{value:st})}),m.jsx("input",{type:"range",min:"0",max:"200",value:st,onChange:j=>U(parseInt(j.target.value,10)),className:"w-full accent-indigo-500"})]}),m.jsxs("div",{className:"text-sm",children:[m.jsx("label",{className:"text-gray-300 whitespace-nowrap",children:r("contrast",{value:te})}),m.jsx("input",{type:"range",min:"0",max:"200",value:te,onChange:j=>be(parseInt(j.target.value,10)),className:"w-full accent-indigo-500"})]})]})]})]})]}),m.jsxs("footer",{className:"flex-shrink-0 p-3 bg-gray-900 flex justify-end items-center space-x-3 border-t border-gray-700",children:[m.jsx("button",{onClick:u,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:r("cancel")}),m.jsx("button",{onClick:yn,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:r("apply")})]}),Un.map(j=>m.jsx("div",{onMouseDown:Me=>Ht(Me,j),className:"absolute z-10",style:{top:j.includes("t")?"-4px":j.includes("b")?void 0:"0px",bottom:j.includes("b")?"-4px":void 0,left:j.includes("l")?"-4px":j.includes("r")?void 0:"0px",right:j.includes("r")?"-4px":void 0,width:j.includes("l")||j.includes("r")?"8px":"auto",height:j.includes("t")||j.includes("b")?"8px":"auto",cursor:to[j]}},j))]}),Dn&&m.jsx(ss,{triggerRef:An,color:N,onChange:se,onClose:()=>cn(!1),onActivateEyedropper:()=>{De("eyedropper"),cn(!1)},labelPrefix:"editor-brush"})]})},Yv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Jv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),Kv=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 cursor-move",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),Xv=({initialNotes:o,onSave:n,onClose:i})=>{const{t:a}=fo(),[u,r]=A.useState(o),p=A.useRef(null),[y,v]=A.useState({x:100,y:100}),[g,S]=A.useState(!1),[x,T]=A.useState({x:0,y:0});A.useEffect(()=>{const ge=[...o].sort((me,ce)=>ce.createdAt-me.createdAt);r(ge)},[o]);const b=()=>{const ge={id:Date.now().toString(),content:"",importance:"normal",createdAt:Date.now()};r(me=>[ge,...me])},I=(ge,me,ce)=>{r(De=>De.map(Z=>Z.id===ge?{...Z,content:me??Z.content,importance:ce??Z.importance}:Z))},z=ge=>{r(me=>me.filter(ce=>ce.id!==ge))},q=()=>{n(u),i()},F=()=>{const ge=[...u].sort((gt,fe)=>fe.createdAt-gt.createdAt),me=JSON.stringify(ge,null,2),ce=new Blob([me],{type:"application/json"}),De=URL.createObjectURL(ce),Z=document.createElement("a");Z.href=De,Z.download="comic-translator-notes.json",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(De)},P=()=>{var ge;(ge=p.current)==null||ge.click()},H=ge=>{var De;const me=(De=ge.target.files)==null?void 0:De[0];if(!me)return;const ce=new FileReader;ce.onload=Z=>{var gt;try{const fe=(gt=Z.target)==null?void 0:gt.result,it=JSON.parse(fe);if(Array.isArray(it)&&it.every(N=>N.id&&typeof N.content=="string"&&N.importance))r(it.sort((N,se)=>se.createdAt-N.createdAt));else throw new Error("Invalid notes file format.")}catch(fe){alert(`Failed to import notes: ${fe instanceof Error?fe.message:"Unknown error"}`)}finally{ge.target&&(ge.target.value="")}},ce.readAsText(me)},ee={normal:{bg:"bg-gray-700",text:"text-gray-300",border:"border-gray-600"},important:{bg:"bg-yellow-900",text:"text-yellow-300",border:"border-yellow-600"},critical:{bg:"bg-red-900",text:"text-red-300",border:"border-red-600"}},_e=ge=>{S(!0),T({x:ge.clientX-y.x,y:ge.clientY-y.y})},ye=A.useCallback(ge=>{g&&v({x:ge.clientX-x.x,y:ge.clientY-x.y})},[g,x]),ie=A.useCallback(()=>{S(!1)},[]);return A.useEffect(()=>(g&&(window.addEventListener("mousemove",ye),window.addEventListener("mouseup",ie)),()=>{window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",ie)}),[g,ye,ie]),m.jsxs("div",{style:{position:"fixed",top:y.y,left:y.x,width:450,minHeight:400,maxHeight:"80vh"},className:"bg-gray-800 rounded-lg shadow-xl border border-indigo-500 flex flex-col z-40",children:[m.jsxs("header",{onMouseDown:_e,className:"flex-shrink-0 p-3 bg-gray-900 flex justify-between items-center border-b border-gray-700 cursor-move",children:[m.jsxs("div",{className:"flex items-center text-gray-300",children:[m.jsx(Kv,{}),m.jsx("h2",{className:"ml-2 text-lg font-bold text-indigo-400",children:a("notes")})]}),m.jsx("button",{onClick:i,className:"p-1 rounded-full text-gray-400 hover:bg-gray-700 hover:text-white",children:m.jsx(Yv,{})})]}),m.jsxs("main",{className:"flex-grow p-4 overflow-y-auto space-y-3",children:[m.jsx("button",{onClick:b,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:a("addNote")}),u.map(ge=>{const me=ee[ge.importance];return m.jsxs("div",{className:`${me.bg} p-3 rounded-lg space-y-2 border ${me.border}`,children:[m.jsx("textarea",{value:ge.content,onChange:ce=>I(ge.id,ce.target.value),placeholder:a("notePlaceholder"),className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500 h-24 resize-y"}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("label",{className:"text-sm text-gray-400",children:[a("importance"),":"]}),m.jsxs("select",{value:ge.importance,onChange:ce=>I(ge.id,void 0,ce.target.value),className:`bg-gray-900 border border-gray-600 rounded-lg p-1 text-sm focus:ring-indigo-500 focus:border-indigo-500 ${me.text}`,children:[m.jsx("option",{value:"normal",className:"text-gray-300",children:a("normal")}),m.jsx("option",{value:"important",className:"text-yellow-300",children:a("important")}),m.jsx("option",{value:"critical",className:"text-red-300",children:a("critical")})]})]}),m.jsx("button",{onClick:()=>z(ge.id),className:"p-1.5 rounded-full text-gray-400 hover:bg-red-600 hover:text-white",title:a("deleteNote"),children:m.jsx(Jv,{})})]})]},ge.id)})]}),m.jsxs("footer",{className:"flex-shrink-0 p-3 bg-gray-900 flex justify-between items-center border-t border-gray-700",children:[m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("input",{ref:p,type:"file",accept:".json",onChange:H,className:"hidden"}),m.jsx("button",{onClick:P,className:"bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-3 rounded-lg text-sm",children:a("import")}),m.jsx("button",{onClick:F,className:"bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-3 rounded-lg text-sm",children:a("export")})]}),m.jsx("button",{onClick:q,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg",children:a("saveAndClose")})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let jv,Wv;function Zv(){return{geminiUrl:jv,vertexUrl:Wv}}function Qv(o,n,i,a){var u,r;if(!(o!=null&&o.baseUrl)){const p=Zv();return n?(u=p.vertexUrl)!==null&&u!==void 0?u:i:(r=p.geminiUrl)!==null&&r!==void 0?r:a}return o.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mi{}function We(o,n){const i=/\{([^}]+)\}/g;return o.replace(i,(a,u)=>{if(Object.prototype.hasOwnProperty.call(n,u)){const r=n[u];return r!=null?String(r):""}else throw new Error(`Key '${u}' not found in valueMap.`)})}function d(o,n,i){for(let r=0;r<n.length-1;r++){const p=n[r];if(p.endsWith("[]")){const y=p.slice(0,-2);if(!(y in o))if(Array.isArray(i))o[y]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${p}`);if(Array.isArray(o[y])){const v=o[y];if(Array.isArray(i))for(let g=0;g<v.length;g++){const S=v[g];d(S,n.slice(r+1),i[g])}else for(const g of v)d(g,n.slice(r+1),i)}return}else if(p.endsWith("[0]")){const y=p.slice(0,-3);y in o||(o[y]=[{}]);const v=o[y];d(v[0],n.slice(r+1),i);return}(!o[p]||typeof o[p]!="object")&&(o[p]={}),o=o[p]}const a=n[n.length-1],u=o[a];if(u!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===u)return;if(typeof u=="object"&&typeof i=="object"&&u!==null&&i!==null)Object.assign(u,i);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(o,i):o[a]=i}function c(o,n,i=void 0){try{if(n.length===1&&n[0]==="_self")return o;for(let a=0;a<n.length;a++){if(typeof o!="object"||o===null)return i;const u=n[a];if(u.endsWith("[]")){const r=u.slice(0,-2);if(r in o){const p=o[r];return Array.isArray(p)?p.map(y=>c(y,n.slice(a+1),i)):i}else return i}else o=o[u]}return o}catch(a){if(a instanceof TypeError)return i;throw a}}function $v(o,n){for(const[i,a]of Object.entries(n)){const u=i.split("."),r=a.split("."),p=new Set;let y=-1;for(let v=0;v<u.length;v++)if(u[v]==="*"){y=v;break}if(y!==-1&&r.length>y)for(let v=y;v<r.length;v++){const g=r[v];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&p.add(g)}Zc(o,u,r,0,p)}}function Zc(o,n,i,a,u){if(a>=n.length||typeof o!="object"||o===null)return;const r=n[a];if(r.endsWith("[]")){const p=r.slice(0,-2),y=o;if(p in y&&Array.isArray(y[p]))for(const v of y[p])Zc(v,n,i,a+1,u)}else if(r==="*"){if(typeof o=="object"&&o!==null&&!Array.isArray(o)){const p=o,y=Object.keys(p).filter(g=>!g.startsWith("_")&&!u.has(g)),v={};for(const g of y)v[g]=p[g];for(const[g,S]of Object.entries(v)){const x=[];for(const T of i.slice(a))T==="*"?x.push(g):x.push(T);d(p,x,S)}for(const g of y)delete p[g]}}else{const p=o;r in p&&Zc(p[r],n,i,a+1,u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fd(o){if(typeof o!="string")throw new Error("fromImageBytes must be a string");return o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ex(o){const n={},i=c(o,["operationName"]);i!=null&&d(n,["operationName"],i);const a=c(o,["resourceName"]);return a!=null&&d(n,["_url","resourceName"],a),n}function tx(o){const n={},i=c(o,["name"]);i!=null&&d(n,["name"],i);const a=c(o,["metadata"]);a!=null&&d(n,["metadata"],a);const u=c(o,["done"]);u!=null&&d(n,["done"],u);const r=c(o,["error"]);r!=null&&d(n,["error"],r);const p=c(o,["response","generateVideoResponse"]);return p!=null&&d(n,["response"],ox(p)),n}function nx(o){const n={},i=c(o,["name"]);i!=null&&d(n,["name"],i);const a=c(o,["metadata"]);a!=null&&d(n,["metadata"],a);const u=c(o,["done"]);u!=null&&d(n,["done"],u);const r=c(o,["error"]);r!=null&&d(n,["error"],r);const p=c(o,["response"]);return p!=null&&d(n,["response"],lx(p)),n}function ox(o){const n={},i=c(o,["generatedSamples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(p=>ix(p))),d(n,["generatedVideos"],r)}const a=c(o,["raiMediaFilteredCount"]);a!=null&&d(n,["raiMediaFilteredCount"],a);const u=c(o,["raiMediaFilteredReasons"]);return u!=null&&d(n,["raiMediaFilteredReasons"],u),n}function lx(o){const n={},i=c(o,["videos"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(p=>ax(p))),d(n,["generatedVideos"],r)}const a=c(o,["raiMediaFilteredCount"]);a!=null&&d(n,["raiMediaFilteredCount"],a);const u=c(o,["raiMediaFilteredReasons"]);return u!=null&&d(n,["raiMediaFilteredReasons"],u),n}function ix(o){const n={},i=c(o,["video"]);return i!=null&&d(n,["video"],ux(i)),n}function ax(o){const n={},i=c(o,["_self"]);return i!=null&&d(n,["video"],cx(i)),n}function sx(o){const n={},i=c(o,["operationName"]);return i!=null&&d(n,["_url","operationName"],i),n}function rx(o){const n={},i=c(o,["operationName"]);return i!=null&&d(n,["_url","operationName"],i),n}function ux(o){const n={},i=c(o,["uri"]);i!=null&&d(n,["uri"],i);const a=c(o,["encodedVideo"]);a!=null&&d(n,["videoBytes"],fd(a));const u=c(o,["encoding"]);return u!=null&&d(n,["mimeType"],u),n}function cx(o){const n={},i=c(o,["gcsUri"]);i!=null&&d(n,["uri"],i);const a=c(o,["bytesBase64Encoded"]);a!=null&&d(n,["videoBytes"],fd(a));const u=c(o,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Kp;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Kp||(Kp={}));var Xp;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(Xp||(Xp={}));var Hn;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT",o.NULL="NULL"})(Hn||(Hn={}));var jp;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",o.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",o.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",o.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",o.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(jp||(jp={}));var Wp;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(Wp||(Wp={}));var Zp;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(Zp||(Zp={}));var Qp;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(Qp||(Qp={}));var $p;(function(o){o.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",o.NO_AUTH="NO_AUTH",o.API_KEY_AUTH="API_KEY_AUTH",o.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",o.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",o.OAUTH="OAUTH",o.OIDC_AUTH="OIDC_AUTH"})($p||($p={}));var eg;(function(o){o.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",o.SIMPLE_SEARCH="SIMPLE_SEARCH",o.ELASTIC_SEARCH="ELASTIC_SEARCH"})(eg||(eg={}));var tg;(function(o){o.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",o.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",o.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",o.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",o.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(tg||(tg={}));var ng;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.LANGUAGE="LANGUAGE",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY",o.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",o.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",o.NO_IMAGE="NO_IMAGE"})(ng||(ng={}));var og;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(og||(og={}));var lg;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(lg||(lg={}));var ig;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.IMAGE_SAFETY="IMAGE_SAFETY"})(ig||(ig={}));var ag;(function(o){o.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",o.ON_DEMAND="ON_DEMAND",o.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ag||(ag={}));var Rr;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})(Rr||(Rr={}));var sg;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(sg||(sg={}));var Qc;(function(o){o.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",o.JOB_STATE_QUEUED="JOB_STATE_QUEUED",o.JOB_STATE_PENDING="JOB_STATE_PENDING",o.JOB_STATE_RUNNING="JOB_STATE_RUNNING",o.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",o.JOB_STATE_FAILED="JOB_STATE_FAILED",o.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",o.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",o.JOB_STATE_PAUSED="JOB_STATE_PAUSED",o.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",o.JOB_STATE_UPDATING="JOB_STATE_UPDATING",o.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qc||(Qc={}));var rg;(function(o){o.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",o.TUNING_MODE_FULL="TUNING_MODE_FULL",o.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(rg||(rg={}));var ug;(function(o){o.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",o.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",o.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",o.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",o.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",o.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",o.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ug||(ug={}));var cg;(function(o){o.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",o.TUNING_TASK_I2V="TUNING_TASK_I2V",o.TUNING_TASK_T2V="TUNING_TASK_T2V"})(cg||(cg={}));var dg;(function(o){o.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",o.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",o.BALANCED="BALANCED",o.PRIORITIZE_COST="PRIORITIZE_COST"})(dg||(dg={}));var fg;(function(o){o.UNSPECIFIED="UNSPECIFIED",o.BLOCKING="BLOCKING",o.NON_BLOCKING="NON_BLOCKING"})(fg||(fg={}));var hg;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(hg||(hg={}));var pg;(function(o){o.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",o.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(pg||(pg={}));var gg;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE",o.VALIDATED="VALIDATED"})(gg||(gg={}));var mg;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(mg||(mg={}));var yg;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(yg||(yg={}));var vg;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi",o.zh="zh",o.pt="pt",o.es="es"})(vg||(vg={}));var xg;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(xg||(xg={}));var Sg;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Sg||(Sg={}));var Cg;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Cg||(Cg={}));var Tg;(function(o){o.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",o.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",o.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",o.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",o.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",o.EDIT_MODE_STYLE="EDIT_MODE_STYLE",o.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",o.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Tg||(Tg={}));var Eg;(function(o){o.FOREGROUND="FOREGROUND",o.BACKGROUND="BACKGROUND",o.PROMPT="PROMPT",o.SEMANTIC="SEMANTIC",o.INTERACTIVE="INTERACTIVE"})(Eg||(Eg={}));var wg;(function(o){o.ASSET="ASSET",o.STYLE="STYLE"})(wg||(wg={}));var Ag;(function(o){o.INSERT="INSERT",o.REMOVE="REMOVE",o.REMOVE_STATIC="REMOVE_STATIC",o.OUTPAINT="OUTPAINT"})(Ag||(Ag={}));var bg;(function(o){o.OPTIMIZED="OPTIMIZED",o.LOSSLESS="LOSSLESS"})(bg||(bg={}));var _g;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(_g||(_g={}));var Mg;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED"})(Mg||(Mg={}));var Rg;(function(o){o.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.RESPONSE_REJECTED="RESPONSE_REJECTED",o.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Rg||(Rg={}));var Ng;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(Ng||(Ng={}));var Dg;(function(o){o.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",o.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",o.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Dg||(Dg={}));var Ig;(function(o){o.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",o.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",o.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ig||(Ig={}));var Ug;(function(o){o.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",o.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",o.NO_INTERRUPTION="NO_INTERRUPTION"})(Ug||(Ug={}));var kg;(function(o){o.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",o.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",o.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kg||(kg={}));var zg;(function(o){o.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",o.SILENT="SILENT",o.WHEN_IDLE="WHEN_IDLE",o.INTERRUPT="INTERRUPT"})(zg||(zg={}));var Pg;(function(o){o.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",o.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",o.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",o.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",o.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",o.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",o.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",o.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",o.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",o.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",o.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",o.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",o.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Pg||(Pg={}));var Lg;(function(o){o.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",o.QUALITY="QUALITY",o.DIVERSITY="DIVERSITY",o.VOCALIZATION="VOCALIZATION"})(Lg||(Lg={}));var la;(function(o){o.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",o.PLAY="PLAY",o.PAUSE="PAUSE",o.STOP="STOP",o.RESET_CONTEXT="RESET_CONTEXT"})(la||(la={}));class $c{constructor(n){const i={};for(const a of n.headers.entries())i[a[0]]=a[1];this.headers=i,this.responseInternal=n}json(){return this.responseInternal.json()}}class as{get text(){var n,i,a,u,r,p,y,v;if(((u=(a=(i=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",S=!1;const x=[];for(const T of(v=(y=(p=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||p===void 0?void 0:p.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[b,I]of Object.entries(T))b!=="text"&&b!=="thought"&&(I!==null||I!==void 0)&&x.push(b);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;S=!0,g+=T.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),S?g:void 0}get data(){var n,i,a,u,r,p,y,v;if(((u=(a=(i=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const S=[];for(const x of(v=(y=(p=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||p===void 0?void 0:p.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[T,b]of Object.entries(x))T!=="inlineData"&&(b!==null||b!==void 0)&&S.push(T);x.inlineData&&typeof x.inlineData.data=="string"&&(g+=atob(x.inlineData.data))}return S.length>0&&console.warn(`there are non-data parts ${S} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var n,i,a,u,r,p,y,v;if(((u=(a=(i=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(v=(y=(p=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||p===void 0?void 0:p.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(S=>S.functionCall).map(S=>S.functionCall).filter(S=>S!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var n,i,a,u,r,p,y,v,g;if(((u=(a=(i=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const S=(v=(y=(p=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||p===void 0?void 0:p.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((S==null?void 0:S.length)!==0)return(g=S==null?void 0:S[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var n,i,a,u,r,p,y,v,g;if(((u=(a=(i=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const S=(v=(y=(p=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||p===void 0?void 0:p.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((S==null?void 0:S.length)!==0)return(g=S==null?void 0:S[0])===null||g===void 0?void 0:g.output}}class Fg{}class Hg{}class dx{}class fx{}class hx{}class px{}class Bg{}class qg{}class Gg{}class gx{}class Nr{_fromAPIResponse({apiResponse:n,isVertexAI:i}){const a=new Nr;let u;const r=n;return i?u=nx(r):u=tx(r),Object.assign(a,u),a}}class Og{}class Vg{}class Yg{}class mx{}class yx{}class vx{}class Jg{}class xx{get text(){var n,i,a;let u="",r=!1;const p=[];for(const y of(a=(i=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&a!==void 0?a:[]){for(const[v,g]of Object.entries(y))v!=="text"&&v!=="thought"&&g!==null&&p.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;r=!0,u+=y.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?u:void 0}get data(){var n,i,a;let u="";const r=[];for(const p of(a=(i=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&a!==void 0?a:[]){for(const[y,v]of Object.entries(p))y!=="inlineData"&&v!==null&&r.push(y);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}}class Sx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pt(o,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(o.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){const i=n.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function Mm(o,n){const i=Pt(o,n);return i?i.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${i}`:i.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${i}`:i:""}function Rm(o){return Array.isArray(o)?o.map(n=>Dr(n)):[Dr(o)]}function Dr(o){if(typeof o=="object"&&o!==null)return o;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof o}`)}function Nm(o){const n=Dr(o);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Dm(o){const n=Dr(o);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Kg(o){if(o==null)throw new Error("PartUnion is required");if(typeof o=="object")return o;if(typeof o=="string")return{text:o};throw new Error(`Unsupported part type: ${typeof o}`)}function Im(o){if(o==null||Array.isArray(o)&&o.length===0)throw new Error("PartListUnion is required");return Array.isArray(o)?o.map(n=>Kg(n)):[Kg(o)]}function ed(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function Xg(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function jg(o){return o!=null&&typeof o=="object"&&"functionResponse"in o}function Yn(o){if(o==null)throw new Error("ContentUnion is required");return ed(o)?o:{role:"user",parts:Im(o)}}function hd(o,n){if(!n)return[];if(o.isVertexAI()&&Array.isArray(n))return n.flatMap(i=>{const a=Yn(i);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(o.isVertexAI()){const i=Yn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(n)?n.map(i=>Yn(i)):[Yn(n)]}function bo(o){if(o==null||Array.isArray(o)&&o.length===0)throw new Error("contents are required");if(!Array.isArray(o)){if(Xg(o)||jg(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yn(o)]}const n=[],i=[],a=ed(o[0]);for(const u of o){const r=ed(u);if(r!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)n.push(u);else{if(Xg(u)||jg(u))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(u)}}return a||n.push({role:"user",parts:Im(i)}),n}function Cx(o,n){o.includes("null")&&(n.nullable=!0);const i=o.filter(a=>a!=="null");if(i.length===1)n.type=Object.values(Hn).includes(i[0].toUpperCase())?i[0].toUpperCase():Hn.TYPE_UNSPECIFIED;else{n.anyOf=[];for(const a of i)n.anyOf.push({type:Object.values(Hn).includes(a.toUpperCase())?a.toUpperCase():Hn.TYPE_UNSPECIFIED})}}function ia(o){const n={},i=["items"],a=["anyOf"],u=["properties"];if(o.type&&o.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=o.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(n.nullable=!0,o=r[1]):r[1].type==="null"&&(n.nullable=!0,o=r[0])),o.type instanceof Array&&Cx(o.type,n);for(const[p,y]of Object.entries(o))if(y!=null)if(p=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;n.type=Object.values(Hn).includes(y.toUpperCase())?y.toUpperCase():Hn.TYPE_UNSPECIFIED}else if(i.includes(p))n[p]=ia(y);else if(a.includes(p)){const v=[];for(const g of y){if(g.type=="null"){n.nullable=!0;continue}v.push(ia(g))}n[p]=v}else if(u.includes(p)){const v={};for(const[g,S]of Object.entries(y))v[g]=ia(S);n[p]=v}else{if(p==="additionalProperties")continue;n[p]=y}return n}function pd(o){return ia(o)}function gd(o){if(typeof o=="object")return o;if(typeof o=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:o}}};throw new Error(`Unsupported speechConfig type: ${typeof o}`)}function md(o){if("multiSpeakerVoiceConfig"in o)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return o}function ra(o){if(o.functionDeclarations)for(const n of o.functionDeclarations)n.parameters&&(Object.keys(n.parameters).includes("$schema")?n.parametersJsonSchema||(n.parametersJsonSchema=n.parameters,delete n.parameters):n.parameters=ia(n.parameters)),n.response&&(Object.keys(n.response).includes("$schema")?n.responseJsonSchema||(n.responseJsonSchema=n.response,delete n.response):n.response=ia(n.response));return o}function ua(o){if(o==null)throw new Error("tools is required");if(!Array.isArray(o))throw new Error("tools is required and must be an array of Tools");const n=[];for(const i of o)n.push(i);return n}function Tx(o,n,i,a=1){const u=!n.startsWith(`${i}/`)&&n.split("/").length===a;return o.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${o.getProject()}/${n}`:n.startsWith(`${i}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${n}`:u?`projects/${o.getProject()}/locations/${o.getLocation()}/${i}/${n}`:n:u?`${i}/${n}`:n}function il(o,n){if(typeof n!="string")throw new Error("name must be a string");return Tx(o,n,"cachedContents")}function Um(o){switch(o){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return o}}function Gl(o){return fd(o)}function Ex(o){return o!=null&&typeof o=="object"&&"name"in o}function wx(o){return o!=null&&typeof o=="object"&&"video"in o}function Ax(o){return o!=null&&typeof o=="object"&&"uri"in o}function km(o){var n;let i;if(Ex(o)&&(i=o.name),!(Ax(o)&&(i=o.uri,i===void 0))&&!(wx(o)&&(i=(n=o.video)===null||n===void 0?void 0:n.uri,i===void 0))){if(typeof o=="string"&&(i=o),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const u=i.split("files/")[1].match(/[a-z0-9]+/);if(u===null)throw new Error(`Could not extract file name from URI ${i}`);i=u[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function zm(o,n){let i;return o.isVertexAI()?i=n?"publishers/google/models":"models":i=n?"models":"tunedModels",i}function Pm(o){for(const n of["models","tunedModels","publisherModels"])if(bx(o,n))return o[n];return[]}function bx(o,n){return o!==null&&typeof o=="object"&&n in o}function _x(o,n={}){const i=o,a={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(a.responseJsonSchema=i.outputSchema),n.behavior&&(a.behavior=n.behavior),{functionDeclarations:[a]}}function Mx(o,n={}){const i=[],a=new Set;for(const u of o){const r=u.name;if(a.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);a.add(r);const p=_x(u,n);p.functionDeclarations&&i.push(...p.functionDeclarations)}return{functionDeclarations:i}}function Lm(o,n){let i;if(typeof n=="string")if(o.isVertexAI())if(n.startsWith("gs://"))i={format:"jsonl",gcsUri:[n]};else if(n.startsWith("bq://"))i={format:"bigquery",bigqueryUri:n};else throw new Error(`Unsupported string source for Vertex AI: ${n}`);else if(n.startsWith("files/"))i={fileName:n};else throw new Error(`Unsupported string source for Gemini API: ${n}`);else if(Array.isArray(n)){if(o.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:n}}else i=n;const a=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,u=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(o.isVertexAI()){if(u>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||u!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function Rx(o){if(typeof o!="string")return o;const n=o;if(n.startsWith("gs://"))return{format:"jsonl",gcsUri:n};if(n.startsWith("bq://"))return{format:"bigquery",bigqueryUri:n};throw new Error(`Unsupported destination: ${n}`)}function Fm(o){if(typeof o!="object"||o===null)return{};const n=o,i=n.inlinedResponses;if(typeof i!="object"||i===null)return o;const u=i.inlinedResponses;if(!Array.isArray(u)||u.length===0)return o;let r=!1;for(const p of u){if(typeof p!="object"||p===null)continue;const v=p.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){r=!0;break}}return r&&(n.inlinedEmbedContentResponses=n.inlinedResponses,delete n.inlinedResponses),o}function ca(o,n){const i=n;if(!o.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Hm(o){const n=o;return n==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":n==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":n==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":n==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":n==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":n==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":n==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nx(o){const n={},i=c(o,["responsesFile"]);i!=null&&d(n,["fileName"],i);const a=c(o,["inlinedResponses","inlinedResponses"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(p=>s1(p))),d(n,["inlinedResponses"],r)}const u=c(o,["inlinedEmbedContentResponses","inlinedResponses"]);if(u!=null){let r=u;Array.isArray(r)&&(r=r.map(p=>p)),d(n,["inlinedEmbedContentResponses"],r)}return n}function Dx(o){const n={},i=c(o,["predictionsFormat"]);i!=null&&d(n,["format"],i);const a=c(o,["gcsDestination","outputUriPrefix"]);a!=null&&d(n,["gcsUri"],a);const u=c(o,["bigqueryDestination","outputUri"]);return u!=null&&d(n,["bigqueryUri"],u),n}function Ix(o){const n={},i=c(o,["format"]);i!=null&&d(n,["predictionsFormat"],i);const a=c(o,["gcsUri"]);a!=null&&d(n,["gcsDestination","outputUriPrefix"],a);const u=c(o,["bigqueryUri"]);if(u!=null&&d(n,["bigqueryDestination","outputUri"],u),c(o,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(o,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(o,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return n}function _r(o){const n={},i=c(o,["name"]);i!=null&&d(n,["name"],i);const a=c(o,["metadata","displayName"]);a!=null&&d(n,["displayName"],a);const u=c(o,["metadata","state"]);u!=null&&d(n,["state"],Hm(u));const r=c(o,["metadata","createTime"]);r!=null&&d(n,["createTime"],r);const p=c(o,["metadata","endTime"]);p!=null&&d(n,["endTime"],p);const y=c(o,["metadata","updateTime"]);y!=null&&d(n,["updateTime"],y);const v=c(o,["metadata","model"]);v!=null&&d(n,["model"],v);const g=c(o,["metadata","output"]);return g!=null&&d(n,["dest"],Nx(Fm(g))),n}function td(o){const n={},i=c(o,["name"]);i!=null&&d(n,["name"],i);const a=c(o,["displayName"]);a!=null&&d(n,["displayName"],a);const u=c(o,["state"]);u!=null&&d(n,["state"],Hm(u));const r=c(o,["error"]);r!=null&&d(n,["error"],r);const p=c(o,["createTime"]);p!=null&&d(n,["createTime"],p);const y=c(o,["startTime"]);y!=null&&d(n,["startTime"],y);const v=c(o,["endTime"]);v!=null&&d(n,["endTime"],v);const g=c(o,["updateTime"]);g!=null&&d(n,["updateTime"],g);const S=c(o,["model"]);S!=null&&d(n,["model"],S);const x=c(o,["inputConfig"]);x!=null&&d(n,["src"],Ux(x));const T=c(o,["outputConfig"]);return T!=null&&d(n,["dest"],Dx(Fm(T))),n}function Ux(o){const n={},i=c(o,["instancesFormat"]);i!=null&&d(n,["format"],i);const a=c(o,["gcsSource","uris"]);a!=null&&d(n,["gcsUri"],a);const u=c(o,["bigquerySource","inputUri"]);return u!=null&&d(n,["bigqueryUri"],u),n}function kx(o,n){const i={};if(c(n,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=c(n,["fileName"]);a!=null&&d(i,["fileName"],a);const u=c(n,["inlinedRequests"]);if(u!=null){let r=u;Array.isArray(r)&&(r=r.map(p=>a1(o,p))),d(i,["requests","requests"],r)}return i}function zx(o){const n={},i=c(o,["format"]);i!=null&&d(n,["instancesFormat"],i);const a=c(o,["gcsUri"]);a!=null&&d(n,["gcsSource","uris"],a);const u=c(o,["bigqueryUri"]);if(u!=null&&d(n,["bigquerySource","inputUri"],u),c(o,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(o,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return n}function Px(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["data"]);i!=null&&d(n,["data"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function Lx(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],ca(o,a)),i}function Fx(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],ca(o,a)),i}function Hx(o){const n={},i=c(o,["content"]);i!=null&&d(n,["content"],i);const a=c(o,["citationMetadata"]);a!=null&&d(n,["citationMetadata"],Bx(a));const u=c(o,["tokenCount"]);u!=null&&d(n,["tokenCount"],u);const r=c(o,["finishReason"]);r!=null&&d(n,["finishReason"],r);const p=c(o,["urlContextMetadata"]);p!=null&&d(n,["urlContextMetadata"],p);const y=c(o,["avgLogprobs"]);y!=null&&d(n,["avgLogprobs"],y);const v=c(o,["groundingMetadata"]);v!=null&&d(n,["groundingMetadata"],v);const g=c(o,["index"]);g!=null&&d(n,["index"],g);const S=c(o,["logprobsResult"]);S!=null&&d(n,["logprobsResult"],S);const x=c(o,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(b=>b)),d(n,["safetyRatings"],T)}return n}function Bx(o){const n={},i=c(o,["citationSources"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),d(n,["citations"],a)}return n}function Bm(o){const n={},i=c(o,["parts"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(r=>p1(r))),d(n,["parts"],u)}const a=c(o,["role"]);return a!=null&&d(n,["role"],a),n}function qx(o,n){const i={},a=c(o,["displayName"]);if(n!==void 0&&a!=null&&d(n,["batch","displayName"],a),c(o,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function Gx(o,n){const i={},a=c(o,["displayName"]);n!==void 0&&a!=null&&d(n,["displayName"],a);const u=c(o,["dest"]);return n!==void 0&&u!=null&&d(n,["outputConfig"],Ix(Rx(u))),i}function Wg(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["src"]);u!=null&&d(i,["batch","inputConfig"],kx(o,Lm(o,u)));const r=c(n,["config"]);return r!=null&&qx(r,i),i}function Ox(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["model"],Pt(o,a));const u=c(n,["src"]);u!=null&&d(i,["inputConfig"],zx(Lm(o,u)));const r=c(n,["config"]);return r!=null&&Gx(r,i),i}function Vx(o,n){const i={},a=c(o,["displayName"]);return n!==void 0&&a!=null&&d(n,["batch","displayName"],a),i}function Yx(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["src"]);u!=null&&d(i,["batch","inputConfig"],Qx(o,u));const r=c(n,["config"]);return r!=null&&Vx(r,i),i}function Jx(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],ca(o,a)),i}function Kx(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],ca(o,a)),i}function Xx(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["name"]);a!=null&&d(n,["name"],a);const u=c(o,["done"]);u!=null&&d(n,["done"],u);const r=c(o,["error"]);return r!=null&&d(n,["error"],r),n}function jx(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["name"]);a!=null&&d(n,["name"],a);const u=c(o,["done"]);u!=null&&d(n,["done"],u);const r=c(o,["error"]);return r!=null&&d(n,["error"],r),n}function Wx(o,n){const i={},a=c(n,["contents"]);if(a!=null){let r=hd(o,a);Array.isArray(r)&&(r=r.map(p=>p)),d(i,["requests[]","request","content"],r)}const u=c(n,["config"]);return u!=null&&(d(i,["_self"],Zx(u,i)),$v(i,{"requests[].*":"requests[].request.*"})),i}function Zx(o,n){const i={},a=c(o,["taskType"]);n!==void 0&&a!=null&&d(n,["requests[]","taskType"],a);const u=c(o,["title"]);n!==void 0&&u!=null&&d(n,["requests[]","title"],u);const r=c(o,["outputDimensionality"]);if(n!==void 0&&r!=null&&d(n,["requests[]","outputDimensionality"],r),c(o,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(o,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Qx(o,n){const i={},a=c(n,["fileName"]);a!=null&&d(i,["file_name"],a);const u=c(n,["inlinedRequests"]);return u!=null&&d(i,["requests"],Wx(o,u)),i}function $x(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["fileUri"]);i!=null&&d(n,["fileUri"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function e1(o,n,i){const a={},u=c(n,["systemInstruction"]);i!==void 0&&u!=null&&d(i,["systemInstruction"],Bm(Yn(u)));const r=c(n,["temperature"]);r!=null&&d(a,["temperature"],r);const p=c(n,["topP"]);p!=null&&d(a,["topP"],p);const y=c(n,["topK"]);y!=null&&d(a,["topK"],y);const v=c(n,["candidateCount"]);v!=null&&d(a,["candidateCount"],v);const g=c(n,["maxOutputTokens"]);g!=null&&d(a,["maxOutputTokens"],g);const S=c(n,["stopSequences"]);S!=null&&d(a,["stopSequences"],S);const x=c(n,["responseLogprobs"]);x!=null&&d(a,["responseLogprobs"],x);const T=c(n,["logprobs"]);T!=null&&d(a,["logprobs"],T);const b=c(n,["presencePenalty"]);b!=null&&d(a,["presencePenalty"],b);const I=c(n,["frequencyPenalty"]);I!=null&&d(a,["frequencyPenalty"],I);const z=c(n,["seed"]);z!=null&&d(a,["seed"],z);const q=c(n,["responseMimeType"]);q!=null&&d(a,["responseMimeType"],q);const F=c(n,["responseSchema"]);F!=null&&d(a,["responseSchema"],pd(F));const P=c(n,["responseJsonSchema"]);if(P!=null&&d(a,["responseJsonSchema"],P),c(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=c(n,["safetySettings"]);if(i!==void 0&&H!=null){let Z=H;Array.isArray(Z)&&(Z=Z.map(gt=>g1(gt))),d(i,["safetySettings"],Z)}const ee=c(n,["tools"]);if(i!==void 0&&ee!=null){let Z=ua(ee);Array.isArray(Z)&&(Z=Z.map(gt=>m1(ra(gt)))),d(i,["tools"],Z)}const _e=c(n,["toolConfig"]);if(i!==void 0&&_e!=null&&d(i,["toolConfig"],_e),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ye=c(n,["cachedContent"]);i!==void 0&&ye!=null&&d(i,["cachedContent"],il(o,ye));const ie=c(n,["responseModalities"]);ie!=null&&d(a,["responseModalities"],ie);const ge=c(n,["mediaResolution"]);ge!=null&&d(a,["mediaResolution"],ge);const me=c(n,["speechConfig"]);if(me!=null&&d(a,["speechConfig"],gd(me)),c(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=c(n,["thinkingConfig"]);ce!=null&&d(a,["thinkingConfig"],ce);const De=c(n,["imageConfig"]);return De!=null&&d(a,["imageConfig"],De),a}function t1(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(g=>Hx(g))),d(n,["candidates"],v)}const u=c(o,["modelVersion"]);u!=null&&d(n,["modelVersion"],u);const r=c(o,["promptFeedback"]);r!=null&&d(n,["promptFeedback"],r);const p=c(o,["responseId"]);p!=null&&d(n,["responseId"],p);const y=c(o,["usageMetadata"]);return y!=null&&d(n,["usageMetadata"],y),n}function n1(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],ca(o,a)),i}function o1(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],ca(o,a)),i}function l1(o){const n={};if(c(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(o,["enableWidget"]);return i!=null&&d(n,["enableWidget"],i),n}function i1(o){const n={},i=c(o,["timeRangeFilter"]);if(i!=null&&d(n,["timeRangeFilter"],i),c(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function a1(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["request","model"],Pt(o,a));const u=c(n,["contents"]);if(u!=null){let y=bo(u);Array.isArray(y)&&(y=y.map(v=>Bm(v))),d(i,["request","contents"],y)}const r=c(n,["metadata"]);r!=null&&d(i,["metadata"],r);const p=c(n,["config"]);return p!=null&&d(i,["request","generationConfig"],e1(o,p,c(i,["request"],{}))),i}function s1(o){const n={},i=c(o,["response"]);i!=null&&d(n,["response"],t1(i));const a=c(o,["error"]);return a!=null&&d(n,["error"],a),n}function r1(o,n){const i={},a=c(o,["pageSize"]);n!==void 0&&a!=null&&d(n,["_query","pageSize"],a);const u=c(o,["pageToken"]);if(n!==void 0&&u!=null&&d(n,["_query","pageToken"],u),c(o,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function u1(o,n){const i={},a=c(o,["pageSize"]);n!==void 0&&a!=null&&d(n,["_query","pageSize"],a);const u=c(o,["pageToken"]);n!==void 0&&u!=null&&d(n,["_query","pageToken"],u);const r=c(o,["filter"]);return n!==void 0&&r!=null&&d(n,["_query","filter"],r),i}function c1(o){const n={},i=c(o,["config"]);return i!=null&&r1(i,n),n}function d1(o){const n={},i=c(o,["config"]);return i!=null&&u1(i,n),n}function f1(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const u=c(o,["operations"]);if(u!=null){let r=u;Array.isArray(r)&&(r=r.map(p=>_r(p))),d(n,["batchJobs"],r)}return n}function h1(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const u=c(o,["batchPredictionJobs"]);if(u!=null){let r=u;Array.isArray(r)&&(r=r.map(p=>td(p))),d(n,["batchJobs"],r)}return n}function p1(o){const n={},i=c(o,["videoMetadata"]);i!=null&&d(n,["videoMetadata"],i);const a=c(o,["thought"]);a!=null&&d(n,["thought"],a);const u=c(o,["inlineData"]);u!=null&&d(n,["inlineData"],Px(u));const r=c(o,["fileData"]);r!=null&&d(n,["fileData"],$x(r));const p=c(o,["thoughtSignature"]);p!=null&&d(n,["thoughtSignature"],p);const y=c(o,["functionCall"]);y!=null&&d(n,["functionCall"],y);const v=c(o,["codeExecutionResult"]);v!=null&&d(n,["codeExecutionResult"],v);const g=c(o,["executableCode"]);g!=null&&d(n,["executableCode"],g);const S=c(o,["functionResponse"]);S!=null&&d(n,["functionResponse"],S);const x=c(o,["text"]);return x!=null&&d(n,["text"],x),n}function g1(o){const n={};if(c(o,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(o,["category"]);i!=null&&d(n,["category"],i);const a=c(o,["threshold"]);return a!=null&&d(n,["threshold"],a),n}function m1(o){const n={},i=c(o,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(S=>S)),d(n,["functionDeclarations"],g)}if(c(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(o,["googleSearch"]);a!=null&&d(n,["googleSearch"],i1(a));const u=c(o,["googleSearchRetrieval"]);if(u!=null&&d(n,["googleSearchRetrieval"],u),c(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(o,["googleMaps"]);r!=null&&d(n,["googleMaps"],l1(r));const p=c(o,["urlContext"]);p!=null&&d(n,["urlContext"],p);const y=c(o,["computerUse"]);y!=null&&d(n,["computerUse"],y);const v=c(o,["codeExecution"]);return v!=null&&d(n,["codeExecution"],v),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gi;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(gi||(gi={}));class us{constructor(n,i,a,u){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(n,a,u)}init(n,i,a){var u,r;this.nameInternal=n,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let p={config:{}};!a||Object.keys(a).length===0?p={config:{}}:typeof a=="object"?p=Object.assign({},a):p=a,p.config&&(p.config.pageToken=i.nextPageToken),this.paramsInternal=p,this.pageInternalSize=(r=(u=p.config)===null||u===void 0?void 0:u.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y1 extends mi{constructor(n){super(),this.apiClient=n,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new us(gi.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(i),i)}createInlinedGenerateContentRequest(n){const i=Wg(this.apiClient,n),a=i._url,u=We("{model}:batchGenerateContent",a),y=i.batch.inputConfig.requests,v=y.requests,g=[];for(const S of v){const x=Object.assign({},S);if(x.systemInstruction){const T=x.systemInstruction;delete x.systemInstruction;const b=x.request;b.systemInstruction=T,x.request=b}g.push(x)}return y.requests=g,delete i.config,delete i._url,delete i._query,{path:u,body:i}}getGcsUri(n){if(typeof n=="string")return n.startsWith("gs://")?n:void 0;if(!Array.isArray(n)&&n.gcsUri&&n.gcsUri.length>0)return n.gcsUri[0]}getBigqueryUri(n){if(typeof n=="string")return n.startsWith("bq://")?n:void 0;if(!Array.isArray(n))return n.bigqueryUri}formatDestination(n,i){const a=i?Object.assign({},i):{},u=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${u}`),a.dest===void 0){const r=this.getGcsUri(n),p=this.getBigqueryUri(n);if(r)r.endsWith(".jsonl")?a.dest=`${r.slice(0,-6)}/dest`:a.dest=`${r}_dest_${u}`;else if(p)a.dest=`${p}_dest_${u}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=Ox(this.apiClient,n);return y=We("batchPredictionJobs",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json()),p.then(S=>td(S))}else{const g=Wg(this.apiClient,n);return y=We("{model}:batchGenerateContent",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),p.then(S=>_r(S))}}async createEmbeddingsInternal(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Yx(this.apiClient,n);return r=We("{model}:asyncBatchEmbedContent",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>_r(v))}}async get(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=o1(this.apiClient,n);return y=We("batchPredictionJobs/{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json()),p.then(S=>td(S))}else{const g=n1(this.apiClient,n);return y=We("batches/{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),p.then(S=>_r(S))}}async cancel(n){var i,a,u,r;let p="",y={};if(this.apiClient.isVertexAI()){const v=Fx(this.apiClient,n);p=We("batchPredictionJobs/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal})}else{const v=Lx(this.apiClient,n);p=We("batches/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=d1(n);return y=We("batchPredictionJobs",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=h1(S),T=new Jg;return Object.assign(T,x),T})}else{const g=c1(n);return y=We("batches",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=f1(S),T=new Jg;return Object.assign(T,x),T})}}async delete(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=Kx(this.apiClient,n);return y=We("batchPredictionJobs/{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>jx(S))}else{const g=Jx(this.apiClient,n);return y=We("batches/{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>Xx(S))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v1(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["data"]);i!=null&&d(n,["data"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function Zg(o){const n={},i=c(o,["parts"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(r=>H1(r))),d(n,["parts"],u)}const a=c(o,["role"]);return a!=null&&d(n,["role"],a),n}function x1(o,n){const i={},a=c(o,["ttl"]);n!==void 0&&a!=null&&d(n,["ttl"],a);const u=c(o,["expireTime"]);n!==void 0&&u!=null&&d(n,["expireTime"],u);const r=c(o,["displayName"]);n!==void 0&&r!=null&&d(n,["displayName"],r);const p=c(o,["contents"]);if(n!==void 0&&p!=null){let S=bo(p);Array.isArray(S)&&(S=S.map(x=>Zg(x))),d(n,["contents"],S)}const y=c(o,["systemInstruction"]);n!==void 0&&y!=null&&d(n,["systemInstruction"],Zg(Yn(y)));const v=c(o,["tools"]);if(n!==void 0&&v!=null){let S=v;Array.isArray(S)&&(S=S.map(x=>B1(x))),d(n,["tools"],S)}const g=c(o,["toolConfig"]);if(n!==void 0&&g!=null&&d(n,["toolConfig"],g),c(o,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function S1(o,n){const i={},a=c(o,["ttl"]);n!==void 0&&a!=null&&d(n,["ttl"],a);const u=c(o,["expireTime"]);n!==void 0&&u!=null&&d(n,["expireTime"],u);const r=c(o,["displayName"]);n!==void 0&&r!=null&&d(n,["displayName"],r);const p=c(o,["contents"]);if(n!==void 0&&p!=null){let x=bo(p);Array.isArray(x)&&(x=x.map(T=>T)),d(n,["contents"],x)}const y=c(o,["systemInstruction"]);n!==void 0&&y!=null&&d(n,["systemInstruction"],Yn(y));const v=c(o,["tools"]);if(n!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(T=>q1(T))),d(n,["tools"],x)}const g=c(o,["toolConfig"]);n!==void 0&&g!=null&&d(n,["toolConfig"],g);const S=c(o,["kmsKeyName"]);return n!==void 0&&S!=null&&d(n,["encryption_spec","kmsKeyName"],S),i}function C1(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["model"],Mm(o,a));const u=c(n,["config"]);return u!=null&&x1(u,i),i}function T1(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["model"],Mm(o,a));const u=c(n,["config"]);return u!=null&&S1(u,i),i}function E1(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],il(o,a)),i}function w1(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],il(o,a)),i}function A1(o){const n={},i=c(o,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function b1(o){const n={},i=c(o,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function _1(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["fileUri"]);i!=null&&d(n,["fileUri"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function M1(o){const n={};if(c(o,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=c(o,["description"]);i!=null&&d(n,["description"],i);const a=c(o,["name"]);a!=null&&d(n,["name"],a);const u=c(o,["parameters"]);u!=null&&d(n,["parameters"],u);const r=c(o,["parametersJsonSchema"]);r!=null&&d(n,["parametersJsonSchema"],r);const p=c(o,["response"]);p!=null&&d(n,["response"],p);const y=c(o,["responseJsonSchema"]);return y!=null&&d(n,["responseJsonSchema"],y),n}function R1(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],il(o,a)),i}function N1(o,n){const i={},a=c(n,["name"]);return a!=null&&d(i,["_url","name"],il(o,a)),i}function D1(o){const n={};if(c(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(o,["enableWidget"]);return i!=null&&d(n,["enableWidget"],i),n}function I1(o){const n={},i=c(o,["timeRangeFilter"]);if(i!=null&&d(n,["timeRangeFilter"],i),c(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function U1(o,n){const i={},a=c(o,["pageSize"]);n!==void 0&&a!=null&&d(n,["_query","pageSize"],a);const u=c(o,["pageToken"]);return n!==void 0&&u!=null&&d(n,["_query","pageToken"],u),i}function k1(o,n){const i={},a=c(o,["pageSize"]);n!==void 0&&a!=null&&d(n,["_query","pageSize"],a);const u=c(o,["pageToken"]);return n!==void 0&&u!=null&&d(n,["_query","pageToken"],u),i}function z1(o){const n={},i=c(o,["config"]);return i!=null&&U1(i,n),n}function P1(o){const n={},i=c(o,["config"]);return i!=null&&k1(i,n),n}function L1(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const u=c(o,["cachedContents"]);if(u!=null){let r=u;Array.isArray(r)&&(r=r.map(p=>p)),d(n,["cachedContents"],r)}return n}function F1(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const u=c(o,["cachedContents"]);if(u!=null){let r=u;Array.isArray(r)&&(r=r.map(p=>p)),d(n,["cachedContents"],r)}return n}function H1(o){const n={},i=c(o,["videoMetadata"]);i!=null&&d(n,["videoMetadata"],i);const a=c(o,["thought"]);a!=null&&d(n,["thought"],a);const u=c(o,["inlineData"]);u!=null&&d(n,["inlineData"],v1(u));const r=c(o,["fileData"]);r!=null&&d(n,["fileData"],_1(r));const p=c(o,["thoughtSignature"]);p!=null&&d(n,["thoughtSignature"],p);const y=c(o,["functionCall"]);y!=null&&d(n,["functionCall"],y);const v=c(o,["codeExecutionResult"]);v!=null&&d(n,["codeExecutionResult"],v);const g=c(o,["executableCode"]);g!=null&&d(n,["executableCode"],g);const S=c(o,["functionResponse"]);S!=null&&d(n,["functionResponse"],S);const x=c(o,["text"]);return x!=null&&d(n,["text"],x),n}function B1(o){const n={},i=c(o,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(S=>S)),d(n,["functionDeclarations"],g)}if(c(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(o,["googleSearch"]);a!=null&&d(n,["googleSearch"],I1(a));const u=c(o,["googleSearchRetrieval"]);if(u!=null&&d(n,["googleSearchRetrieval"],u),c(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(o,["googleMaps"]);r!=null&&d(n,["googleMaps"],D1(r));const p=c(o,["urlContext"]);p!=null&&d(n,["urlContext"],p);const y=c(o,["computerUse"]);y!=null&&d(n,["computerUse"],y);const v=c(o,["codeExecution"]);return v!=null&&d(n,["codeExecution"],v),n}function q1(o){const n={},i=c(o,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(T=>M1(T))),d(n,["functionDeclarations"],x)}const a=c(o,["retrieval"]);a!=null&&d(n,["retrieval"],a);const u=c(o,["googleSearch"]);u!=null&&d(n,["googleSearch"],u);const r=c(o,["googleSearchRetrieval"]);r!=null&&d(n,["googleSearchRetrieval"],r);const p=c(o,["enterpriseWebSearch"]);p!=null&&d(n,["enterpriseWebSearch"],p);const y=c(o,["googleMaps"]);y!=null&&d(n,["googleMaps"],y);const v=c(o,["urlContext"]);v!=null&&d(n,["urlContext"],v);const g=c(o,["computerUse"]);g!=null&&d(n,["computerUse"],g);const S=c(o,["codeExecution"]);return S!=null&&d(n,["codeExecution"],S),n}function G1(o,n){const i={},a=c(o,["ttl"]);n!==void 0&&a!=null&&d(n,["ttl"],a);const u=c(o,["expireTime"]);return n!==void 0&&u!=null&&d(n,["expireTime"],u),i}function O1(o,n){const i={},a=c(o,["ttl"]);n!==void 0&&a!=null&&d(n,["ttl"],a);const u=c(o,["expireTime"]);return n!==void 0&&u!=null&&d(n,["expireTime"],u),i}function V1(o,n){const i={},a=c(n,["name"]);a!=null&&d(i,["_url","name"],il(o,a));const u=c(n,["config"]);return u!=null&&G1(u,i),i}function Y1(o,n){const i={},a=c(n,["name"]);a!=null&&d(i,["_url","name"],il(o,a));const u=c(n,["config"]);return u!=null&&O1(u,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J1 extends mi{constructor(n){super(),this.apiClient=n,this.list=async(i={})=>new us(gi.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(i),i)}async create(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=T1(this.apiClient,n);return y=We("cachedContents",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json()),p.then(S=>S)}else{const g=C1(this.apiClient,n);return y=We("cachedContents",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),p.then(S=>S)}}async get(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=N1(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json()),p.then(S=>S)}else{const g=R1(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),p.then(S=>S)}}async delete(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=w1(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=b1(S),T=new Vg;return Object.assign(T,x),T})}else{const g=E1(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=A1(S),T=new Vg;return Object.assign(T,x),T})}}async update(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=Y1(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json()),p.then(S=>S)}else{const g=V1(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),p.then(S=>S)}}async listInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=P1(n);return y=We("cachedContents",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=F1(S),T=new Yg;return Object.assign(T,x),T})}else{const g=z1(n);return y=We("cachedContents",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=L1(S),T=new Yg;return Object.assign(T,x),T})}}}function Qg(o){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&o[n],a=0;if(i)return i.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&a>=o.length&&(o=void 0),{value:o&&o[a++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function tn(o){return this instanceof tn?(this.v=o,this):new tn(o)}function aa(o,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(o,n||[]),u,r=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",p),u[Symbol.asyncIterator]=function(){return this},u;function p(b){return function(I){return Promise.resolve(I).then(b,x)}}function y(b,I){a[b]&&(u[b]=function(z){return new Promise(function(q,F){r.push([b,z,q,F])>1||v(b,z)})},I&&(u[b]=I(u[b])))}function v(b,I){try{g(a[b](I))}catch(z){T(r[0][3],z)}}function g(b){b.value instanceof tn?Promise.resolve(b.value.v).then(S,x):T(r[0][2],b)}function S(b){v("next",b)}function x(b){v("throw",b)}function T(b,I){b(I),r.shift(),r.length&&v(r[0][0],r[0][1])}}function rs(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],i;return n?n.call(o):(o=typeof Qg=="function"?Qg(o):o[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(r){i[r]=o[r]&&function(p){return new Promise(function(y,v){p=o[r](p),u(y,v,p.done,p.value)})}}function u(r,p,y,v){Promise.resolve(v).then(function(g){r({value:g,done:y})},p)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K1(o){var n;if(o.candidates==null||o.candidates.length===0)return!1;const i=(n=o.candidates[0])===null||n===void 0?void 0:n.content;return i===void 0?!1:qm(i)}function qm(o){if(o.parts===void 0||o.parts.length===0)return!1;for(const n of o.parts)if(n===void 0||Object.keys(n).length===0)return!1;return!0}function X1(o){if(o.length!==0){for(const n of o)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function $g(o){if(o===void 0||o.length===0)return[];const n=[],i=o.length;let a=0;for(;a<i;)if(o[a].role==="user")n.push(o[a]),a++;else{const u=[];let r=!0;for(;a<i&&o[a].role==="model";)u.push(o[a]),r&&!qm(o[a])&&(r=!1),a++;r?n.push(...u):n.pop()}return n}class j1{constructor(n,i){this.modelsModule=n,this.apiClient=i}create(n){return new W1(this.apiClient,this.modelsModule,n.model,n.config,structuredClone(n.history))}}class W1{constructor(n,i,a,u={},r=[]){this.apiClient=n,this.modelsModule=i,this.model=a,this.config=u,this.history=r,this.sendPromise=Promise.resolve(),X1(r)}async sendMessage(n){var i;await this.sendPromise;const a=Yn(n.message),u=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(i=n.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var r,p,y;const v=await u,g=(p=(r=v.candidates)===null||r===void 0?void 0:r[0])===null||p===void 0?void 0:p.content,S=v.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let T=[];S!=null&&(T=(y=S.slice(x))!==null&&y!==void 0?y:[]);const b=g?[g]:[];this.recordHistory(a,b,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),u}async sendMessageStream(n){var i;await this.sendPromise;const a=Yn(n.message),u=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(i=n.config)!==null&&i!==void 0?i:this.config});this.sendPromise=u.then(()=>{}).catch(()=>{});const r=await u;return this.processStreamResponse(r,a)}getHistory(n=!1){const i=n?$g(this.history):this.history;return structuredClone(i)}processStreamResponse(n,i){var a,u;return aa(this,arguments,function*(){var p,y,v,g;const S=[];try{for(var x=!0,T=rs(n),b;b=yield tn(T.next()),p=b.done,!p;x=!0){g=b.value,x=!1;const I=g;if(K1(I)){const z=(u=(a=I.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content;z!==void 0&&S.push(z)}yield yield tn(I)}}catch(I){y={error:I}}finally{try{!x&&!p&&(v=T.return)&&(yield tn(v.call(T)))}finally{if(y)throw y.error}}this.recordHistory(i,S)})}recordHistory(n,i,a){let u=[];i.length>0&&i.every(r=>r.role!==void 0)?u=i:u.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...$g(a)):this.history.push(n),this.history.push(...u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ir extends Error{constructor(n){super(n.message),this.name="ApiError",this.status=n.status,Object.setPrototypeOf(this,Ir.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z1(o){const n={},i=c(o,["file"]);return i!=null&&d(n,["file"],i),n}function Q1(o){const n={},i=c(o,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function $1(o){const n={},i=c(o,["name"]);return i!=null&&d(n,["_url","file"],km(i)),n}function eS(o){const n={},i=c(o,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function tS(o){const n={},i=c(o,["name"]);return i!=null&&d(n,["_url","file"],km(i)),n}function nS(o,n){const i={},a=c(o,["pageSize"]);n!==void 0&&a!=null&&d(n,["_query","pageSize"],a);const u=c(o,["pageToken"]);return n!==void 0&&u!=null&&d(n,["_query","pageToken"],u),i}function oS(o){const n={},i=c(o,["config"]);return i!=null&&nS(i,n),n}function lS(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const u=c(o,["files"]);if(u!=null){let r=u;Array.isArray(r)&&(r=r.map(p=>p)),d(n,["files"],r)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iS extends mi{constructor(n){super(),this.apiClient=n,this.list=async(i={})=>new us(gi.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(i),i)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(i=>i)}async download(n){await this.apiClient.downloadFile(n)}async listInternal(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=oS(n);return r=We("files",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(g=>{const S=g;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const g=lS(v),S=new mx;return Object.assign(S,g),S})}}async createInternal(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Z1(n);return r=We("upload/v1beta/files",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const g=Q1(v),S=new yx;return Object.assign(S,g),S})}}async get(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=tS(n);return r=We("files/{file}",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=$1(n);return r=We("files/{file}",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(g=>{const S=g;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const g=eS(v),S=new vx;return Object.assign(S,g),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mr(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["data"]);i!=null&&d(n,["data"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function aS(o){const n={},i=c(o,["parts"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(r=>CS(r))),d(n,["parts"],u)}const a=c(o,["role"]);return a!=null&&d(n,["role"],a),n}function sS(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["fileUri"]);i!=null&&d(n,["fileUri"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function rS(o){const n={};if(c(o,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=c(o,["description"]);i!=null&&d(n,["description"],i);const a=c(o,["name"]);a!=null&&d(n,["name"],a);const u=c(o,["parameters"]);u!=null&&d(n,["parameters"],u);const r=c(o,["parametersJsonSchema"]);r!=null&&d(n,["parametersJsonSchema"],r);const p=c(o,["response"]);p!=null&&d(n,["response"],p);const y=c(o,["responseJsonSchema"]);return y!=null&&d(n,["responseJsonSchema"],y),n}function uS(o){const n={},i=c(o,["modelSelectionConfig"]);i!=null&&d(n,["modelConfig"],i);const a=c(o,["audioTimestamp"]);a!=null&&d(n,["audioTimestamp"],a);const u=c(o,["candidateCount"]);u!=null&&d(n,["candidateCount"],u);const r=c(o,["enableAffectiveDialog"]);r!=null&&d(n,["enableAffectiveDialog"],r);const p=c(o,["frequencyPenalty"]);p!=null&&d(n,["frequencyPenalty"],p);const y=c(o,["logprobs"]);y!=null&&d(n,["logprobs"],y);const v=c(o,["maxOutputTokens"]);v!=null&&d(n,["maxOutputTokens"],v);const g=c(o,["mediaResolution"]);g!=null&&d(n,["mediaResolution"],g);const S=c(o,["presencePenalty"]);S!=null&&d(n,["presencePenalty"],S);const x=c(o,["responseJsonSchema"]);x!=null&&d(n,["responseJsonSchema"],x);const T=c(o,["responseLogprobs"]);T!=null&&d(n,["responseLogprobs"],T);const b=c(o,["responseMimeType"]);b!=null&&d(n,["responseMimeType"],b);const I=c(o,["responseModalities"]);I!=null&&d(n,["responseModalities"],I);const z=c(o,["responseSchema"]);z!=null&&d(n,["responseSchema"],z);const q=c(o,["routingConfig"]);q!=null&&d(n,["routingConfig"],q);const F=c(o,["seed"]);F!=null&&d(n,["seed"],F);const P=c(o,["speechConfig"]);P!=null&&d(n,["speechConfig"],Gm(P));const H=c(o,["stopSequences"]);H!=null&&d(n,["stopSequences"],H);const ee=c(o,["temperature"]);ee!=null&&d(n,["temperature"],ee);const _e=c(o,["thinkingConfig"]);_e!=null&&d(n,["thinkingConfig"],_e);const ye=c(o,["topK"]);ye!=null&&d(n,["topK"],ye);const ie=c(o,["topP"]);return ie!=null&&d(n,["topP"],ie),n}function cS(o){const n={};if(c(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(o,["enableWidget"]);return i!=null&&d(n,["enableWidget"],i),n}function dS(o){const n={},i=c(o,["timeRangeFilter"]);if(i!=null&&d(n,["timeRangeFilter"],i),c(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function fS(o,n){const i={},a=c(o,["generationConfig"]);n!==void 0&&a!=null&&d(n,["setup","generationConfig"],a);const u=c(o,["responseModalities"]);n!==void 0&&u!=null&&d(n,["setup","generationConfig","responseModalities"],u);const r=c(o,["temperature"]);n!==void 0&&r!=null&&d(n,["setup","generationConfig","temperature"],r);const p=c(o,["topP"]);n!==void 0&&p!=null&&d(n,["setup","generationConfig","topP"],p);const y=c(o,["topK"]);n!==void 0&&y!=null&&d(n,["setup","generationConfig","topK"],y);const v=c(o,["maxOutputTokens"]);n!==void 0&&v!=null&&d(n,["setup","generationConfig","maxOutputTokens"],v);const g=c(o,["mediaResolution"]);n!==void 0&&g!=null&&d(n,["setup","generationConfig","mediaResolution"],g);const S=c(o,["seed"]);n!==void 0&&S!=null&&d(n,["setup","generationConfig","seed"],S);const x=c(o,["speechConfig"]);n!==void 0&&x!=null&&d(n,["setup","generationConfig","speechConfig"],md(x));const T=c(o,["thinkingConfig"]);n!==void 0&&T!=null&&d(n,["setup","generationConfig","thinkingConfig"],T);const b=c(o,["enableAffectiveDialog"]);n!==void 0&&b!=null&&d(n,["setup","generationConfig","enableAffectiveDialog"],b);const I=c(o,["systemInstruction"]);n!==void 0&&I!=null&&d(n,["setup","systemInstruction"],aS(Yn(I)));const z=c(o,["tools"]);if(n!==void 0&&z!=null){let ye=ua(z);Array.isArray(ye)&&(ye=ye.map(ie=>ES(ra(ie)))),d(n,["setup","tools"],ye)}const q=c(o,["sessionResumption"]);n!==void 0&&q!=null&&d(n,["setup","sessionResumption"],TS(q));const F=c(o,["inputAudioTranscription"]);n!==void 0&&F!=null&&d(n,["setup","inputAudioTranscription"],F);const P=c(o,["outputAudioTranscription"]);n!==void 0&&P!=null&&d(n,["setup","outputAudioTranscription"],P);const H=c(o,["realtimeInputConfig"]);n!==void 0&&H!=null&&d(n,["setup","realtimeInputConfig"],H);const ee=c(o,["contextWindowCompression"]);n!==void 0&&ee!=null&&d(n,["setup","contextWindowCompression"],ee);const _e=c(o,["proactivity"]);return n!==void 0&&_e!=null&&d(n,["setup","proactivity"],_e),i}function hS(o,n){const i={},a=c(o,["generationConfig"]);n!==void 0&&a!=null&&d(n,["setup","generationConfig"],uS(a));const u=c(o,["responseModalities"]);n!==void 0&&u!=null&&d(n,["setup","generationConfig","responseModalities"],u);const r=c(o,["temperature"]);n!==void 0&&r!=null&&d(n,["setup","generationConfig","temperature"],r);const p=c(o,["topP"]);n!==void 0&&p!=null&&d(n,["setup","generationConfig","topP"],p);const y=c(o,["topK"]);n!==void 0&&y!=null&&d(n,["setup","generationConfig","topK"],y);const v=c(o,["maxOutputTokens"]);n!==void 0&&v!=null&&d(n,["setup","generationConfig","maxOutputTokens"],v);const g=c(o,["mediaResolution"]);n!==void 0&&g!=null&&d(n,["setup","generationConfig","mediaResolution"],g);const S=c(o,["seed"]);n!==void 0&&S!=null&&d(n,["setup","generationConfig","seed"],S);const x=c(o,["speechConfig"]);n!==void 0&&x!=null&&d(n,["setup","generationConfig","speechConfig"],Gm(md(x)));const T=c(o,["thinkingConfig"]);n!==void 0&&T!=null&&d(n,["setup","generationConfig","thinkingConfig"],T);const b=c(o,["enableAffectiveDialog"]);n!==void 0&&b!=null&&d(n,["setup","generationConfig","enableAffectiveDialog"],b);const I=c(o,["systemInstruction"]);n!==void 0&&I!=null&&d(n,["setup","systemInstruction"],Yn(I));const z=c(o,["tools"]);if(n!==void 0&&z!=null){let ye=ua(z);Array.isArray(ye)&&(ye=ye.map(ie=>wS(ra(ie)))),d(n,["setup","tools"],ye)}const q=c(o,["sessionResumption"]);n!==void 0&&q!=null&&d(n,["setup","sessionResumption"],q);const F=c(o,["inputAudioTranscription"]);n!==void 0&&F!=null&&d(n,["setup","inputAudioTranscription"],F);const P=c(o,["outputAudioTranscription"]);n!==void 0&&P!=null&&d(n,["setup","outputAudioTranscription"],P);const H=c(o,["realtimeInputConfig"]);n!==void 0&&H!=null&&d(n,["setup","realtimeInputConfig"],H);const ee=c(o,["contextWindowCompression"]);n!==void 0&&ee!=null&&d(n,["setup","contextWindowCompression"],ee);const _e=c(o,["proactivity"]);return n!==void 0&&_e!=null&&d(n,["setup","proactivity"],_e),i}function pS(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["setup","model"],Pt(o,a));const u=c(n,["config"]);return u!=null&&d(i,["config"],fS(u,i)),i}function gS(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["setup","model"],Pt(o,a));const u=c(n,["config"]);return u!=null&&d(i,["config"],hS(u,i)),i}function mS(o){const n={},i=c(o,["musicGenerationConfig"]);return i!=null&&d(n,["musicGenerationConfig"],i),n}function yS(o){const n={},i=c(o,["weightedPrompts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),d(n,["weightedPrompts"],a)}return n}function vS(o){const n={},i=c(o,["media"]);if(i!=null){let g=Rm(i);Array.isArray(g)&&(g=g.map(S=>Mr(S))),d(n,["mediaChunks"],g)}const a=c(o,["audio"]);a!=null&&d(n,["audio"],Mr(Dm(a)));const u=c(o,["audioStreamEnd"]);u!=null&&d(n,["audioStreamEnd"],u);const r=c(o,["video"]);r!=null&&d(n,["video"],Mr(Nm(r)));const p=c(o,["text"]);p!=null&&d(n,["text"],p);const y=c(o,["activityStart"]);y!=null&&d(n,["activityStart"],y);const v=c(o,["activityEnd"]);return v!=null&&d(n,["activityEnd"],v),n}function xS(o){const n={},i=c(o,["media"]);if(i!=null){let g=Rm(i);Array.isArray(g)&&(g=g.map(S=>S)),d(n,["mediaChunks"],g)}const a=c(o,["audio"]);a!=null&&d(n,["audio"],Dm(a));const u=c(o,["audioStreamEnd"]);u!=null&&d(n,["audioStreamEnd"],u);const r=c(o,["video"]);r!=null&&d(n,["video"],Nm(r));const p=c(o,["text"]);p!=null&&d(n,["text"],p);const y=c(o,["activityStart"]);y!=null&&d(n,["activityStart"],y);const v=c(o,["activityEnd"]);return v!=null&&d(n,["activityEnd"],v),n}function SS(o){const n={},i=c(o,["setupComplete"]);i!=null&&d(n,["setupComplete"],i);const a=c(o,["serverContent"]);a!=null&&d(n,["serverContent"],a);const u=c(o,["toolCall"]);u!=null&&d(n,["toolCall"],u);const r=c(o,["toolCallCancellation"]);r!=null&&d(n,["toolCallCancellation"],r);const p=c(o,["usageMetadata"]);p!=null&&d(n,["usageMetadata"],AS(p));const y=c(o,["goAway"]);y!=null&&d(n,["goAway"],y);const v=c(o,["sessionResumptionUpdate"]);return v!=null&&d(n,["sessionResumptionUpdate"],v),n}function CS(o){const n={},i=c(o,["videoMetadata"]);i!=null&&d(n,["videoMetadata"],i);const a=c(o,["thought"]);a!=null&&d(n,["thought"],a);const u=c(o,["inlineData"]);u!=null&&d(n,["inlineData"],Mr(u));const r=c(o,["fileData"]);r!=null&&d(n,["fileData"],sS(r));const p=c(o,["thoughtSignature"]);p!=null&&d(n,["thoughtSignature"],p);const y=c(o,["functionCall"]);y!=null&&d(n,["functionCall"],y);const v=c(o,["codeExecutionResult"]);v!=null&&d(n,["codeExecutionResult"],v);const g=c(o,["executableCode"]);g!=null&&d(n,["executableCode"],g);const S=c(o,["functionResponse"]);S!=null&&d(n,["functionResponse"],S);const x=c(o,["text"]);return x!=null&&d(n,["text"],x),n}function TS(o){const n={},i=c(o,["handle"]);if(i!=null&&d(n,["handle"],i),c(o,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function Gm(o){const n={},i=c(o,["voiceConfig"]);if(i!=null&&d(n,["voiceConfig"],i),c(o,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=c(o,["languageCode"]);return a!=null&&d(n,["languageCode"],a),n}function ES(o){const n={},i=c(o,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(S=>S)),d(n,["functionDeclarations"],g)}if(c(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(o,["googleSearch"]);a!=null&&d(n,["googleSearch"],dS(a));const u=c(o,["googleSearchRetrieval"]);if(u!=null&&d(n,["googleSearchRetrieval"],u),c(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(o,["googleMaps"]);r!=null&&d(n,["googleMaps"],cS(r));const p=c(o,["urlContext"]);p!=null&&d(n,["urlContext"],p);const y=c(o,["computerUse"]);y!=null&&d(n,["computerUse"],y);const v=c(o,["codeExecution"]);return v!=null&&d(n,["codeExecution"],v),n}function wS(o){const n={},i=c(o,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(T=>rS(T))),d(n,["functionDeclarations"],x)}const a=c(o,["retrieval"]);a!=null&&d(n,["retrieval"],a);const u=c(o,["googleSearch"]);u!=null&&d(n,["googleSearch"],u);const r=c(o,["googleSearchRetrieval"]);r!=null&&d(n,["googleSearchRetrieval"],r);const p=c(o,["enterpriseWebSearch"]);p!=null&&d(n,["enterpriseWebSearch"],p);const y=c(o,["googleMaps"]);y!=null&&d(n,["googleMaps"],y);const v=c(o,["urlContext"]);v!=null&&d(n,["urlContext"],v);const g=c(o,["computerUse"]);g!=null&&d(n,["computerUse"],g);const S=c(o,["codeExecution"]);return S!=null&&d(n,["codeExecution"],S),n}function AS(o){const n={},i=c(o,["promptTokenCount"]);i!=null&&d(n,["promptTokenCount"],i);const a=c(o,["cachedContentTokenCount"]);a!=null&&d(n,["cachedContentTokenCount"],a);const u=c(o,["candidatesTokenCount"]);u!=null&&d(n,["responseTokenCount"],u);const r=c(o,["toolUsePromptTokenCount"]);r!=null&&d(n,["toolUsePromptTokenCount"],r);const p=c(o,["thoughtsTokenCount"]);p!=null&&d(n,["thoughtsTokenCount"],p);const y=c(o,["totalTokenCount"]);y!=null&&d(n,["totalTokenCount"],y);const v=c(o,["promptTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(I=>I)),d(n,["promptTokensDetails"],b)}const g=c(o,["cacheTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(I=>I)),d(n,["cacheTokensDetails"],b)}const S=c(o,["candidatesTokensDetails"]);if(S!=null){let b=S;Array.isArray(b)&&(b=b.map(I=>I)),d(n,["responseTokensDetails"],b)}const x=c(o,["toolUsePromptTokensDetails"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(I=>I)),d(n,["toolUsePromptTokensDetails"],b)}const T=c(o,["trafficType"]);return T!=null&&d(n,["trafficType"],T),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bS(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["data"]);i!=null&&d(n,["data"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function _S(o){const n={},i=c(o,["content"]);i!=null&&d(n,["content"],i);const a=c(o,["citationMetadata"]);a!=null&&d(n,["citationMetadata"],MS(a));const u=c(o,["tokenCount"]);u!=null&&d(n,["tokenCount"],u);const r=c(o,["finishReason"]);r!=null&&d(n,["finishReason"],r);const p=c(o,["urlContextMetadata"]);p!=null&&d(n,["urlContextMetadata"],p);const y=c(o,["avgLogprobs"]);y!=null&&d(n,["avgLogprobs"],y);const v=c(o,["groundingMetadata"]);v!=null&&d(n,["groundingMetadata"],v);const g=c(o,["index"]);g!=null&&d(n,["index"],g);const S=c(o,["logprobsResult"]);S!=null&&d(n,["logprobsResult"],S);const x=c(o,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(b=>b)),d(n,["safetyRatings"],T)}return n}function MS(o){const n={},i=c(o,["citationSources"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),d(n,["citations"],a)}return n}function RS(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["contents"]);if(u!=null){let r=bo(u);Array.isArray(r)&&(r=r.map(p=>p)),d(i,["contents"],r)}return i}function NS(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["tokensInfo"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(r=>r)),d(n,["tokensInfo"],u)}return n}function DS(o){const n={},i=c(o,["values"]);i!=null&&d(n,["values"],i);const a=c(o,["statistics"]);return a!=null&&d(n,["statistics"],IS(a)),n}function IS(o){const n={},i=c(o,["truncated"]);i!=null&&d(n,["truncated"],i);const a=c(o,["token_count"]);return a!=null&&d(n,["tokenCount"],a),n}function Ur(o){const n={},i=c(o,["parts"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(r=>LC(r))),d(n,["parts"],u)}const a=c(o,["role"]);return a!=null&&d(n,["role"],a),n}function US(o){const n={},i=c(o,["controlType"]);i!=null&&d(n,["controlType"],i);const a=c(o,["enableControlImageComputation"]);return a!=null&&d(n,["computeControl"],a),n}function kS(o){const n={};if(c(o,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(o,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(o,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function zS(o,n){const i={},a=c(o,["systemInstruction"]);n!==void 0&&a!=null&&d(n,["systemInstruction"],Yn(a));const u=c(o,["tools"]);if(n!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>Km(y))),d(n,["tools"],p)}const r=c(o,["generationConfig"]);return n!==void 0&&r!=null&&d(n,["generationConfig"],wC(r)),i}function PS(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["contents"]);if(u!=null){let p=bo(u);Array.isArray(p)&&(p=p.map(y=>Ur(y))),d(i,["contents"],p)}const r=c(n,["config"]);return r!=null&&kS(r),i}function LS(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["contents"]);if(u!=null){let p=bo(u);Array.isArray(p)&&(p=p.map(y=>y)),d(i,["contents"],p)}const r=c(n,["config"]);return r!=null&&zS(r,i),i}function FS(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["totalTokens"]);a!=null&&d(n,["totalTokens"],a);const u=c(o,["cachedContentTokenCount"]);return u!=null&&d(n,["cachedContentTokenCount"],u),n}function HS(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["totalTokens"]);return a!=null&&d(n,["totalTokens"],a),n}function BS(o,n){const i={},a=c(n,["model"]);return a!=null&&d(i,["_url","name"],Pt(o,a)),i}function qS(o,n){const i={},a=c(n,["model"]);return a!=null&&d(i,["_url","name"],Pt(o,a)),i}function GS(o){const n={},i=c(o,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function OS(o){const n={},i=c(o,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function VS(o,n){const i={},a=c(o,["outputGcsUri"]);n!==void 0&&a!=null&&d(n,["parameters","storageUri"],a);const u=c(o,["negativePrompt"]);n!==void 0&&u!=null&&d(n,["parameters","negativePrompt"],u);const r=c(o,["numberOfImages"]);n!==void 0&&r!=null&&d(n,["parameters","sampleCount"],r);const p=c(o,["aspectRatio"]);n!==void 0&&p!=null&&d(n,["parameters","aspectRatio"],p);const y=c(o,["guidanceScale"]);n!==void 0&&y!=null&&d(n,["parameters","guidanceScale"],y);const v=c(o,["seed"]);n!==void 0&&v!=null&&d(n,["parameters","seed"],v);const g=c(o,["safetyFilterLevel"]);n!==void 0&&g!=null&&d(n,["parameters","safetySetting"],g);const S=c(o,["personGeneration"]);n!==void 0&&S!=null&&d(n,["parameters","personGeneration"],S);const x=c(o,["includeSafetyAttributes"]);n!==void 0&&x!=null&&d(n,["parameters","includeSafetyAttributes"],x);const T=c(o,["includeRaiReason"]);n!==void 0&&T!=null&&d(n,["parameters","includeRaiReason"],T);const b=c(o,["language"]);n!==void 0&&b!=null&&d(n,["parameters","language"],b);const I=c(o,["outputMimeType"]);n!==void 0&&I!=null&&d(n,["parameters","outputOptions","mimeType"],I);const z=c(o,["outputCompressionQuality"]);n!==void 0&&z!=null&&d(n,["parameters","outputOptions","compressionQuality"],z);const q=c(o,["addWatermark"]);n!==void 0&&q!=null&&d(n,["parameters","addWatermark"],q);const F=c(o,["labels"]);n!==void 0&&F!=null&&d(n,["labels"],F);const P=c(o,["editMode"]);n!==void 0&&P!=null&&d(n,["parameters","editMode"],P);const H=c(o,["baseSteps"]);return n!==void 0&&H!=null&&d(n,["parameters","editConfig","baseSteps"],H),i}function YS(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["prompt"]);u!=null&&d(i,["instances[0]","prompt"],u);const r=c(n,["referenceImages"]);if(r!=null){let y=r;Array.isArray(y)&&(y=y.map(v=>OC(v))),d(i,["instances[0]","referenceImages"],y)}const p=c(n,["config"]);return p!=null&&VS(p,i),i}function JS(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(r=>kr(r))),d(n,["generatedImages"],u)}return n}function KS(o,n){const i={},a=c(o,["taskType"]);n!==void 0&&a!=null&&d(n,["requests[]","taskType"],a);const u=c(o,["title"]);n!==void 0&&u!=null&&d(n,["requests[]","title"],u);const r=c(o,["outputDimensionality"]);if(n!==void 0&&r!=null&&d(n,["requests[]","outputDimensionality"],r),c(o,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(o,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function XS(o,n){const i={},a=c(o,["taskType"]);n!==void 0&&a!=null&&d(n,["instances[]","task_type"],a);const u=c(o,["title"]);n!==void 0&&u!=null&&d(n,["instances[]","title"],u);const r=c(o,["outputDimensionality"]);n!==void 0&&r!=null&&d(n,["parameters","outputDimensionality"],r);const p=c(o,["mimeType"]);n!==void 0&&p!=null&&d(n,["instances[]","mimeType"],p);const y=c(o,["autoTruncate"]);return n!==void 0&&y!=null&&d(n,["parameters","autoTruncate"],y),i}function jS(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["contents"]);if(u!=null){let y=hd(o,u);Array.isArray(y)&&(y=y.map(v=>v)),d(i,["requests[]","content"],y)}const r=c(n,["config"]);r!=null&&KS(r,i);const p=c(n,["model"]);return p!==void 0&&d(i,["requests[]","model"],Pt(o,p)),i}function WS(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["contents"]);if(u!=null){let p=hd(o,u);Array.isArray(p)&&(p=p.map(y=>y)),d(i,["instances[]","content"],p)}const r=c(n,["config"]);return r!=null&&XS(r,i),i}function ZS(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["embeddings"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(p=>p)),d(n,["embeddings"],r)}const u=c(o,["metadata"]);return u!=null&&d(n,["metadata"],u),n}function QS(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["predictions[]","embeddings"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(p=>DS(p))),d(n,["embeddings"],r)}const u=c(o,["metadata"]);return u!=null&&d(n,["metadata"],u),n}function $S(o){const n={},i=c(o,["endpoint"]);i!=null&&d(n,["name"],i);const a=c(o,["deployedModelId"]);return a!=null&&d(n,["deployedModelId"],a),n}function eC(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["fileUri"]);i!=null&&d(n,["fileUri"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function tC(o){const n={};if(c(o,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=c(o,["description"]);i!=null&&d(n,["description"],i);const a=c(o,["name"]);a!=null&&d(n,["name"],a);const u=c(o,["parameters"]);u!=null&&d(n,["parameters"],u);const r=c(o,["parametersJsonSchema"]);r!=null&&d(n,["parametersJsonSchema"],r);const p=c(o,["response"]);p!=null&&d(n,["response"],p);const y=c(o,["responseJsonSchema"]);return y!=null&&d(n,["responseJsonSchema"],y),n}function nC(o,n,i){const a={},u=c(n,["systemInstruction"]);i!==void 0&&u!=null&&d(i,["systemInstruction"],Ur(Yn(u)));const r=c(n,["temperature"]);r!=null&&d(a,["temperature"],r);const p=c(n,["topP"]);p!=null&&d(a,["topP"],p);const y=c(n,["topK"]);y!=null&&d(a,["topK"],y);const v=c(n,["candidateCount"]);v!=null&&d(a,["candidateCount"],v);const g=c(n,["maxOutputTokens"]);g!=null&&d(a,["maxOutputTokens"],g);const S=c(n,["stopSequences"]);S!=null&&d(a,["stopSequences"],S);const x=c(n,["responseLogprobs"]);x!=null&&d(a,["responseLogprobs"],x);const T=c(n,["logprobs"]);T!=null&&d(a,["logprobs"],T);const b=c(n,["presencePenalty"]);b!=null&&d(a,["presencePenalty"],b);const I=c(n,["frequencyPenalty"]);I!=null&&d(a,["frequencyPenalty"],I);const z=c(n,["seed"]);z!=null&&d(a,["seed"],z);const q=c(n,["responseMimeType"]);q!=null&&d(a,["responseMimeType"],q);const F=c(n,["responseSchema"]);F!=null&&d(a,["responseSchema"],pd(F));const P=c(n,["responseJsonSchema"]);if(P!=null&&d(a,["responseJsonSchema"],P),c(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=c(n,["safetySettings"]);if(i!==void 0&&H!=null){let Z=H;Array.isArray(Z)&&(Z=Z.map(gt=>VC(gt))),d(i,["safetySettings"],Z)}const ee=c(n,["tools"]);if(i!==void 0&&ee!=null){let Z=ua(ee);Array.isArray(Z)&&(Z=Z.map(gt=>WC(ra(gt)))),d(i,["tools"],Z)}const _e=c(n,["toolConfig"]);if(i!==void 0&&_e!=null&&d(i,["toolConfig"],_e),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ye=c(n,["cachedContent"]);i!==void 0&&ye!=null&&d(i,["cachedContent"],il(o,ye));const ie=c(n,["responseModalities"]);ie!=null&&d(a,["responseModalities"],ie);const ge=c(n,["mediaResolution"]);ge!=null&&d(a,["mediaResolution"],ge);const me=c(n,["speechConfig"]);if(me!=null&&d(a,["speechConfig"],gd(me)),c(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=c(n,["thinkingConfig"]);ce!=null&&d(a,["thinkingConfig"],ce);const De=c(n,["imageConfig"]);return De!=null&&d(a,["imageConfig"],De),a}function oC(o,n,i){const a={},u=c(n,["systemInstruction"]);i!==void 0&&u!=null&&d(i,["systemInstruction"],Yn(u));const r=c(n,["temperature"]);r!=null&&d(a,["temperature"],r);const p=c(n,["topP"]);p!=null&&d(a,["topP"],p);const y=c(n,["topK"]);y!=null&&d(a,["topK"],y);const v=c(n,["candidateCount"]);v!=null&&d(a,["candidateCount"],v);const g=c(n,["maxOutputTokens"]);g!=null&&d(a,["maxOutputTokens"],g);const S=c(n,["stopSequences"]);S!=null&&d(a,["stopSequences"],S);const x=c(n,["responseLogprobs"]);x!=null&&d(a,["responseLogprobs"],x);const T=c(n,["logprobs"]);T!=null&&d(a,["logprobs"],T);const b=c(n,["presencePenalty"]);b!=null&&d(a,["presencePenalty"],b);const I=c(n,["frequencyPenalty"]);I!=null&&d(a,["frequencyPenalty"],I);const z=c(n,["seed"]);z!=null&&d(a,["seed"],z);const q=c(n,["responseMimeType"]);q!=null&&d(a,["responseMimeType"],q);const F=c(n,["responseSchema"]);F!=null&&d(a,["responseSchema"],pd(F));const P=c(n,["responseJsonSchema"]);P!=null&&d(a,["responseJsonSchema"],P);const H=c(n,["routingConfig"]);H!=null&&d(a,["routingConfig"],H);const ee=c(n,["modelSelectionConfig"]);ee!=null&&d(a,["modelConfig"],ee);const _e=c(n,["safetySettings"]);if(i!==void 0&&_e!=null){let N=_e;Array.isArray(N)&&(N=N.map(se=>se)),d(i,["safetySettings"],N)}const ye=c(n,["tools"]);if(i!==void 0&&ye!=null){let N=ua(ye);Array.isArray(N)&&(N=N.map(se=>Km(ra(se)))),d(i,["tools"],N)}const ie=c(n,["toolConfig"]);i!==void 0&&ie!=null&&d(i,["toolConfig"],ie);const ge=c(n,["labels"]);i!==void 0&&ge!=null&&d(i,["labels"],ge);const me=c(n,["cachedContent"]);i!==void 0&&me!=null&&d(i,["cachedContent"],il(o,me));const ce=c(n,["responseModalities"]);ce!=null&&d(a,["responseModalities"],ce);const De=c(n,["mediaResolution"]);De!=null&&d(a,["mediaResolution"],De);const Z=c(n,["speechConfig"]);Z!=null&&d(a,["speechConfig"],Jm(gd(Z)));const gt=c(n,["audioTimestamp"]);gt!=null&&d(a,["audioTimestamp"],gt);const fe=c(n,["thinkingConfig"]);fe!=null&&d(a,["thinkingConfig"],fe);const it=c(n,["imageConfig"]);return it!=null&&d(a,["imageConfig"],it),a}function em(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["contents"]);if(u!=null){let p=bo(u);Array.isArray(p)&&(p=p.map(y=>Ur(y))),d(i,["contents"],p)}const r=c(n,["config"]);return r!=null&&d(i,["generationConfig"],nC(o,r,i)),i}function tm(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["contents"]);if(u!=null){let p=bo(u);Array.isArray(p)&&(p=p.map(y=>y)),d(i,["contents"],p)}const r=c(n,["config"]);return r!=null&&d(i,["generationConfig"],oC(o,r,i)),i}function nm(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(g=>_S(g))),d(n,["candidates"],v)}const u=c(o,["modelVersion"]);u!=null&&d(n,["modelVersion"],u);const r=c(o,["promptFeedback"]);r!=null&&d(n,["promptFeedback"],r);const p=c(o,["responseId"]);p!=null&&d(n,["responseId"],p);const y=c(o,["usageMetadata"]);return y!=null&&d(n,["usageMetadata"],y),n}function om(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["candidates"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(S=>S)),d(n,["candidates"],g)}const u=c(o,["createTime"]);u!=null&&d(n,["createTime"],u);const r=c(o,["modelVersion"]);r!=null&&d(n,["modelVersion"],r);const p=c(o,["promptFeedback"]);p!=null&&d(n,["promptFeedback"],p);const y=c(o,["responseId"]);y!=null&&d(n,["responseId"],y);const v=c(o,["usageMetadata"]);return v!=null&&d(n,["usageMetadata"],v),n}function lC(o,n){const i={};if(c(o,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(o,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=c(o,["numberOfImages"]);n!==void 0&&a!=null&&d(n,["parameters","sampleCount"],a);const u=c(o,["aspectRatio"]);n!==void 0&&u!=null&&d(n,["parameters","aspectRatio"],u);const r=c(o,["guidanceScale"]);if(n!==void 0&&r!=null&&d(n,["parameters","guidanceScale"],r),c(o,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(o,["safetyFilterLevel"]);n!==void 0&&p!=null&&d(n,["parameters","safetySetting"],p);const y=c(o,["personGeneration"]);n!==void 0&&y!=null&&d(n,["parameters","personGeneration"],y);const v=c(o,["includeSafetyAttributes"]);n!==void 0&&v!=null&&d(n,["parameters","includeSafetyAttributes"],v);const g=c(o,["includeRaiReason"]);n!==void 0&&g!=null&&d(n,["parameters","includeRaiReason"],g);const S=c(o,["language"]);n!==void 0&&S!=null&&d(n,["parameters","language"],S);const x=c(o,["outputMimeType"]);n!==void 0&&x!=null&&d(n,["parameters","outputOptions","mimeType"],x);const T=c(o,["outputCompressionQuality"]);if(n!==void 0&&T!=null&&d(n,["parameters","outputOptions","compressionQuality"],T),c(o,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(o,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=c(o,["imageSize"]);if(n!==void 0&&b!=null&&d(n,["parameters","sampleImageSize"],b),c(o,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function iC(o,n){const i={},a=c(o,["outputGcsUri"]);n!==void 0&&a!=null&&d(n,["parameters","storageUri"],a);const u=c(o,["negativePrompt"]);n!==void 0&&u!=null&&d(n,["parameters","negativePrompt"],u);const r=c(o,["numberOfImages"]);n!==void 0&&r!=null&&d(n,["parameters","sampleCount"],r);const p=c(o,["aspectRatio"]);n!==void 0&&p!=null&&d(n,["parameters","aspectRatio"],p);const y=c(o,["guidanceScale"]);n!==void 0&&y!=null&&d(n,["parameters","guidanceScale"],y);const v=c(o,["seed"]);n!==void 0&&v!=null&&d(n,["parameters","seed"],v);const g=c(o,["safetyFilterLevel"]);n!==void 0&&g!=null&&d(n,["parameters","safetySetting"],g);const S=c(o,["personGeneration"]);n!==void 0&&S!=null&&d(n,["parameters","personGeneration"],S);const x=c(o,["includeSafetyAttributes"]);n!==void 0&&x!=null&&d(n,["parameters","includeSafetyAttributes"],x);const T=c(o,["includeRaiReason"]);n!==void 0&&T!=null&&d(n,["parameters","includeRaiReason"],T);const b=c(o,["language"]);n!==void 0&&b!=null&&d(n,["parameters","language"],b);const I=c(o,["outputMimeType"]);n!==void 0&&I!=null&&d(n,["parameters","outputOptions","mimeType"],I);const z=c(o,["outputCompressionQuality"]);n!==void 0&&z!=null&&d(n,["parameters","outputOptions","compressionQuality"],z);const q=c(o,["addWatermark"]);n!==void 0&&q!=null&&d(n,["parameters","addWatermark"],q);const F=c(o,["labels"]);n!==void 0&&F!=null&&d(n,["labels"],F);const P=c(o,["imageSize"]);n!==void 0&&P!=null&&d(n,["parameters","sampleImageSize"],P);const H=c(o,["enhancePrompt"]);return n!==void 0&&H!=null&&d(n,["parameters","enhancePrompt"],H),i}function aC(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["prompt"]);u!=null&&d(i,["instances[0]","prompt"],u);const r=c(n,["config"]);return r!=null&&lC(r,i),i}function sC(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["prompt"]);u!=null&&d(i,["instances[0]","prompt"],u);const r=c(n,["config"]);return r!=null&&iC(r,i),i}function rC(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(p=>SC(p))),d(n,["generatedImages"],r)}const u=c(o,["positivePromptSafetyAttributes"]);return u!=null&&d(n,["positivePromptSafetyAttributes"],Vm(u)),n}function uC(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(p=>kr(p))),d(n,["generatedImages"],r)}const u=c(o,["positivePromptSafetyAttributes"]);return u!=null&&d(n,["positivePromptSafetyAttributes"],Ym(u)),n}function cC(o,n){const i={},a=c(o,["numberOfVideos"]);if(n!==void 0&&a!=null&&d(n,["parameters","sampleCount"],a),c(o,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(o,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=c(o,["durationSeconds"]);if(n!==void 0&&u!=null&&d(n,["parameters","durationSeconds"],u),c(o,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=c(o,["aspectRatio"]);n!==void 0&&r!=null&&d(n,["parameters","aspectRatio"],r);const p=c(o,["resolution"]);n!==void 0&&p!=null&&d(n,["parameters","resolution"],p);const y=c(o,["personGeneration"]);if(n!==void 0&&y!=null&&d(n,["parameters","personGeneration"],y),c(o,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=c(o,["negativePrompt"]);n!==void 0&&v!=null&&d(n,["parameters","negativePrompt"],v);const g=c(o,["enhancePrompt"]);if(n!==void 0&&g!=null&&d(n,["parameters","enhancePrompt"],g),c(o,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const S=c(o,["lastFrame"]);n!==void 0&&S!=null&&d(n,["instances[0]","lastFrame"],zr(S));const x=c(o,["referenceImages"]);if(n!==void 0&&x!=null){let T=x;Array.isArray(T)&&(T=T.map(b=>uT(b))),d(n,["instances[0]","referenceImages"],T)}if(c(o,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(o,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function dC(o,n){const i={},a=c(o,["numberOfVideos"]);n!==void 0&&a!=null&&d(n,["parameters","sampleCount"],a);const u=c(o,["outputGcsUri"]);n!==void 0&&u!=null&&d(n,["parameters","storageUri"],u);const r=c(o,["fps"]);n!==void 0&&r!=null&&d(n,["parameters","fps"],r);const p=c(o,["durationSeconds"]);n!==void 0&&p!=null&&d(n,["parameters","durationSeconds"],p);const y=c(o,["seed"]);n!==void 0&&y!=null&&d(n,["parameters","seed"],y);const v=c(o,["aspectRatio"]);n!==void 0&&v!=null&&d(n,["parameters","aspectRatio"],v);const g=c(o,["resolution"]);n!==void 0&&g!=null&&d(n,["parameters","resolution"],g);const S=c(o,["personGeneration"]);n!==void 0&&S!=null&&d(n,["parameters","personGeneration"],S);const x=c(o,["pubsubTopic"]);n!==void 0&&x!=null&&d(n,["parameters","pubsubTopic"],x);const T=c(o,["negativePrompt"]);n!==void 0&&T!=null&&d(n,["parameters","negativePrompt"],T);const b=c(o,["enhancePrompt"]);n!==void 0&&b!=null&&d(n,["parameters","enhancePrompt"],b);const I=c(o,["generateAudio"]);n!==void 0&&I!=null&&d(n,["parameters","generateAudio"],I);const z=c(o,["lastFrame"]);n!==void 0&&z!=null&&d(n,["instances[0]","lastFrame"],No(z));const q=c(o,["referenceImages"]);if(n!==void 0&&q!=null){let H=q;Array.isArray(H)&&(H=H.map(ee=>cT(ee))),d(n,["instances[0]","referenceImages"],H)}const F=c(o,["mask"]);n!==void 0&&F!=null&&d(n,["instances[0]","mask"],rT(F));const P=c(o,["compressionQuality"]);return n!==void 0&&P!=null&&d(n,["parameters","compressionQuality"],P),i}function fC(o){const n={},i=c(o,["name"]);i!=null&&d(n,["name"],i);const a=c(o,["metadata"]);a!=null&&d(n,["metadata"],a);const u=c(o,["done"]);u!=null&&d(n,["done"],u);const r=c(o,["error"]);r!=null&&d(n,["error"],r);const p=c(o,["response","generateVideoResponse"]);return p!=null&&d(n,["response"],mC(p)),n}function hC(o){const n={},i=c(o,["name"]);i!=null&&d(n,["name"],i);const a=c(o,["metadata"]);a!=null&&d(n,["metadata"],a);const u=c(o,["done"]);u!=null&&d(n,["done"],u);const r=c(o,["error"]);r!=null&&d(n,["error"],r);const p=c(o,["response"]);return p!=null&&d(n,["response"],yC(p)),n}function pC(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["prompt"]);u!=null&&d(i,["instances[0]","prompt"],u);const r=c(n,["image"]);r!=null&&d(i,["instances[0]","image"],zr(r));const p=c(n,["video"]);p!=null&&d(i,["instances[0]","video"],Xm(p));const y=c(n,["source"]);y!=null&&vC(y,i);const v=c(n,["config"]);return v!=null&&cC(v,i),i}function gC(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["prompt"]);u!=null&&d(i,["instances[0]","prompt"],u);const r=c(n,["image"]);r!=null&&d(i,["instances[0]","image"],No(r));const p=c(n,["video"]);p!=null&&d(i,["instances[0]","video"],jm(p));const y=c(n,["source"]);y!=null&&xC(y,i);const v=c(n,["config"]);return v!=null&&dC(v,i),i}function mC(o){const n={},i=c(o,["generatedSamples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(p=>TC(p))),d(n,["generatedVideos"],r)}const a=c(o,["raiMediaFilteredCount"]);a!=null&&d(n,["raiMediaFilteredCount"],a);const u=c(o,["raiMediaFilteredReasons"]);return u!=null&&d(n,["raiMediaFilteredReasons"],u),n}function yC(o){const n={},i=c(o,["videos"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(p=>EC(p))),d(n,["generatedVideos"],r)}const a=c(o,["raiMediaFilteredCount"]);a!=null&&d(n,["raiMediaFilteredCount"],a);const u=c(o,["raiMediaFilteredReasons"]);return u!=null&&d(n,["raiMediaFilteredReasons"],u),n}function vC(o,n){const i={},a=c(o,["prompt"]);n!==void 0&&a!=null&&d(n,["instances[0]","prompt"],a);const u=c(o,["image"]);n!==void 0&&u!=null&&d(n,["instances[0]","image"],zr(u));const r=c(o,["video"]);return n!==void 0&&r!=null&&d(n,["instances[0]","video"],Xm(r)),i}function xC(o,n){const i={},a=c(o,["prompt"]);n!==void 0&&a!=null&&d(n,["instances[0]","prompt"],a);const u=c(o,["image"]);n!==void 0&&u!=null&&d(n,["instances[0]","image"],No(u));const r=c(o,["video"]);return n!==void 0&&r!=null&&d(n,["instances[0]","video"],jm(r)),i}function SC(o){const n={},i=c(o,["_self"]);i!=null&&d(n,["image"],RC(i));const a=c(o,["raiFilteredReason"]);a!=null&&d(n,["raiFilteredReason"],a);const u=c(o,["_self"]);return u!=null&&d(n,["safetyAttributes"],Vm(u)),n}function kr(o){const n={},i=c(o,["_self"]);i!=null&&d(n,["image"],Om(i));const a=c(o,["raiFilteredReason"]);a!=null&&d(n,["raiFilteredReason"],a);const u=c(o,["_self"]);u!=null&&d(n,["safetyAttributes"],Ym(u));const r=c(o,["prompt"]);return r!=null&&d(n,["enhancedPrompt"],r),n}function CC(o){const n={},i=c(o,["_self"]);i!=null&&d(n,["mask"],Om(i));const a=c(o,["labels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(r=>r)),d(n,["labels"],u)}return n}function TC(o){const n={},i=c(o,["video"]);return i!=null&&d(n,["video"],aT(i)),n}function EC(o){const n={},i=c(o,["_self"]);return i!=null&&d(n,["video"],sT(i)),n}function wC(o){const n={},i=c(o,["modelSelectionConfig"]);i!=null&&d(n,["modelConfig"],i);const a=c(o,["audioTimestamp"]);a!=null&&d(n,["audioTimestamp"],a);const u=c(o,["candidateCount"]);u!=null&&d(n,["candidateCount"],u);const r=c(o,["enableAffectiveDialog"]);r!=null&&d(n,["enableAffectiveDialog"],r);const p=c(o,["frequencyPenalty"]);p!=null&&d(n,["frequencyPenalty"],p);const y=c(o,["logprobs"]);y!=null&&d(n,["logprobs"],y);const v=c(o,["maxOutputTokens"]);v!=null&&d(n,["maxOutputTokens"],v);const g=c(o,["mediaResolution"]);g!=null&&d(n,["mediaResolution"],g);const S=c(o,["presencePenalty"]);S!=null&&d(n,["presencePenalty"],S);const x=c(o,["responseJsonSchema"]);x!=null&&d(n,["responseJsonSchema"],x);const T=c(o,["responseLogprobs"]);T!=null&&d(n,["responseLogprobs"],T);const b=c(o,["responseMimeType"]);b!=null&&d(n,["responseMimeType"],b);const I=c(o,["responseModalities"]);I!=null&&d(n,["responseModalities"],I);const z=c(o,["responseSchema"]);z!=null&&d(n,["responseSchema"],z);const q=c(o,["routingConfig"]);q!=null&&d(n,["routingConfig"],q);const F=c(o,["seed"]);F!=null&&d(n,["seed"],F);const P=c(o,["speechConfig"]);P!=null&&d(n,["speechConfig"],Jm(P));const H=c(o,["stopSequences"]);H!=null&&d(n,["stopSequences"],H);const ee=c(o,["temperature"]);ee!=null&&d(n,["temperature"],ee);const _e=c(o,["thinkingConfig"]);_e!=null&&d(n,["thinkingConfig"],_e);const ye=c(o,["topK"]);ye!=null&&d(n,["topK"],ye);const ie=c(o,["topP"]);return ie!=null&&d(n,["topP"],ie),n}function AC(o,n){const i={},a=c(n,["model"]);return a!=null&&d(i,["_url","name"],Pt(o,a)),i}function bC(o,n){const i={},a=c(n,["model"]);return a!=null&&d(i,["_url","name"],Pt(o,a)),i}function _C(o){const n={};if(c(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(o,["enableWidget"]);return i!=null&&d(n,["enableWidget"],i),n}function MC(o){const n={},i=c(o,["timeRangeFilter"]);if(i!=null&&d(n,["timeRangeFilter"],i),c(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function RC(o){const n={},i=c(o,["bytesBase64Encoded"]);i!=null&&d(n,["imageBytes"],Gl(i));const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function Om(o){const n={},i=c(o,["gcsUri"]);i!=null&&d(n,["gcsUri"],i);const a=c(o,["bytesBase64Encoded"]);a!=null&&d(n,["imageBytes"],Gl(a));const u=c(o,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function zr(o){const n={};if(c(o,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=c(o,["imageBytes"]);i!=null&&d(n,["bytesBase64Encoded"],Gl(i));const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function No(o){const n={},i=c(o,["gcsUri"]);i!=null&&d(n,["gcsUri"],i);const a=c(o,["imageBytes"]);a!=null&&d(n,["bytesBase64Encoded"],Gl(a));const u=c(o,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function NC(o,n,i){const a={},u=c(n,["pageSize"]);i!==void 0&&u!=null&&d(i,["_query","pageSize"],u);const r=c(n,["pageToken"]);i!==void 0&&r!=null&&d(i,["_query","pageToken"],r);const p=c(n,["filter"]);i!==void 0&&p!=null&&d(i,["_query","filter"],p);const y=c(n,["queryBase"]);return i!==void 0&&y!=null&&d(i,["_url","models_url"],zm(o,y)),a}function DC(o,n,i){const a={},u=c(n,["pageSize"]);i!==void 0&&u!=null&&d(i,["_query","pageSize"],u);const r=c(n,["pageToken"]);i!==void 0&&r!=null&&d(i,["_query","pageToken"],r);const p=c(n,["filter"]);i!==void 0&&p!=null&&d(i,["_query","filter"],p);const y=c(n,["queryBase"]);return i!==void 0&&y!=null&&d(i,["_url","models_url"],zm(o,y)),a}function IC(o,n){const i={},a=c(n,["config"]);return a!=null&&NC(o,a,i),i}function UC(o,n){const i={},a=c(n,["config"]);return a!=null&&DC(o,a,i),i}function kC(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const u=c(o,["_self"]);if(u!=null){let r=Pm(u);Array.isArray(r)&&(r=r.map(p=>nd(p))),d(n,["models"],r)}return n}function zC(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const u=c(o,["_self"]);if(u!=null){let r=Pm(u);Array.isArray(r)&&(r=r.map(p=>od(p))),d(n,["models"],r)}return n}function PC(o){const n={},i=c(o,["maskMode"]);i!=null&&d(n,["maskMode"],i);const a=c(o,["segmentationClasses"]);a!=null&&d(n,["maskClasses"],a);const u=c(o,["maskDilation"]);return u!=null&&d(n,["dilation"],u),n}function nd(o){const n={},i=c(o,["name"]);i!=null&&d(n,["name"],i);const a=c(o,["displayName"]);a!=null&&d(n,["displayName"],a);const u=c(o,["description"]);u!=null&&d(n,["description"],u);const r=c(o,["version"]);r!=null&&d(n,["version"],r);const p=c(o,["_self"]);p!=null&&d(n,["tunedModelInfo"],ZC(p));const y=c(o,["inputTokenLimit"]);y!=null&&d(n,["inputTokenLimit"],y);const v=c(o,["outputTokenLimit"]);v!=null&&d(n,["outputTokenLimit"],v);const g=c(o,["supportedGenerationMethods"]);return g!=null&&d(n,["supportedActions"],g),n}function od(o){const n={},i=c(o,["name"]);i!=null&&d(n,["name"],i);const a=c(o,["displayName"]);a!=null&&d(n,["displayName"],a);const u=c(o,["description"]);u!=null&&d(n,["description"],u);const r=c(o,["versionId"]);r!=null&&d(n,["version"],r);const p=c(o,["deployedModels"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(T=>$S(T))),d(n,["endpoints"],x)}const y=c(o,["labels"]);y!=null&&d(n,["labels"],y);const v=c(o,["_self"]);v!=null&&d(n,["tunedModelInfo"],QC(v));const g=c(o,["defaultCheckpointId"]);g!=null&&d(n,["defaultCheckpointId"],g);const S=c(o,["checkpoints"]);if(S!=null){let x=S;Array.isArray(x)&&(x=x.map(T=>T)),d(n,["checkpoints"],x)}return n}function LC(o){const n={},i=c(o,["videoMetadata"]);i!=null&&d(n,["videoMetadata"],i);const a=c(o,["thought"]);a!=null&&d(n,["thought"],a);const u=c(o,["inlineData"]);u!=null&&d(n,["inlineData"],bS(u));const r=c(o,["fileData"]);r!=null&&d(n,["fileData"],eC(r));const p=c(o,["thoughtSignature"]);p!=null&&d(n,["thoughtSignature"],p);const y=c(o,["functionCall"]);y!=null&&d(n,["functionCall"],y);const v=c(o,["codeExecutionResult"]);v!=null&&d(n,["codeExecutionResult"],v);const g=c(o,["executableCode"]);g!=null&&d(n,["executableCode"],g);const S=c(o,["functionResponse"]);S!=null&&d(n,["functionResponse"],S);const x=c(o,["text"]);return x!=null&&d(n,["text"],x),n}function FC(o){const n={},i=c(o,["productImage"]);return i!=null&&d(n,["image"],No(i)),n}function HC(o,n){const i={},a=c(o,["numberOfImages"]);n!==void 0&&a!=null&&d(n,["parameters","sampleCount"],a);const u=c(o,["baseSteps"]);n!==void 0&&u!=null&&d(n,["parameters","editConfig","baseSteps"],u);const r=c(o,["outputGcsUri"]);n!==void 0&&r!=null&&d(n,["parameters","storageUri"],r);const p=c(o,["seed"]);n!==void 0&&p!=null&&d(n,["parameters","seed"],p);const y=c(o,["safetyFilterLevel"]);n!==void 0&&y!=null&&d(n,["parameters","safetySetting"],y);const v=c(o,["personGeneration"]);n!==void 0&&v!=null&&d(n,["parameters","personGeneration"],v);const g=c(o,["addWatermark"]);n!==void 0&&g!=null&&d(n,["parameters","addWatermark"],g);const S=c(o,["outputMimeType"]);n!==void 0&&S!=null&&d(n,["parameters","outputOptions","mimeType"],S);const x=c(o,["outputCompressionQuality"]);n!==void 0&&x!=null&&d(n,["parameters","outputOptions","compressionQuality"],x);const T=c(o,["enhancePrompt"]);n!==void 0&&T!=null&&d(n,["parameters","enhancePrompt"],T);const b=c(o,["labels"]);return n!==void 0&&b!=null&&d(n,["labels"],b),i}function BC(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["source"]);u!=null&&GC(u,i);const r=c(n,["config"]);return r!=null&&HC(r,i),i}function qC(o){const n={},i=c(o,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>kr(u))),d(n,["generatedImages"],a)}return n}function GC(o,n){const i={},a=c(o,["prompt"]);n!==void 0&&a!=null&&d(n,["instances[0]","prompt"],a);const u=c(o,["personImage"]);n!==void 0&&u!=null&&d(n,["instances[0]","personImage","image"],No(u));const r=c(o,["productImages"]);if(n!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>FC(y))),d(n,["instances[0]","productImages"],p)}return i}function OC(o){const n={},i=c(o,["referenceImage"]);i!=null&&d(n,["referenceImage"],No(i));const a=c(o,["referenceId"]);a!=null&&d(n,["referenceId"],a);const u=c(o,["referenceType"]);u!=null&&d(n,["referenceType"],u);const r=c(o,["maskImageConfig"]);r!=null&&d(n,["maskImageConfig"],PC(r));const p=c(o,["controlImageConfig"]);p!=null&&d(n,["controlImageConfig"],US(p));const y=c(o,["styleImageConfig"]);y!=null&&d(n,["styleImageConfig"],y);const v=c(o,["subjectImageConfig"]);return v!=null&&d(n,["subjectImageConfig"],v),n}function Vm(o){const n={},i=c(o,["safetyAttributes","categories"]);i!=null&&d(n,["categories"],i);const a=c(o,["safetyAttributes","scores"]);a!=null&&d(n,["scores"],a);const u=c(o,["contentType"]);return u!=null&&d(n,["contentType"],u),n}function Ym(o){const n={},i=c(o,["safetyAttributes","categories"]);i!=null&&d(n,["categories"],i);const a=c(o,["safetyAttributes","scores"]);a!=null&&d(n,["scores"],a);const u=c(o,["contentType"]);return u!=null&&d(n,["contentType"],u),n}function VC(o){const n={};if(c(o,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(o,["category"]);i!=null&&d(n,["category"],i);const a=c(o,["threshold"]);return a!=null&&d(n,["threshold"],a),n}function YC(o){const n={},i=c(o,["image"]);return i!=null&&d(n,["image"],No(i)),n}function JC(o,n){const i={},a=c(o,["mode"]);n!==void 0&&a!=null&&d(n,["parameters","mode"],a);const u=c(o,["maxPredictions"]);n!==void 0&&u!=null&&d(n,["parameters","maxPredictions"],u);const r=c(o,["confidenceThreshold"]);n!==void 0&&r!=null&&d(n,["parameters","confidenceThreshold"],r);const p=c(o,["maskDilation"]);n!==void 0&&p!=null&&d(n,["parameters","maskDilation"],p);const y=c(o,["binaryColorThreshold"]);n!==void 0&&y!=null&&d(n,["parameters","binaryColorThreshold"],y);const v=c(o,["labels"]);return n!==void 0&&v!=null&&d(n,["labels"],v),i}function KC(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["source"]);u!=null&&jC(u,i);const r=c(n,["config"]);return r!=null&&JC(r,i),i}function XC(o){const n={},i=c(o,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>CC(u))),d(n,["generatedMasks"],a)}return n}function jC(o,n){const i={},a=c(o,["prompt"]);n!==void 0&&a!=null&&d(n,["instances[0]","prompt"],a);const u=c(o,["image"]);n!==void 0&&u!=null&&d(n,["instances[0]","image"],No(u));const r=c(o,["scribbleImage"]);return n!==void 0&&r!=null&&d(n,["instances[0]","scribble"],YC(r)),i}function Jm(o){const n={},i=c(o,["voiceConfig"]);if(i!=null&&d(n,["voiceConfig"],i),c(o,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=c(o,["languageCode"]);return a!=null&&d(n,["languageCode"],a),n}function WC(o){const n={},i=c(o,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(S=>S)),d(n,["functionDeclarations"],g)}if(c(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(o,["googleSearch"]);a!=null&&d(n,["googleSearch"],MC(a));const u=c(o,["googleSearchRetrieval"]);if(u!=null&&d(n,["googleSearchRetrieval"],u),c(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(o,["googleMaps"]);r!=null&&d(n,["googleMaps"],_C(r));const p=c(o,["urlContext"]);p!=null&&d(n,["urlContext"],p);const y=c(o,["computerUse"]);y!=null&&d(n,["computerUse"],y);const v=c(o,["codeExecution"]);return v!=null&&d(n,["codeExecution"],v),n}function Km(o){const n={},i=c(o,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(T=>tC(T))),d(n,["functionDeclarations"],x)}const a=c(o,["retrieval"]);a!=null&&d(n,["retrieval"],a);const u=c(o,["googleSearch"]);u!=null&&d(n,["googleSearch"],u);const r=c(o,["googleSearchRetrieval"]);r!=null&&d(n,["googleSearchRetrieval"],r);const p=c(o,["enterpriseWebSearch"]);p!=null&&d(n,["enterpriseWebSearch"],p);const y=c(o,["googleMaps"]);y!=null&&d(n,["googleMaps"],y);const v=c(o,["urlContext"]);v!=null&&d(n,["urlContext"],v);const g=c(o,["computerUse"]);g!=null&&d(n,["computerUse"],g);const S=c(o,["codeExecution"]);return S!=null&&d(n,["codeExecution"],S),n}function ZC(o){const n={},i=c(o,["baseModel"]);i!=null&&d(n,["baseModel"],i);const a=c(o,["createTime"]);a!=null&&d(n,["createTime"],a);const u=c(o,["updateTime"]);return u!=null&&d(n,["updateTime"],u),n}function QC(o){const n={},i=c(o,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&d(n,["baseModel"],i);const a=c(o,["createTime"]);a!=null&&d(n,["createTime"],a);const u=c(o,["updateTime"]);return u!=null&&d(n,["updateTime"],u),n}function $C(o,n){const i={},a=c(o,["displayName"]);n!==void 0&&a!=null&&d(n,["displayName"],a);const u=c(o,["description"]);n!==void 0&&u!=null&&d(n,["description"],u);const r=c(o,["defaultCheckpointId"]);return n!==void 0&&r!=null&&d(n,["defaultCheckpointId"],r),i}function eT(o,n){const i={},a=c(o,["displayName"]);n!==void 0&&a!=null&&d(n,["displayName"],a);const u=c(o,["description"]);n!==void 0&&u!=null&&d(n,["description"],u);const r=c(o,["defaultCheckpointId"]);return n!==void 0&&r!=null&&d(n,["defaultCheckpointId"],r),i}function tT(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","name"],Pt(o,a));const u=c(n,["config"]);return u!=null&&$C(u,i),i}function nT(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["config"]);return u!=null&&eT(u,i),i}function oT(o,n){const i={},a=c(o,["outputGcsUri"]);n!==void 0&&a!=null&&d(n,["parameters","storageUri"],a);const u=c(o,["includeRaiReason"]);n!==void 0&&u!=null&&d(n,["parameters","includeRaiReason"],u);const r=c(o,["outputMimeType"]);n!==void 0&&r!=null&&d(n,["parameters","outputOptions","mimeType"],r);const p=c(o,["outputCompressionQuality"]);n!==void 0&&p!=null&&d(n,["parameters","outputOptions","compressionQuality"],p);const y=c(o,["enhanceInputImage"]);n!==void 0&&y!=null&&d(n,["parameters","upscaleConfig","enhanceInputImage"],y);const v=c(o,["imagePreservationFactor"]);n!==void 0&&v!=null&&d(n,["parameters","upscaleConfig","imagePreservationFactor"],v);const g=c(o,["labels"]);n!==void 0&&g!=null&&d(n,["labels"],g);const S=c(o,["numberOfImages"]);n!==void 0&&S!=null&&d(n,["parameters","sampleCount"],S);const x=c(o,["mode"]);return n!==void 0&&x!=null&&d(n,["parameters","mode"],x),i}function lT(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["_url","model"],Pt(o,a));const u=c(n,["image"]);u!=null&&d(i,["instances[0]","image"],No(u));const r=c(n,["upscaleFactor"]);r!=null&&d(i,["parameters","upscaleConfig","upscaleFactor"],r);const p=c(n,["config"]);return p!=null&&oT(p,i),i}function iT(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(r=>kr(r))),d(n,["generatedImages"],u)}return n}function aT(o){const n={},i=c(o,["uri"]);i!=null&&d(n,["uri"],i);const a=c(o,["encodedVideo"]);a!=null&&d(n,["videoBytes"],Gl(a));const u=c(o,["encoding"]);return u!=null&&d(n,["mimeType"],u),n}function sT(o){const n={},i=c(o,["gcsUri"]);i!=null&&d(n,["uri"],i);const a=c(o,["bytesBase64Encoded"]);a!=null&&d(n,["videoBytes"],Gl(a));const u=c(o,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}function rT(o){const n={},i=c(o,["image"]);i!=null&&d(n,["_self"],No(i));const a=c(o,["maskMode"]);return a!=null&&d(n,["maskMode"],a),n}function uT(o){const n={},i=c(o,["image"]);i!=null&&d(n,["image"],zr(i));const a=c(o,["referenceType"]);return a!=null&&d(n,["referenceType"],a),n}function cT(o){const n={},i=c(o,["image"]);i!=null&&d(n,["image"],No(i));const a=c(o,["referenceType"]);return a!=null&&d(n,["referenceType"],a),n}function Xm(o){const n={},i=c(o,["uri"]);i!=null&&d(n,["uri"],i);const a=c(o,["videoBytes"]);a!=null&&d(n,["encodedVideo"],Gl(a));const u=c(o,["mimeType"]);return u!=null&&d(n,["encoding"],u),n}function jm(o){const n={},i=c(o,["uri"]);i!=null&&d(n,["gcsUri"],i);const a=c(o,["videoBytes"]);a!=null&&d(n,["bytesBase64Encoded"],Gl(a));const u=c(o,["mimeType"]);return u!=null&&d(n,["mimeType"],u),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dT="Content-Type",fT="X-Server-Timeout",hT="User-Agent",ld="x-goog-api-client",pT="1.25.0",gT=`google-genai-sdk/${pT}`,mT="v1beta1",yT="v1beta",lm=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class vT{constructor(n){var i,a;this.clientOptions=Object.assign(Object.assign({},n),{project:n.project,location:n.location,apiKey:n.apiKey,vertexai:n.vertexai});const u={};this.clientOptions.vertexai?(u.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:mT,u.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(u.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:yT,u.baseUrl="https://generativelanguage.googleapis.com/"),u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,n.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&a.push(n.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const n=this.getBaseUrl(),i=new URL(n);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,i,a){const u=[this.getRequestUrlInternal(i)];return a&&u.push(this.getBaseResourcePath()),n!==""&&u.push(n),new URL(`${u.join("/")}`)}shouldPrependVertexProjectPath(n){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}async request(n){let i=this.clientOptions.httpOptions;n.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const a=this.shouldPrependVertexProjectPath(n),u=this.constructUrl(n.path,i,a);if(n.queryParams)for(const[p,y]of Object.entries(n.queryParams))u.searchParams.append(p,String(y));let r={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=n.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,i,n.abortSignal),this.unaryApiCall(u,r,n.httpMethod)}patchHttpOptions(n,i){const a=JSON.parse(JSON.stringify(n));for(const[u,r]of Object.entries(i))typeof r=="object"?a[u]=Object.assign(Object.assign({},a[u]),r):r!==void 0&&(a[u]=r);return a}async requestStream(n){let i=this.clientOptions.httpOptions;n.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const a=this.shouldPrependVertexProjectPath(n),u=this.constructUrl(n.path,i,a);(!u.searchParams.has("alt")||u.searchParams.get("alt")!=="sse")&&u.searchParams.set("alt","sse");let r={};return r.body=n.body,r=await this.includeExtraHttpOptionsToRequestInit(r,i,n.abortSignal),this.streamApiCall(u,r,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,i,a){if(i&&i.timeout||a){const u=new AbortController,r=u.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const p=setTimeout(()=>u.abort(),i.timeout);p&&typeof p.unref=="function"&&p.unref()}a&&a.addEventListener("abort",()=>{u.abort()}),n.signal=r}return i&&i.extraBody!==null&&xT(n,i.extraBody),n.headers=await this.getHeadersInternal(i),n}async unaryApiCall(n,i,a){return this.apiCall(n.toString(),Object.assign(Object.assign({},i),{method:a})).then(async u=>(await im(u),new $c(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}async streamApiCall(n,i,a){return this.apiCall(n.toString(),Object.assign(Object.assign({},i),{method:a})).then(async u=>(await im(u),this.processStreamResponse(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}processStreamResponse(n){var i;return aa(this,arguments,function*(){const u=(i=n==null?void 0:n.body)===null||i===void 0?void 0:i.getReader(),r=new TextDecoder("utf-8");if(!u)throw new Error("Response body is empty");try{let p="";for(;;){const{done:y,value:v}=yield tn(u.read());if(y){if(p.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=r.decode(v,{stream:!0});try{const x=JSON.parse(g);if("error"in x){const T=JSON.parse(JSON.stringify(x.error)),b=T.status,I=T.code,z=`got status: ${b}. ${JSON.stringify(x)}`;if(I>=400&&I<600)throw new Ir({message:z,status:I})}}catch(x){if(x.name==="ApiError")throw x}p+=g;let S=p.match(lm);for(;S;){const x=S[1];try{const T=new Response(x,{headers:n==null?void 0:n.headers,status:n==null?void 0:n.status,statusText:n==null?void 0:n.statusText});yield yield tn(new $c(T)),p=p.slice(S[0].length),S=p.match(lm)}catch(T){throw new Error(`exception parsing stream chunk ${x}. ${T}`)}}}}finally{u.releaseLock()}})}async apiCall(n,i){return fetch(n,i).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const n={},i=gT+" "+this.clientOptions.userAgentExtra;return n[hT]=i,n[ld]=i,n[dT]="application/json",n}async getHeadersInternal(n){const i=new Headers;if(n&&n.headers){for(const[a,u]of Object.entries(n.headers))i.append(a,u);n.timeout&&n.timeout>0&&i.append(fT,String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i),i}async uploadFile(n,i){var a;const u={};i!=null&&(u.mimeType=i.mimeType,u.name=i.name,u.displayName=i.displayName),u.name&&!u.name.startsWith("files/")&&(u.name=`files/${u.name}`);const r=this.clientOptions.uploader,p=await r.stat(n);u.sizeBytes=String(p.size);const y=(a=i==null?void 0:i.mimeType)!==null&&a!==void 0?a:p.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");u.mimeType=y;const v=await this.fetchUploadUrl(u,i);return r.upload(n,v,this)}async downloadFile(n){await this.clientOptions.downloader.download(n,this)}async fetchUploadUrl(n,i){var a;let u={};i!=null&&i.httpOptions?u=i.httpOptions:u={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${n.mimeType}`}};const r={file:n},p=await this.request({path:We("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:u});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(a=p==null?void 0:p.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function im(o){var n;if(o===void 0)throw new Error("response is undefined");if(!o.ok){const i=o.status;let a;!((n=o.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?a=await o.json():a={error:{message:await o.text(),code:o.status,status:o.statusText}};const u=JSON.stringify(a);throw i>=400&&i<600?new Ir({message:u,status:i}):new Error(u)}}function xT(o,n){if(!n||Object.keys(n).length===0)return;if(o.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof o.body=="string"&&o.body.length>0)try{const r=JSON.parse(o.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))i=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(r,p){const y=Object.assign({},r);for(const v in p)if(Object.prototype.hasOwnProperty.call(p,v)){const g=p[v],S=y[v];g&&typeof g=="object"&&!Array.isArray(g)&&S&&typeof S=="object"&&!Array.isArray(S)?y[v]=a(S,g):(S&&g&&typeof S!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof S}, New type: ${typeof g}. Overwriting.`),y[v]=g)}return y}const u=a(i,n);o.body=JSON.stringify(u)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ST="mcp_used/unknown";let CT=!1;function Wm(o){for(const n of o)if(TT(n)||typeof n=="object"&&"inputSchema"in n)return!0;return CT}function Zm(o){var n;const i=(n=o[ld])!==null&&n!==void 0?n:"";o[ld]=(i+` ${ST}`).trimStart()}function TT(o){return o!==null&&typeof o=="object"&&o instanceof yd}function ET(o,n=100){return aa(this,arguments,function*(){let a,u=0;for(;u<n;){const r=yield tn(o.listTools({cursor:a}));for(const p of r.tools)yield yield tn(p),u++;if(!r.nextCursor)break;a=r.nextCursor}})}class yd{constructor(n=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=n,this.config=i}static create(n,i){return new yd(n,i)}async initialize(){var n,i,a,u;if(this.mcpTools.length>0)return;const r={},p=[];for(const S of this.mcpClients)try{for(var y=!0,v=(i=void 0,rs(ET(S))),g;g=await v.next(),n=g.done,!n;y=!0){u=g.value,y=!1;const x=u;p.push(x);const T=x.name;if(r[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);r[T]=S}}catch(x){i={error:x}}finally{try{!y&&!n&&(a=v.return)&&await a.call(v)}finally{if(i)throw i.error}}this.mcpTools=p,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),Mx(this.mcpTools,this.config)}async callTool(n){await this.initialize();const i=[];for(const a of n)if(a.name in this.functionNameToMcpClient){const u=this.functionNameToMcpClient[a.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const p=await u.callTool({name:a.name,arguments:a.args},void 0,r);i.push({functionResponse:{name:a.name,response:p.isError?{error:p}:p}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function wT(o,n,i){const a=new Sx;let u;i.data instanceof Blob?u=JSON.parse(await i.data.text()):u=JSON.parse(i.data),Object.assign(a,u),n(a)}class AT{constructor(n,i,a){this.apiClient=n,this.auth=i,this.webSocketFactory=a}async connect(n){var i,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const u=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),p=MT(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),v=`${u}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${y}`;let g=()=>{};const S=new Promise(H=>{g=H}),x=n.callbacks,T=function(){g({})},b=this.apiClient,I={onopen:T,onmessage:H=>{wT(b,x.onmessage,H)},onerror:(i=x==null?void 0:x.onerror)!==null&&i!==void 0?i:function(H){},onclose:(a=x==null?void 0:x.onclose)!==null&&a!==void 0?a:function(H){}},z=this.webSocketFactory.create(v,_T(p),I);z.connect(),await S;const P={setup:{model:Pt(this.apiClient,n.model)}};return z.send(JSON.stringify(P)),new bT(z,this.apiClient)}}class bT{constructor(n,i){this.conn=n,this.apiClient=i}async setWeightedPrompts(n){if(!n.weightedPrompts||Object.keys(n.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=yS(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(n){n.musicGenerationConfig||(n.musicGenerationConfig={});const i=mS(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(n){const i={playbackControl:n};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(la.PLAY)}pause(){this.sendPlaybackControl(la.PAUSE)}stop(){this.sendPlaybackControl(la.STOP)}resetContext(){this.sendPlaybackControl(la.RESET_CONTEXT)}close(){this.conn.close()}}function _T(o){const n={};return o.forEach((i,a)=>{n[a]=i}),n}function MT(o){const n=new Headers;for(const[i,a]of Object.entries(o))n.append(i,a);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function NT(o,n,i){const a=new xx;let u;i.data instanceof Blob?u=await i.data.text():i.data instanceof ArrayBuffer?u=new TextDecoder().decode(i.data):u=i.data;const r=JSON.parse(u);if(o.isVertexAI()){const p=SS(r);Object.assign(a,p)}else Object.assign(a,r);n(a)}class DT{constructor(n,i,a){this.apiClient=n,this.auth=i,this.webSocketFactory=a,this.music=new AT(this.apiClient,this.auth,this.webSocketFactory)}async connect(n){var i,a,u,r,p,y;if(n.config&&n.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let S;const x=this.apiClient.getHeaders();n.config&&n.config.tools&&Wm(n.config.tools)&&Zm(x);const T=zT(x);if(this.apiClient.isVertexAI())S=`${v}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T);else{const me=this.apiClient.getApiKey();let ce="BidiGenerateContent",De="key";me!=null&&me.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ce="BidiGenerateContentConstrained",De="access_token"),S=`${v}/ws/google.ai.generativelanguage.${g}.GenerativeService.${ce}?${De}=${me}`}let b=()=>{};const I=new Promise(me=>{b=me}),z=n.callbacks,q=function(){var me;(me=z==null?void 0:z.onopen)===null||me===void 0||me.call(z),b({})},F=this.apiClient,P={onopen:q,onmessage:me=>{NT(F,z.onmessage,me)},onerror:(i=z==null?void 0:z.onerror)!==null&&i!==void 0?i:function(me){},onclose:(a=z==null?void 0:z.onclose)!==null&&a!==void 0?a:function(me){}},H=this.webSocketFactory.create(S,kT(T),P);H.connect(),await I;let ee=Pt(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const me=this.apiClient.getProject(),ce=this.apiClient.getLocation();ee=`projects/${me}/locations/${ce}/`+ee}let _e={};this.apiClient.isVertexAI()&&((u=n.config)===null||u===void 0?void 0:u.responseModalities)===void 0&&(n.config===void 0?n.config={responseModalities:[Rr.AUDIO]}:n.config.responseModalities=[Rr.AUDIO]),!((r=n.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ye=(y=(p=n.config)===null||p===void 0?void 0:p.tools)!==null&&y!==void 0?y:[],ie=[];for(const me of ye)if(this.isCallableTool(me)){const ce=me;ie.push(await ce.tool())}else ie.push(me);ie.length>0&&(n.config.tools=ie);const ge={model:ee,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?_e=gS(this.apiClient,ge):_e=pS(this.apiClient,ge),delete _e.config,H.send(JSON.stringify(_e)),new UT(H,this.apiClient)}isCallableTool(n){return"callTool"in n&&typeof n.callTool=="function"}}const IT={turnComplete:!0};class UT{constructor(n,i){this.conn=n,this.apiClient=i}tLiveClientContent(n,i){if(i.turns!==null&&i.turns!==void 0){let a=[];try{a=bo(i.turns),n.isVertexAI()||(a=a.map(u=>Ur(u)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:a,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(n,i){let a=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?a=i.functionResponses:a=[i.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const r of a){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!n.isVertexAI()&&!("id"in r))throw new Error(RT)}return{toolResponse:{functionResponses:a}}}sendClientContent(n){n=Object.assign(Object.assign({},IT),n);const i=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(i))}sendRealtimeInput(n){let i={};this.apiClient.isVertexAI()?i={realtimeInput:xS(n)}:i={realtimeInput:vS(n)},this.conn.send(JSON.stringify(i))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function kT(o){const n={};return o.forEach((i,a)=>{n[a]=i}),n}function zT(o){const n=new Headers;for(const[i,a]of Object.entries(o))n.append(i,a);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const am=10;function sm(o){var n,i,a;if(!((n=o==null?void 0:o.automaticFunctionCalling)===null||n===void 0)&&n.disable)return!0;let u=!1;for(const p of(i=o==null?void 0:o.tools)!==null&&i!==void 0?i:[])if(sa(p)){u=!0;break}if(!u)return!0;const r=(a=o==null?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function sa(o){return"callTool"in o&&typeof o.callTool=="function"}function PT(o){var n,i,a;return(a=(i=(n=o.config)===null||n===void 0?void 0:n.tools)===null||i===void 0?void 0:i.some(u=>sa(u)))!==null&&a!==void 0?a:!1}function LT(o){var n,i,a;return(a=(i=(n=o.config)===null||n===void 0?void 0:n.tools)===null||i===void 0?void 0:i.some(u=>!sa(u)))!==null&&a!==void 0?a:!1}function rm(o){var n;return!(!((n=o==null?void 0:o.automaticFunctionCalling)===null||n===void 0)&&n.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FT extends mi{constructor(n){super(),this.apiClient=n,this.generateContent=async i=>{var a,u,r,p,y;const v=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!PT(i)||sm(i.config))return await this.generateContentInternal(v);if(LT(i))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let g,S;const x=bo(v.contents),T=(r=(u=(a=v.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.maximumRemoteCalls)!==null&&r!==void 0?r:am;let b=0;for(;b<T&&(g=await this.generateContentInternal(v),!(!g.functionCalls||g.functionCalls.length===0));){const I=g.candidates[0].content,z=[];for(const q of(y=(p=i.config)===null||p===void 0?void 0:p.tools)!==null&&y!==void 0?y:[])if(sa(q)){const P=await q.callTool(g.functionCalls);z.push(...P)}b++,S={role:"user",parts:z},v.contents=bo(v.contents),v.contents.push(I),v.contents.push(S),rm(v.config)&&(x.push(I),x.push(S))}return rm(v.config)&&(g.automaticFunctionCallingHistory=x),g},this.generateContentStream=async i=>{if(this.maybeMoveToResponseJsonSchem(i),sm(i.config)){const a=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(a)}else return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(a=>{var u;let r;const p=[];if(a!=null&&a.generatedImages)for(const v of a.generatedImages)v&&(v!=null&&v.safetyAttributes)&&((u=v==null?void 0:v.safetyAttributes)===null||u===void 0?void 0:u.contentType)==="Positive Prompt"?r=v==null?void 0:v.safetyAttributes:p.push(v);let y;return r?y={generatedImages:p,positivePromptSafetyAttributes:r,sdkHttpResponse:a.sdkHttpResponse}:y={generatedImages:p,sdkHttpResponse:a.sdkHttpResponse},y}),this.list=async i=>{var a;const p={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!p.config.queryBase){if(!((a=p.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");p.config.filter="labels.tune-type:*"}return new us(gi.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(p),p)},this.editImage=async i=>{const a={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(a.referenceImages=i.referenceImages.map(u=>u.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async i=>{let a={numberOfImages:1,mode:"upscale"};i.config&&(a=Object.assign(Object.assign({},a),i.config));const u={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:a};return await this.upscaleImageInternal(u)},this.generateVideos=async i=>{var a,u,r,p,y,v;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=i.video)===null||a===void 0)&&a.uri&&(!((u=i.video)===null||u===void 0)&&u.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((p=(r=i.source)===null||r===void 0?void 0:r.video)===null||p===void 0)&&p.uri&&(!((v=(y=i.source)===null||y===void 0?void 0:y.video)===null||v===void 0)&&v.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(n){n.config&&n.config.responseSchema&&(n.config.responseJsonSchema||Object.keys(n.config.responseSchema).includes("$schema")&&(n.config.responseJsonSchema=n.config.responseSchema,delete n.config.responseSchema))}async processParamsMaybeAddMcpUsage(n){var i,a,u;const r=(i=n.config)===null||i===void 0?void 0:i.tools;if(!r)return n;const p=await Promise.all(r.map(async v=>sa(v)?await v.tool():v)),y={model:n.model,contents:n.contents,config:Object.assign(Object.assign({},n.config),{tools:p})};if(y.config.tools=p,n.config&&n.config.tools&&Wm(n.config.tools)){const v=(u=(a=n.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&u!==void 0?u:{};let g=Object.assign({},v);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),Zm(g),y.config.httpOptions=Object.assign(Object.assign({},n.config.httpOptions),{headers:g})}return y}async initAfcToolsMap(n){var i,a,u;const r=new Map;for(const p of(a=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[])if(sa(p)){const y=p,v=await y.tool();for(const g of(u=v.functionDeclarations)!==null&&u!==void 0?u:[]){if(!g.name)throw new Error("Function declaration name is required.");if(r.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);r.set(g.name,y)}}return r}async processAfcStream(n){var i,a,u;const r=(u=(a=(i=n.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&u!==void 0?u:am;let p=!1,y=0;const v=await this.initAfcToolsMap(n);return(function(g,S,x){var T,b;return aa(this,arguments,function*(){for(var I,z,q,F;y<r;){p&&(y++,p=!1);const _e=yield tn(g.processParamsMaybeAddMcpUsage(x)),ye=yield tn(g.generateContentStreamInternal(_e)),ie=[],ge=[];try{for(var P=!0,H=(z=void 0,rs(ye)),ee;ee=yield tn(H.next()),I=ee.done,!I;P=!0){F=ee.value,P=!1;const me=F;if(yield yield tn(me),me.candidates&&(!((T=me.candidates[0])===null||T===void 0)&&T.content)){ge.push(me.candidates[0].content);for(const ce of(b=me.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(y<r&&ce.functionCall){if(!ce.functionCall.name)throw new Error("Function call name was not returned by the model.");if(S.has(ce.functionCall.name)){const De=yield tn(S.get(ce.functionCall.name).callTool([ce.functionCall]));ie.push(...De)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${S.keys()}, mising tool: ${ce.functionCall.name}`)}}}}catch(me){z={error:me}}finally{try{!P&&!I&&(q=H.return)&&(yield tn(q.call(H)))}finally{if(z)throw z.error}}if(ie.length>0){p=!0;const me=new as;me.candidates=[{content:{role:"user",parts:ie}}],yield yield tn(me);const ce=[];ce.push(...ge),ce.push({role:"user",parts:ie});const De=bo(x.contents).concat(ce);x.contents=De}else break}})})(this,v,n)}async generateContentInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=tm(this.apiClient,n);return y=We("{model}:generateContent",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=om(S),T=new as;return Object.assign(T,x),T})}else{const g=em(this.apiClient,n);return y=We("{model}:generateContent",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=nm(S),T=new as;return Object.assign(T,x),T})}}async generateContentStreamInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=tm(this.apiClient,n);return y=We("{model}:streamGenerateContent?alt=sse",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}),p.then(function(x){return aa(this,arguments,function*(){var T,b,I,z;try{for(var q=!0,F=rs(x),P;P=yield tn(F.next()),T=P.done,!T;q=!0){z=P.value,q=!1;const H=z,ee=om(yield tn(H.json()));ee.sdkHttpResponse={headers:H.headers};const _e=new as;Object.assign(_e,ee),yield yield tn(_e)}}catch(H){b={error:H}}finally{try{!q&&!T&&(I=F.return)&&(yield tn(I.call(F)))}finally{if(b)throw b.error}}})})}else{const g=em(this.apiClient,n);return y=We("{model}:streamGenerateContent?alt=sse",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}),p.then(function(x){return aa(this,arguments,function*(){var T,b,I,z;try{for(var q=!0,F=rs(x),P;P=yield tn(F.next()),T=P.done,!T;q=!0){z=P.value,q=!1;const H=z,ee=nm(yield tn(H.json()));ee.sdkHttpResponse={headers:H.headers};const _e=new as;Object.assign(_e,ee),yield yield tn(_e)}}catch(H){b={error:H}}finally{try{!q&&!T&&(I=F.return)&&(yield tn(I.call(F)))}finally{if(b)throw b.error}}})})}}async embedContent(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=WS(this.apiClient,n);return y=We("{model}:predict",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=QS(S),T=new Fg;return Object.assign(T,x),T})}else{const g=jS(this.apiClient,n);return y=We("{model}:batchEmbedContents",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=ZS(S),T=new Fg;return Object.assign(T,x),T})}}async generateImagesInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=sC(this.apiClient,n);return y=We("{model}:predict",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=uC(S),T=new Hg;return Object.assign(T,x),T})}else{const g=aC(this.apiClient,n);return y=We("{model}:predict",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=rC(S),T=new Hg;return Object.assign(T,x),T})}}async editImageInternal(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI()){const y=YS(this.apiClient,n);return r=We("{model}:predict",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(g=>{const S=g;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const g=JS(v),S=new dx;return Object.assign(S,g),S})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI()){const y=lT(this.apiClient,n);return r=We("{model}:predict",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(g=>{const S=g;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const g=iT(v),S=new fx;return Object.assign(S,g),S})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI()){const y=BC(this.apiClient,n);return r=We("{model}:predict",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const g=qC(v),S=new hx;return Object.assign(S,g),S})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI()){const y=KC(this.apiClient,n);return r=We("{model}:predict",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const g=XC(v),S=new px;return Object.assign(S,g),S})}else throw new Error("This method is only supported by the Vertex AI.")}async get(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=bC(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json()),p.then(S=>od(S))}else{const g=AC(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),p.then(S=>nd(S))}}async listInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=UC(this.apiClient,n);return y=We("{models_url}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=zC(S),T=new Bg;return Object.assign(T,x),T})}else{const g=IC(this.apiClient,n);return y=We("{models_url}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=kC(S),T=new Bg;return Object.assign(T,x),T})}}async update(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=nT(this.apiClient,n);return y=We("{model}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json()),p.then(S=>od(S))}else{const g=tT(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),p.then(S=>nd(S))}}async delete(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=qS(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=OS(S),T=new qg;return Object.assign(T,x),T})}else{const g=BS(this.apiClient,n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=GS(S),T=new qg;return Object.assign(T,x),T})}}async countTokens(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=LS(this.apiClient,n);return y=We("{model}:countTokens",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=HS(S),T=new Gg;return Object.assign(T,x),T})}else{const g=PS(this.apiClient,n);return y=We("{model}:countTokens",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=FS(S),T=new Gg;return Object.assign(T,x),T})}}async computeTokens(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI()){const y=RS(this.apiClient,n);return r=We("{model}:computeTokens",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(g=>{const S=g;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const g=NS(v),S=new gx;return Object.assign(S,g),S})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=gC(this.apiClient,n);return y=We("{model}:predictLongRunning",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json()),p.then(S=>{const x=hC(S),T=new Nr;return Object.assign(T,x),T})}else{const g=pC(this.apiClient,n);return y=We("{model}:predictLongRunning",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),p.then(S=>{const x=fC(S),T=new Nr;return Object.assign(T,x),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HT extends mi{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){const i=n.operation,a=n.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=i.name.split("/operations/")[0];let r;a&&"httpOptions"in a&&(r=a.httpOptions);const p=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:u,config:{httpOptions:r}});return i._fromAPIResponse({apiResponse:p,isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:i.name,config:a});return i._fromAPIResponse({apiResponse:u,isVertexAI:!1})}}async get(n){const i=n.operation,a=n.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=i.name.split("/operations/")[0];let r;a&&"httpOptions"in a&&(r=a.httpOptions);const p=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:u,config:{httpOptions:r}});return i._fromAPIResponse({apiResponse:p,isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:i.name,config:a});return i._fromAPIResponse({apiResponse:u,isVertexAI:!1})}}async getVideosOperationInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=rx(n);return y=We("{operationName}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json()),p}else{const g=sx(n);return y=We("{operationName}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json()),p}}async fetchPredictVideosOperationInternal(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI()){const y=ex(n);return r=We("{resourceName}:fetchPredictOperation",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BT(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["data"]);i!=null&&d(n,["data"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function qT(o){const n={},i=c(o,["parts"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(r=>jT(r))),d(n,["parts"],u)}const a=c(o,["role"]);return a!=null&&d(n,["role"],a),n}function GT(o,n,i){const a={},u=c(n,["expireTime"]);i!==void 0&&u!=null&&d(i,["expireTime"],u);const r=c(n,["newSessionExpireTime"]);i!==void 0&&r!=null&&d(i,["newSessionExpireTime"],r);const p=c(n,["uses"]);i!==void 0&&p!=null&&d(i,["uses"],p);const y=c(n,["liveConnectConstraints"]);i!==void 0&&y!=null&&d(i,["bidiGenerateContentSetup"],XT(o,y));const v=c(n,["lockAdditionalFields"]);return i!==void 0&&v!=null&&d(i,["fieldMask"],v),a}function OT(o,n){const i={},a=c(n,["config"]);return a!=null&&d(i,["config"],GT(o,a,i)),i}function VT(o){const n={};if(c(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(o,["fileUri"]);i!=null&&d(n,["fileUri"],i);const a=c(o,["mimeType"]);return a!=null&&d(n,["mimeType"],a),n}function YT(o){const n={};if(c(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(o,["enableWidget"]);return i!=null&&d(n,["enableWidget"],i),n}function JT(o){const n={},i=c(o,["timeRangeFilter"]);if(i!=null&&d(n,["timeRangeFilter"],i),c(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function KT(o,n){const i={},a=c(o,["generationConfig"]);n!==void 0&&a!=null&&d(n,["setup","generationConfig"],a);const u=c(o,["responseModalities"]);n!==void 0&&u!=null&&d(n,["setup","generationConfig","responseModalities"],u);const r=c(o,["temperature"]);n!==void 0&&r!=null&&d(n,["setup","generationConfig","temperature"],r);const p=c(o,["topP"]);n!==void 0&&p!=null&&d(n,["setup","generationConfig","topP"],p);const y=c(o,["topK"]);n!==void 0&&y!=null&&d(n,["setup","generationConfig","topK"],y);const v=c(o,["maxOutputTokens"]);n!==void 0&&v!=null&&d(n,["setup","generationConfig","maxOutputTokens"],v);const g=c(o,["mediaResolution"]);n!==void 0&&g!=null&&d(n,["setup","generationConfig","mediaResolution"],g);const S=c(o,["seed"]);n!==void 0&&S!=null&&d(n,["setup","generationConfig","seed"],S);const x=c(o,["speechConfig"]);n!==void 0&&x!=null&&d(n,["setup","generationConfig","speechConfig"],md(x));const T=c(o,["thinkingConfig"]);n!==void 0&&T!=null&&d(n,["setup","generationConfig","thinkingConfig"],T);const b=c(o,["enableAffectiveDialog"]);n!==void 0&&b!=null&&d(n,["setup","generationConfig","enableAffectiveDialog"],b);const I=c(o,["systemInstruction"]);n!==void 0&&I!=null&&d(n,["setup","systemInstruction"],qT(Yn(I)));const z=c(o,["tools"]);if(n!==void 0&&z!=null){let ye=ua(z);Array.isArray(ye)&&(ye=ye.map(ie=>ZT(ra(ie)))),d(n,["setup","tools"],ye)}const q=c(o,["sessionResumption"]);n!==void 0&&q!=null&&d(n,["setup","sessionResumption"],WT(q));const F=c(o,["inputAudioTranscription"]);n!==void 0&&F!=null&&d(n,["setup","inputAudioTranscription"],F);const P=c(o,["outputAudioTranscription"]);n!==void 0&&P!=null&&d(n,["setup","outputAudioTranscription"],P);const H=c(o,["realtimeInputConfig"]);n!==void 0&&H!=null&&d(n,["setup","realtimeInputConfig"],H);const ee=c(o,["contextWindowCompression"]);n!==void 0&&ee!=null&&d(n,["setup","contextWindowCompression"],ee);const _e=c(o,["proactivity"]);return n!==void 0&&_e!=null&&d(n,["setup","proactivity"],_e),i}function XT(o,n){const i={},a=c(n,["model"]);a!=null&&d(i,["setup","model"],Pt(o,a));const u=c(n,["config"]);return u!=null&&d(i,["config"],KT(u,i)),i}function jT(o){const n={},i=c(o,["videoMetadata"]);i!=null&&d(n,["videoMetadata"],i);const a=c(o,["thought"]);a!=null&&d(n,["thought"],a);const u=c(o,["inlineData"]);u!=null&&d(n,["inlineData"],BT(u));const r=c(o,["fileData"]);r!=null&&d(n,["fileData"],VT(r));const p=c(o,["thoughtSignature"]);p!=null&&d(n,["thoughtSignature"],p);const y=c(o,["functionCall"]);y!=null&&d(n,["functionCall"],y);const v=c(o,["codeExecutionResult"]);v!=null&&d(n,["codeExecutionResult"],v);const g=c(o,["executableCode"]);g!=null&&d(n,["executableCode"],g);const S=c(o,["functionResponse"]);S!=null&&d(n,["functionResponse"],S);const x=c(o,["text"]);return x!=null&&d(n,["text"],x),n}function WT(o){const n={},i=c(o,["handle"]);if(i!=null&&d(n,["handle"],i),c(o,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function ZT(o){const n={},i=c(o,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(S=>S)),d(n,["functionDeclarations"],g)}if(c(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(o,["googleSearch"]);a!=null&&d(n,["googleSearch"],JT(a));const u=c(o,["googleSearchRetrieval"]);if(u!=null&&d(n,["googleSearchRetrieval"],u),c(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(o,["googleMaps"]);r!=null&&d(n,["googleMaps"],YT(r));const p=c(o,["urlContext"]);p!=null&&d(n,["urlContext"],p);const y=c(o,["computerUse"]);y!=null&&d(n,["computerUse"],y);const v=c(o,["codeExecution"]);return v!=null&&d(n,["codeExecution"],v),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QT(o){const n=[];for(const i in o)if(Object.prototype.hasOwnProperty.call(o,i)){const a=o[i];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const u=Object.keys(a).map(r=>`${i}.${r}`);n.push(...u)}else n.push(i)}return n.join(",")}function $T(o,n){let i=null;const a=o.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const r=a.setup;typeof r=="object"&&r!==null?(o.bidiGenerateContentSetup=r,i=r):delete o.bidiGenerateContentSetup}else a!==void 0&&delete o.bidiGenerateContentSetup;const u=o.fieldMask;if(i){const r=QT(i);if(Array.isArray(n==null?void 0:n.lockAdditionalFields)&&(n==null?void 0:n.lockAdditionalFields.length)===0)r?o.fieldMask=r:delete o.fieldMask;else if(n!=null&&n.lockAdditionalFields&&n.lockAdditionalFields.length>0&&u!==null&&Array.isArray(u)&&u.length>0){const p=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];u.length>0&&(y=u.map(g=>p.includes(g)?`generationConfig.${g}`:g));const v=[];r&&v.push(r),y.length>0&&v.push(...y),v.length>0?o.fieldMask=v.join(","):delete o.fieldMask}else delete o.fieldMask}else u!==null&&Array.isArray(u)&&u.length>0?o.fieldMask=u.join(","):delete o.fieldMask;return o}class eE extends mi{constructor(n){super(),this.apiClient=n}async create(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=OT(this.apiClient,n);r=We("auth_tokens",y._url),p=y._query,delete y.config,delete y._url,delete y._query;const v=$T(y,n.config);return u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),u.then(g=>g)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tE(o){const n={},i=c(o,["name"]);return i!=null&&d(n,["_url","name"],i),n}function nE(o){const n={},i=c(o,["name"]);return i!=null&&d(n,["_url","name"],i),n}function oE(o,n){const i={};if(c(o,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=c(o,["tunedModelDisplayName"]);if(n!==void 0&&a!=null&&d(n,["displayName"],a),c(o,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(o,["epochCount"]);n!==void 0&&u!=null&&d(n,["tuningTask","hyperparameters","epochCount"],u);const r=c(o,["learningRateMultiplier"]);if(r!=null&&d(i,["tuningTask","hyperparameters","learningRateMultiplier"],r),c(o,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(o,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(o,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const p=c(o,["batchSize"]);n!==void 0&&p!=null&&d(n,["tuningTask","hyperparameters","batchSize"],p);const y=c(o,["learningRate"]);if(n!==void 0&&y!=null&&d(n,["tuningTask","hyperparameters","learningRate"],y),c(o,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return i}function lE(o,n){const i={},a=c(o,["validationDataset"]);n!==void 0&&a!=null&&d(n,["supervisedTuningSpec"],xE(a,i));const u=c(o,["tunedModelDisplayName"]);n!==void 0&&u!=null&&d(n,["tunedModelDisplayName"],u);const r=c(o,["description"]);n!==void 0&&r!=null&&d(n,["description"],r);const p=c(o,["epochCount"]);n!==void 0&&p!=null&&d(n,["supervisedTuningSpec","hyperParameters","epochCount"],p);const y=c(o,["learningRateMultiplier"]);n!==void 0&&y!=null&&d(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y);const v=c(o,["exportLastCheckpointOnly"]);n!==void 0&&v!=null&&d(n,["supervisedTuningSpec","exportLastCheckpointOnly"],v);const g=c(o,["adapterSize"]);if(n!==void 0&&g!=null&&d(n,["supervisedTuningSpec","hyperParameters","adapterSize"],g),c(o,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(o,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=c(o,["labels"]);return n!==void 0&&S!=null&&d(n,["labels"],S),i}function iE(o){const n={},i=c(o,["baseModel"]);i!=null&&d(n,["baseModel"],i);const a=c(o,["preTunedModel"]);a!=null&&d(n,["preTunedModel"],a);const u=c(o,["trainingDataset"]);u!=null&&d(n,["tuningTask","trainingData"],mE(u));const r=c(o,["config"]);return r!=null&&oE(r,n),n}function aE(o){const n={},i=c(o,["baseModel"]);i!=null&&d(n,["baseModel"],i);const a=c(o,["preTunedModel"]);a!=null&&d(n,["preTunedModel"],a);const u=c(o,["trainingDataset"]);u!=null&&d(n,["supervisedTuningSpec","trainingDatasetUri"],yE(u,n));const r=c(o,["config"]);return r!=null&&lE(r,n),n}function sE(o){const n={},i=c(o,["name"]);return i!=null&&d(n,["_url","name"],i),n}function rE(o){const n={},i=c(o,["name"]);return i!=null&&d(n,["_url","name"],i),n}function uE(o,n){const i={},a=c(o,["pageSize"]);n!==void 0&&a!=null&&d(n,["_query","pageSize"],a);const u=c(o,["pageToken"]);n!==void 0&&u!=null&&d(n,["_query","pageToken"],u);const r=c(o,["filter"]);return n!==void 0&&r!=null&&d(n,["_query","filter"],r),i}function cE(o,n){const i={},a=c(o,["pageSize"]);n!==void 0&&a!=null&&d(n,["_query","pageSize"],a);const u=c(o,["pageToken"]);n!==void 0&&u!=null&&d(n,["_query","pageToken"],u);const r=c(o,["filter"]);return n!==void 0&&r!=null&&d(n,["_query","filter"],r),i}function dE(o){const n={},i=c(o,["config"]);return i!=null&&uE(i,n),n}function fE(o){const n={},i=c(o,["config"]);return i!=null&&cE(i,n),n}function hE(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const u=c(o,["tunedModels"]);if(u!=null){let r=u;Array.isArray(r)&&(r=r.map(p=>Qm(p))),d(n,["tuningJobs"],r)}return n}function pE(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["nextPageToken"]);a!=null&&d(n,["nextPageToken"],a);const u=c(o,["tuningJobs"]);if(u!=null){let r=u;Array.isArray(r)&&(r=r.map(p=>id(p))),d(n,["tuningJobs"],r)}return n}function gE(o){const n={},i=c(o,["name"]);i!=null&&d(n,["model"],i);const a=c(o,["name"]);return a!=null&&d(n,["endpoint"],a),n}function mE(o){const n={};if(c(o,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(o,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=c(o,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),d(n,["examples","examples"],a)}return n}function yE(o,n){const i={},a=c(o,["gcsUri"]);n!==void 0&&a!=null&&d(n,["supervisedTuningSpec","trainingDatasetUri"],a);const u=c(o,["vertexDatasetResource"]);if(n!==void 0&&u!=null&&d(n,["supervisedTuningSpec","trainingDatasetUri"],u),c(o,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Qm(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["name"]);a!=null&&d(n,["name"],a);const u=c(o,["state"]);u!=null&&d(n,["state"],Um(u));const r=c(o,["createTime"]);r!=null&&d(n,["createTime"],r);const p=c(o,["tuningTask","startTime"]);p!=null&&d(n,["startTime"],p);const y=c(o,["tuningTask","completeTime"]);y!=null&&d(n,["endTime"],y);const v=c(o,["updateTime"]);v!=null&&d(n,["updateTime"],v);const g=c(o,["description"]);g!=null&&d(n,["description"],g);const S=c(o,["baseModel"]);S!=null&&d(n,["baseModel"],S);const x=c(o,["_self"]);x!=null&&d(n,["tunedModel"],gE(x));const T=c(o,["customBaseModel"]);T!=null&&d(n,["customBaseModel"],T);const b=c(o,["experiment"]);b!=null&&d(n,["experiment"],b);const I=c(o,["labels"]);I!=null&&d(n,["labels"],I);const z=c(o,["outputUri"]);z!=null&&d(n,["outputUri"],z);const q=c(o,["pipelineJob"]);q!=null&&d(n,["pipelineJob"],q);const F=c(o,["serviceAccount"]);F!=null&&d(n,["serviceAccount"],F);const P=c(o,["tunedModelDisplayName"]);P!=null&&d(n,["tunedModelDisplayName"],P);const H=c(o,["veoTuningSpec"]);return H!=null&&d(n,["veoTuningSpec"],H),n}function id(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["name"]);a!=null&&d(n,["name"],a);const u=c(o,["state"]);u!=null&&d(n,["state"],Um(u));const r=c(o,["createTime"]);r!=null&&d(n,["createTime"],r);const p=c(o,["startTime"]);p!=null&&d(n,["startTime"],p);const y=c(o,["endTime"]);y!=null&&d(n,["endTime"],y);const v=c(o,["updateTime"]);v!=null&&d(n,["updateTime"],v);const g=c(o,["error"]);g!=null&&d(n,["error"],g);const S=c(o,["description"]);S!=null&&d(n,["description"],S);const x=c(o,["baseModel"]);x!=null&&d(n,["baseModel"],x);const T=c(o,["tunedModel"]);T!=null&&d(n,["tunedModel"],T);const b=c(o,["preTunedModel"]);b!=null&&d(n,["preTunedModel"],b);const I=c(o,["supervisedTuningSpec"]);I!=null&&d(n,["supervisedTuningSpec"],I);const z=c(o,["tuningDataStats"]);z!=null&&d(n,["tuningDataStats"],z);const q=c(o,["encryptionSpec"]);q!=null&&d(n,["encryptionSpec"],q);const F=c(o,["partnerModelTuningSpec"]);F!=null&&d(n,["partnerModelTuningSpec"],F);const P=c(o,["customBaseModel"]);P!=null&&d(n,["customBaseModel"],P);const H=c(o,["experiment"]);H!=null&&d(n,["experiment"],H);const ee=c(o,["labels"]);ee!=null&&d(n,["labels"],ee);const _e=c(o,["outputUri"]);_e!=null&&d(n,["outputUri"],_e);const ye=c(o,["pipelineJob"]);ye!=null&&d(n,["pipelineJob"],ye);const ie=c(o,["serviceAccount"]);ie!=null&&d(n,["serviceAccount"],ie);const ge=c(o,["tunedModelDisplayName"]);ge!=null&&d(n,["tunedModelDisplayName"],ge);const me=c(o,["veoTuningSpec"]);return me!=null&&d(n,["veoTuningSpec"],me),n}function vE(o){const n={},i=c(o,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const a=c(o,["name"]);a!=null&&d(n,["name"],a);const u=c(o,["metadata"]);u!=null&&d(n,["metadata"],u);const r=c(o,["done"]);r!=null&&d(n,["done"],r);const p=c(o,["error"]);return p!=null&&d(n,["error"],p),n}function xE(o,n){const i={},a=c(o,["gcsUri"]);a!=null&&d(i,["validationDatasetUri"],a);const u=c(o,["vertexDatasetResource"]);return n!==void 0&&u!=null&&d(n,["supervisedTuningSpec","trainingDatasetUri"],u),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SE extends mi{constructor(n){super(),this.apiClient=n,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new us(gi.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(i),i),this.tune=async i=>{var a;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const u={tunedModelName:i.baseModel};!((a=i.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(u.checkpointId=i.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},i),{preTunedModel:u});return r.baseModel=void 0,await this.tuneInternal(r)}else{const u=Object.assign({},i);return await this.tuneInternal(u)}else{const u=Object.assign({},i),r=await this.tuneMldevInternal(u);let p="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?p=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(p=r.name.split("/operations/")[0]),{name:p,state:Qc.JOB_STATE_QUEUED}}}}async getInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=rE(n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>id(S))}else{const g=sE(n);return y=We("{name}",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>Qm(S))}}async listInternal(n){var i,a,u,r;let p,y="",v={};if(this.apiClient.isVertexAI()){const g=fE(n);return y=We("tuningJobs",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=pE(S),T=new Og;return Object.assign(T,x),T})}else{const g=dE(n);return y=We("tunedModels",g._url),v=g._query,delete g._url,delete g._query,p=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(S=>S.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:S.headers},T})),p.then(S=>{const x=hE(S),T=new Og;return Object.assign(T,x),T})}}async cancel(n){var i,a,u,r;let p="",y={};if(this.apiClient.isVertexAI()){const v=nE(n);p=We("{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal})}else{const v=tE(n);p=We("{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(u=n.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI()){const y=aE(n);return r=We("tuningJobs",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(g=>{const S=g;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>id(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(n){var i,a;let u,r="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=iE(n);return r=We("tunedModels",y._url),p=y._query,delete y._url,delete y._query,u=this.apiClient.request({path:r,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=n.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(g=>{const S=g;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>vE(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CE{async download(n,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const TE=1024*1024*8,EE=3,wE=1e3,AE=2,jc="x-goog-upload-status";async function bE(o,n,i){var a,u,r;let p=0,y=0,v=new $c(new Response),g="upload";for(p=o.size;y<p;){const x=Math.min(TE,p-y),T=o.slice(y,y+x);y+x>=p&&(g+=", finalize");let b=0,I=wE;for(;b<EE&&(v=await i.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(y),"Content-Length":String(x)}}}),!(!((a=v==null?void 0:v.headers)===null||a===void 0)&&a[jc]));)b++,await ME(I),I=I*AE;if(y+=x,((u=v==null?void 0:v.headers)===null||u===void 0?void 0:u[jc])!=="active")break;if(p<=y)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const S=await(v==null?void 0:v.json());if(((r=v==null?void 0:v.headers)===null||r===void 0?void 0:r[jc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return S.file}async function _E(o){return{size:o.size,type:o.type}}function ME(o){return new Promise(n=>setTimeout(n,o))}class RE{async upload(n,i,a){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await bE(n,i,a)}async stat(n){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await _E(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NE{create(n,i,a){return new DE(n,i,a)}}class DE{constructor(n,i,a){this.url=n,this.headers=i,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const um="x-goog-api-key";class IE{constructor(n){this.apiKey=n}async addAuthHeaders(n){if(n.get(um)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");n.append(um,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UE="gl-node/";class vd{constructor(n){var i;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=n.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=n.apiKey;const a=Qv(n.httpOptions,n.vertexai,void 0,void 0);a&&(n.httpOptions?n.httpOptions.baseUrl=a:n.httpOptions={baseUrl:a}),this.apiVersion=n.apiVersion;const u=new IE(this.apiKey);this.apiClient=new vT({auth:u,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:UE+"web",uploader:new RE,downloader:new CE}),this.models=new FT(this.apiClient),this.live=new DT(this.apiClient,u,new NE),this.batches=new y1(this.apiClient),this.chats=new j1(this.models,this.apiClient),this.caches=new J1(this.apiClient),this.files=new iS(this.apiClient),this.operations=new HT(this.apiClient),this.authTokens=new eE(this.apiClient),this.tunings=new SE(this.apiClient)}}const ad="comics-magic-translator-api-counter",sd=()=>new Date().toISOString().split("T")[0],$m=()=>{try{const o=localStorage.getItem(ad);if(!o)return 0;const n=JSON.parse(o);return n.date!==sd()?(localStorage.setItem(ad,JSON.stringify({count:0,date:sd()})),0):n.count}catch(o){return console.error("Failed to read API count from localStorage:",o),0}},xd=()=>{const n=$m()+1;try{localStorage.setItem(ad,JSON.stringify({count:n,date:sd()})),window.dispatchEvent(new CustomEvent("apiCallCountUpdated",{detail:{newCount:n}}))}catch(i){console.error("Failed to save API count to localStorage:",i)}return n};class Bl extends Error{constructor(n){super(n),this.name="ApiKeyError"}}const Sd=o=>{const n=((o==null?void 0:o.message)||"").toLowerCase();if(n.includes("api key")||n.includes("400"))throw new Bl("API Key not valid or missing. Please ensure it is correctly configured. See Preferences > API Key for instructions.")},kE=(o,n)=>({inlineData:{data:o,mimeType:n}}),cm=async(o,n,i)=>{try{const a=dd();if(!a)throw new Bl("API Key not found. Please set it in Preferences > API Key or in your .env.local file.");const u=new vd({apiKey:a}),r=kE(o,n),y={text:`Perform Optical Character Recognition (OCR) on the provided image, extracting text from within the specified bounding boxes. The text can be in any language, but pay special attention to English and Japanese, as they are common in comics.

For each box, provide:
1. The accurately extracted 'text'. If no text is found, return an empty string.
2. An estimated 'fontSizePercentage' relative to the full image's height.

The bounding boxes are provided as a JSON array with normalized coordinates (0 to 1).

Input Boxes:
${JSON.stringify(i)}

Return a JSON array where each object corresponds to an input box and contains the 'id', 'text', and 'fontSizePercentage'.
Example for a box with Japanese text: [{"id": 1, "text": "", "fontSizePercentage": 5}]`},v=await u.models.generateContent({model:"gemini-flash-lite-latest",contents:{parts:[r,y]},config:{responseMimeType:"application/json",responseSchema:{type:Hn.ARRAY,items:{type:Hn.OBJECT,properties:{id:{type:Hn.NUMBER,description:"The ID of the box, matching the input."},text:{type:Hn.STRING,description:"The extracted text from the box."},fontSizePercentage:{type:Hn.NUMBER,description:"The estimated font size as a percentage of the full image's height. For example, if the image is 1000px tall and the font is 50px, this should be 5."}},required:["id","text","fontSizePercentage"]}}}});xd();let g=v.text.trim();g.startsWith("```json")&&(g=g.substring(7,g.length-3).trim());const S=JSON.parse(g);if(!Array.isArray(S))throw new Error("Invalid response format from Gemini. Expected an array.");return S.map(x=>({id:x.id,text:(x.text||"").trim(),fontSizePercentage:x.fontSizePercentage||5}))}catch(a){throw Sd(a),console.error("Error extracting text from multiple boxes:",a),new Error("Failed to perform OCR on the image. The AI model might have returned an invalid response.")}},zE=async(o,n="English")=>{if(!o)return"";try{const i=dd();if(!i)throw new Bl("API Key not found. Please set it in Preferences > API Key or in your .env.local file.");const a=new vd({apiKey:i}),r=/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]/.test(o)?`The following text is a comic book dialogue in Japanese. Translate it to ${n}. Provide a complete, natural, and contextually appropriate translation. Ensure the full meaning is conveyed without any abbreviations, truncations, or ellipses (...). Do not add any extra text or explanations, just the translation.

Text to translate:
"""
${o}
"""`:`Translate the following comic book dialogue to ${n}. Keep the translation natural and concise. Provide the full translation without any abbreviations, truncations, or ellipses (...). Do not add any extra text or explanations, just the translation.

Text to translate:
"""
${o}
"""`,p=await a.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{maxOutputTokens:4096,thinkingConfig:{thinkingBudget:1024},temperature:.4}});return xd(),p.text.trim()}catch(i){throw Sd(i),console.error("Error translating text:",i),new Error("Failed to translate the text.")}},dm=18,fm=async(o,n="English")=>{if(!o||o.length===0)return[];const i=o.filter(p=>!p.text||p.text.trim().length===0).map(p=>({id:p.id,translatedText:""})),a=o.filter(p=>p.text&&p.text.trim().length>0);if(a.length===0)return i;const u=new Map;a.forEach(p=>{u.has(p.text)||u.set(p.text,[]),u.get(p.text).push(p.id)});const r=Array.from(u.keys()).map((p,y)=>({id:y,text:p}));try{const p=dd();if(!p)throw new Bl("API Key not found. Please set it in Preferences > API Key or in your .env.local file.");const y=new vd({apiKey:p}),v=[];for(let x=0;x<r.length;x+=dm)v.push(r.slice(x,x+dm));const g=new Map;for(const x of v){const b=x.some(F=>/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]/.test(F.text))?`The following JSON array contains comic book dialogues in Japanese. Translate each entry to ${n}. Provide a complete, natural, and contextually appropriate translation for each. Ensure the full meaning is conveyed without any abbreviations, truncations, or ellipses (...).
Input:
${JSON.stringify(x)}`:`Translate the comic book dialogues in the following JSON array to ${n}. Provide a complete translation for each entry, without any abbreviations, truncations, or ellipses (...). Keep translations natural and concise.
Input:
${JSON.stringify(x)}`,I=await y.models.generateContent({model:"gemini-2.5-flash",contents:b,config:{responseMimeType:"application/json",responseSchema:{type:Hn.ARRAY,items:{type:Hn.OBJECT,properties:{id:{type:Hn.NUMBER,description:"The ID of the text, matching the input."},translatedText:{type:Hn.STRING,description:`The full, unabbreviated translated text in ${n}.`}},required:["id","translatedText"]}},maxOutputTokens:16384,thinkingConfig:{thinkingBudget:2048},temperature:.4}});xd();let z=I.text.trim();z.startsWith("```json")&&(z=z.substring(7,z.length-3).trim());const q=JSON.parse(z);if(!Array.isArray(q)||q.length!==x.length)throw console.warn("Mismatched translation count in batch. Falling back.",{expected:x.length,got:q.length}),new Error("Mismatched translation count or invalid JSON format.");q.forEach(F=>{var H;const P=(H=x.find(ee=>ee.id===F.id))==null?void 0:H.text;P&&g.set(P,F.translatedText)})}return[...a.map(x=>({id:x.id,translatedText:g.get(x.text)||""})),...i]}catch(p){Sd(p),console.error("Error translating multiple texts, falling back to individual (unique) translations:",p);const y=new Map;for(const g of u.keys()){let S="";try{await new Promise(x=>setTimeout(x,200)),S=await zE(g,n)}catch(x){console.error(`Failed to translate text: "${g}"`,x)}y.set(g,S)}return[...a.map(g=>({id:g.id,translatedText:y.get(g.text)||""})),...i]}};function Er(o,n,i,a,u,r){return Math.pow(o-a,2)+Math.pow(n-u,2)+Math.pow(i-r,2)}function PE(o,n,i,a,u){const{data:r,width:p,height:y}=o,v=new Uint8Array(p*y),g=(i*p+n)*4,S=r[g],x=r[g+1],T=r[g+2],b=a*a,I=[i*p+n];if(v[i*p+n]===1)return v;v[i*p+n]=1;let z=0;for(;z<I.length;){const q=I[z++],F=q%p,P=Math.floor(q/p);if(P>0){const H=(P-1)*p+F;v[H]===0&&Er(S,x,T,r[H*4],r[H*4+1],r[H*4+2])<=b&&(v[H]=1,I.push(H))}if(P<y-1){const H=(P+1)*p+F;v[H]===0&&Er(S,x,T,r[H*4],r[H*4+1],r[H*4+2])<=b&&(v[H]=1,I.push(H))}if(F>0){const H=P*p+(F-1);v[H]===0&&Er(S,x,T,r[H*4],r[H*4+1],r[H*4+2])<=b&&(v[H]=1,I.push(H))}if(F<p-1){const H=P*p+(F+1);v[H]===0&&Er(S,x,T,r[H*4],r[H*4+1],r[H*4+2])<=b&&(v[H]=1,I.push(H))}}return v}function LE(o,n,i){let a=n.x,u=n.y,r=i.x-a,p=i.y-u;if(r!==0||p!==0){const y=((o.x-a)*r+(o.y-u)*p)/(r*r+p*p);y>1?(a=i.x,u=i.y):y>0&&(a+=r*y,u+=p*y)}return r=o.x-a,p=o.y-u,r*r+p*p}function FE(o,n){if(o.length<=2)return o;const i=(r,p,y,v,g)=>{let S=0,x=0;for(let T=p+1;T<y;T++){const b=LE(r[T],r[p],r[y]);b>S&&(x=T,S=b)}S>v&&(x-p>1&&i(r,p,x,v,g),g.push(r[x]),y-x>1&&i(r,x,y,v,g))},a=o.length-1,u=[o[0]];return i(o,0,a,n,u),u.push(o[a]),u}function hm(o,n,i){const a=[],u=new Uint8Array(o.length),r=p=>{let y=null;const v=[p.y*n+p.x],g=new Uint8Array(o.length);g[p.y*n+p.x]=1;let S=0;for(;S<v.length;){const z=v[S++],q=z%n,F=Math.floor(z/n);let P=!1;if((q===0||F===0||q===n-1||F===i-1||!o[z-1]||!o[z+1]||!o[z-n]||!o[z+n])&&(P=!0),P){y={x:q,y:F};break}const H=[{dx:0,dy:-1},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:0}];for(const ee of H){const _e=q+ee.dx,ye=F+ee.dy;if(_e>=0&&_e<n&&ye>=0&&ye<i){const ie=ye*n+_e;o[ie]&&!g[ie]&&(g[ie]=1,v.push(ie))}}}if(!y)return null;const x=[];let T=y;const b=[{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0},{x:-1,y:-1}];let I=0;for(let z=0;z<8;z++){const q=y.x+b[z].x,F=y.y+b[z].y;if(q<0||F<0||q>=n||F>=i||!o[F*n+q]){I=(z+4)%8;break}}do{x.push(T);let z=!1;for(let q=0;q<8;q++){const F=(I+q+5)%8,P=T.x+b[F].x,H=T.y+b[F].y;if(P>=0&&P<n&&H>=0&&H<i&&o[H*n+P]){T={x:P,y:H},I=F,z=!0;break}}if(!z)break}while(T.x!==y.x||T.y!==y.y);return x};for(let p=0;p<i;p++)for(let y=0;y<n;y++){const v=p*n+y;if(o[v]&&!u[v]){const g=r({x:y,y:p});if(g&&g.length>2){const b=FE(g,1.5).map(I=>({anchor:I,handle1:I,handle2:I}));b.length>0&&b.push({...b[0]}),a.push(b)}const S=[v];u[v]=1;let x=0;for(;x<S.length;){const T=S[x++],b=T%n,I=Math.floor(T/n),z=[{dx:0,dy:-1},{dx:0,dy:1},{dx:1,dy:0},{dx:-1,dy:0}];for(const q of z){const F=b+q.dx,P=I+q.dy;if(F>=0&&F<n&&P>=0&&P<i){const H=P*n+F;o[H]&&!u[H]&&(u[H]=1,S.push(H))}}}}}return a}function HE(o,n,i){const a=new Uint8Array(o),u=new Uint8Array(o.length);for(let r=0;r<o.length;r++)if(o[r]===0&&u[r]===0){const p=[],y=[r];u[r]=1;let v=!1,g=0;for(;g<y.length;){const S=y[g++];p.push(S);const x=S%n,T=Math.floor(S/n);(x===0||T===0||x===n-1||T===i-1)&&(v=!0);const b=[{dx:0,dy:-1},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:0}];for(const I of b){const z=x+I.dx,q=T+I.dy;if(z>=0&&z<n&&q>=0&&q<i){const F=q*n+z;o[F]===0&&u[F]===0&&(u[F]=1,y.push(F))}}}if(!v)for(const S of p)a[S]=1}return a}const BE=o=>{const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null};function pm(o,n,i,a){const{data:u,width:r,height:p}=o,y=HE(n,r,p),v=new Uint8ClampedArray(u);if(i==="manual"){const g=BE(a);if(!g)return console.error("Invalid manual color for inpainting:",a),new ImageData(v,r,p);for(let S=0;S<y.length;S++)if(y[S]===1){const x=S*4;v[x]=g.r,v[x+1]=g.g,v[x+2]=g.b,v[x+3]=255}}else{const g=new Uint8Array(y.length),S=32;for(let x=0;x<y.length;x++)if(y[x]===1&&g[x]===0){const T=[],b=[x];g[x]=1;let I=0;for(;I<b.length;){const P=b[I++];T.push(P);const H=P%r,ee=Math.floor(P/r),_e=[{dx:0,dy:-1},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:0}];for(const ye of _e){const ie=H+ye.dx,ge=ee+ye.dy;if(ie>=0&&ie<r&&ge>=0&&ge<p){const me=ge*r+ie;y[me]===1&&g[me]===0&&(g[me]=1,b.push(me))}}}const z=new Map;for(const P of T){const H=P*4,ee=u[H],_e=u[H+1],ye=u[H+2],ie=`${Math.floor(ee/S)},${Math.floor(_e/S)},${Math.floor(ye/S)}`;z.has(ie)||z.set(ie,{r:0,g:0,b:0,count:0});const ge=z.get(ie);ge.r+=ee,ge.g+=_e,ge.b+=ye,ge.count++}let q={r:0,g:0,b:0,count:0};for(const P of z.values())P.count>q.count&&(q=P);const F={r:Math.round(q.r/q.count)||255,g:Math.round(q.g/q.count)||255,b:Math.round(q.b/q.count)||255};for(const P of T){const H=P*4;v[H]=F.r,v[H+1]=F.g,v[H+2]=F.b,v[H+3]=255}}}return new ImageData(v,r,p)}const e0="comic-translator-notes",qE=()=>{try{const o=localStorage.getItem(e0);if(o){const n=JSON.parse(o);if(Array.isArray(n))return n}}catch(o){console.error("Failed to load notes from localStorage:",o)}return[]},GE=o=>{try{localStorage.setItem(e0,JSON.stringify(o))}catch(n){console.error("Failed to save notes to localStorage:",n)}},OE="FontStorage",ql="fonts",VE=1;let wr=null;const Cd=()=>wr||(wr=new Promise((o,n)=>{const i=indexedDB.open(OE,VE);i.onupgradeneeded=()=>{const a=i.result;a.objectStoreNames.contains(ql)||a.createObjectStore(ql,{keyPath:"name"})},i.onsuccess=()=>{o(i.result)},i.onerror=()=>{console.error("IndexedDB error:",i.error),n(i.error)}}),wr),YE=async(o,n)=>{const a=(await Cd()).transaction(ql,"readwrite");return a.objectStore(ql).put({name:o,buffer:n}),new Promise((r,p)=>{a.oncomplete=()=>r(),a.onerror=()=>p(a.error)})},JE=async()=>{const a=(await Cd()).transaction(ql,"readonly").objectStore(ql).getAll();return new Promise((u,r)=>{a.onsuccess=()=>{u(a.result)},a.onerror=()=>{r(a.error)}})},KE=async()=>{const n=(await Cd()).transaction(ql,"readwrite");return n.objectStore(ql).clear(),new Promise((a,u)=>{n.oncomplete=()=>a(),n.onerror=()=>u(n.error)})};function XE(o){if(!o)return{plainText:"",styleSpans:[]};const n=o.replace(/<sup>/g,'<style isSuperscript="true">').replace(/<\/sup>/g,"</style>").replace(/<color value="([^"]+)">/g,'<style color="$1">').replace(/<\/color>/g,"</style>");let i="";const a=[],u=[{}],r=/(<style [^>]*>|<\/style>|[^<>]+)/g,p=n.match(r)||[],y=/(\w+)="([^"]+)"/g;for(const v of p)if(v.startsWith("<style")){const g={...u[u.length-1]};let S;for(;(S=y.exec(v))!==null;){const x=S[1];let T=S[2];x==="fontSize"||x==="strokeWidth"||x==="lineHeight"||x==="wordSpacing"?T=parseFloat(T):x==="isSuperscript"&&(T=T==="true"),g[x]=T}u.push(g)}else if(v==="</style>")u.length>1&&u.pop();else if(v.length>0){const g=u[u.length-1];Object.keys(g).length>0&&a.push({start:i.length,end:i.length+v.length,style:g}),i+=v}return{plainText:i,styleSpans:a}}function gm(o,n){if(!n||n.length===0)return o;const i=[];n.forEach(p=>{i.push({index:p.start,type:"start",style:p.style}),i.push({index:p.end,type:"end"})}),i.sort((p,y)=>p.index-y.index||(p.type==="end"?-1:1));let a="",u=0;const r=[];for(i.forEach(p=>{if(p.index>u&&(a+=o.substring(u,p.index)),p.type==="start"&&p.style){const y=Object.entries(p.style).map(([v,g])=>`${v}="${g}"`).join(" ");a+=`<style ${y}>`,r.push(p.style)}else p.type==="end"&&r.length>0&&(a+="</style>",r.pop());u=p.index}),u<o.length&&(a+=o.substring(u));r.length>0;)a+="</style>",r.pop();return a}function Wc(o){return o<1024?`${o} Bytes`:o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/(1024*1024)).toFixed(1)} MB`}const mm=(o,n)=>{const{box:i,sx:a,sy:u,sw:r,sh:p}=o,y=document.createElement("canvas");y.width=Math.max(1,r),y.height=Math.max(1,p);const v=y.getContext("2d");if(!v){const T=document.createElement("canvas");return T.width=1,T.height=1,T}if(!i.path||i.path.length<3)return v.drawImage(n,a,u,r,p,0,0,r,p),y;v.fillStyle="white",v.fillRect(0,0,r,p),v.save(),v.beginPath();const g=i.path[0],S=g.anchor.x*n.width-a,x=g.anchor.y*n.height-u;v.moveTo(S,x);for(let T=0;T<i.path.length-1;T++){const b=i.path[T],I=i.path[T+1],z=b.handle2.x*n.width-a,q=b.handle2.y*n.height-u,F=I.handle1.x*n.width-a,P=I.handle1.y*n.height-u,H=I.anchor.x*n.width-a,ee=I.anchor.y*n.height-u;v.bezierCurveTo(z,q,F,P,H,ee)}return v.closePath(),v.clip(),v.drawImage(n,a,u,r,p,0,0,r,p),v.restore(),y},ym=(o,n,i)=>{if(o.length===0)return null;const a=o.map(x=>({box:x,sx:x.x*n.width,sy:x.y*n.height,sw:Math.max(1,x.width*n.width),sh:Math.max(1,x.height*n.height)})),u=[{width:0,height:0,crops:[]},{width:0,height:0,crops:[]}];for(const x of a)u[0].height<=u[1].height?(u[0].crops.push(x),u[0].height+=x.sh,u[0].width=Math.max(u[0].width,x.sw)):(u[1].crops.push(x),u[1].height+=x.sh,u[1].width=Math.max(u[1].width,x.sw));const r=document.createElement("canvas"),p=r.getContext("2d");if(!p)throw new Error("Could not create sprite sheet context.");r.width=Math.max(1,u[0].width+u[1].width),r.height=Math.max(1,Math.max(u[0].height,u[1].height)),p.fillStyle="white",p.fillRect(0,0,r.width,r.height);const y=[];let v=0;for(const x of u[0].crops){const T=mm(x,n);p.drawImage(T,0,v),y.push({id:x.box.id,x:0,y:v/r.height,width:x.sw/r.width,height:x.sh/r.height}),v+=x.sh}let g=0;for(const x of u[1].crops){const T=mm(x,n);p.drawImage(T,u[0].width,g),y.push({id:x.box.id,x:u[0].width/r.width,y:g/r.height,width:x.sw/r.width,height:x.sh/r.height}),g+=x.sh}return y.length===0?null:{spriteBase64:r.toDataURL(i).split(",")[1],boxesForApi:y}},Ar=o=>new Promise(n=>setTimeout(n,o)),jE=({onClick:o})=>{const{t:n}=fo();return m.jsx("button",{onClick:o,className:"p-2 rounded-full hover:bg-gray-700 transition-colors",title:n("settings"),children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826 3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})},WE=({onClick:o})=>{const{t:n}=fo();return m.jsx("button",{onClick:o,className:"p-2 rounded-full hover:bg-gray-700 transition-colors",title:n("compareOriginal"),children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-300",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M4 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H4zm12 1a1 1 0 011 1v2H3V5a1 1 0 011-1h12zM3 9h14v7a1 1 0 01-1 1H4a1 1 0 01-1-1V9z"})})})},br=()=>m.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ZE=["English","Spanish","French","German","Italian","Portuguese","Japanese","Korean","Chinese (Simplified)","Russian","Arabic"],vm=["Architects Daughter","Bangers","Fredoka","Indie Flower","Kaushan Script","Luckiest Guy","Patrick Hand","Permanent Marker"],Fo=()=>({past:[],present:{textBoxes:[],strokes:[],cleanedImageDataUrl:null},future:[]}),QE=({x:o,y:n},i)=>({x:o*Math.cos(i)-n*Math.sin(i),y:o*Math.sin(i)+n*Math.cos(i)}),xm=(o,n)=>{if(o.type==="text"&&o.translatedText&&o.plainText===void 0){const{plainText:i,styleSpans:a}=XE(o.translatedText),u={...o,plainText:i,styleSpans:a,fontFamily:o.fontFamily||n.fontFamily,fontSize:o.fontSize||n.fontSize,textAlign:o.textAlign||n.textAlign,fontWeight:o.fontWeight||"normal",fontStyle:o.fontStyle||"normal",lineHeight:o.lineHeight||1.2,wordSpacing:o.wordSpacing||0,color:o.color||"#000000",strokeColor:o.strokeColor||"#FFFFFF",strokeWidth:o.strokeWidth||0};return delete u.translatedText,u}return{...o,plainText:o.plainText??(o.type==="text"&&o.translatedText||""),styleSpans:o.styleSpans??[],fontFamily:o.fontFamily||n.fontFamily,fontSize:o.fontSize||n.fontSize,textAlign:o.textAlign||n.textAlign,fontWeight:o.fontWeight||"normal",fontStyle:o.fontStyle||"normal",lineHeight:o.lineHeight||1.2,wordSpacing:o.wordSpacing||0,color:o.color||"#000000",strokeColor:o.strokeColor||"#FFFFFF",strokeWidth:o.strokeWidth||0}},$E=()=>{const{t:o}=fo(),[n,i]=A.useState([]),[a,u]=A.useState(null),[r,p]=A.useState(null),[y,v]=A.useState(new Map),[g,S]=A.useState(Fo()),x=A.useCallback((w,M=!1)=>{S(D=>{const B=w(D.present);return JSON.stringify(B)===JSON.stringify(D.present)?D:{past:[...D.past,D.present],present:B,future:[]}})},[]),{present:T}=g,{textBoxes:b,strokes:I}=T,z=g.past.length>0,q=g.future.length>0,[F,P]=A.useState([]),[H,ee]=A.useState(ft.READY),[_e,ye]=A.useState(null),[ie,ge]=A.useState(null),[me,ce]=A.useState(!1),[De,Z]=A.useState("png"),[gt,fe]=A.useState(92),[it,N]=A.useState(null),[se,Je]=A.useState(!1),[Ge,st]=A.useState("png"),[U,te]=A.useState(92),[be,Te]=A.useState(null),[je,lt]=A.useState(!1),[ut,Ut]=A.useState("jpg"),[pt,Dn]=A.useState(92),[cn,An]=A.useState(null),[Kt,bt]=A.useState(!1),[bn,le]=A.useState([]),[tt,ht]=A.useState("default"),[at,It]=A.useState(Nn.targetLanguage),[Fe,sn]=A.useState(Nn.defaultTextFormat),[Ne,ct]=A.useState(Nn.brushColor),[rn,et]=A.useState(Nn.paintBrushSize),[St,nn]=A.useState(Nn.selectionEraserSize),[Dt,hn]=A.useState(Nn.brushHardness),[Ot,In]=A.useState(1),[mn,Ft]=A.useState(Nn.panelWidths),[yn,Zt]=A.useState(Nn.textAreaHeights),[Bn,Ht]=A.useState(Nn.inpaintAutoColor),[Jn,Un]=A.useState(Nn.inpaintManualColor),[to,j]=A.useState(!1),[Me,Be]=A.useState(null),[Oe,Ke]=A.useState(null),[qe,Pe]=A.useState(!1),[V,ae]=A.useState(null),[_,he]=A.useState([]),[Ce,Ae]=A.useState([]),xe=A.useMemo(()=>{const w=new Set([..._,...Ce,...vm]);return Array.from(w).sort((M,D)=>M.localeCompare(D))},[_,Ce]),[He,ve]=A.useState([]),[Re,Le]=A.useState(null),[Se,Ue]=A.useState(0),[Ze,Tt]=A.useState(30),[ke,nt]=A.useState(null),[Qe,Et]=A.useState(null),[jt,Qt]=A.useState(null),[on,vn]=A.useState(null),_t=A.useRef(null),[Bt,qn]=A.useState({isOpen:!1}),[un,_n]=A.useState([null,null,null]),[da,al]=A.useState(!1),[Ol,Vl]=A.useState([]),[Ho,Bo]=A.useState(""),ln=A.useMemo(()=>F.length>0?F[F.length-1]:null,[F]),Ct=A.useMemo(()=>b.find(w=>w.id===ln)||null,[b,ln]),sl=A.useMemo(()=>ln?b.findIndex(w=>w.id===ln):-1,[b,ln]),Yl=sl!==-1&&sl<b.length-1,Gn=sl>0,{setLanguage:Jl}=fo();A.useEffect(()=>{Vl(qE())},[]),A.useEffect(()=>{fetch("metadata.json").then(w=>w.json()).then(w=>{w&&w.name&&Bo(w.name)}).catch(w=>console.error("Could not load app version:",w))},[]);const qo=w=>{Vl(w),GE(w)};A.useEffect(()=>{if(!ke||!r){Qt(null);return}const w=new Image;w.crossOrigin="anonymous",w.src=r,w.onload=()=>{const M=document.createElement("canvas");M.width=w.width,M.height=w.height;const D=M.getContext("2d");if(!D)return;const B=D.createImageData(w.width,w.height);for(let O=0;O<ke.length;O++)ke[O]===1&&(B.data[O*4]=167,B.data[O*4+1]=139,B.data[O*4+2]=250,B.data[O*4+3]=150);D.putImageData(B,0,0),Qt(M.toDataURL())}},[ke,r]);const yi=A.useCallback(async(w,M,D)=>{if(r){ee(ft.MAGIC_WAND);try{const B=new Image;B.crossOrigin="anonymous",B.src=r,await new Promise((we,Q)=>{B.onload=()=>we(void 0),B.onerror=Q});const O=document.createElement("canvas");O.width=B.width,O.height=B.height;const L=O.getContext("2d",{willReadFrequently:!0});if(!L)throw new Error("Could not get context for magic wand");L.drawImage(B,0,0);const Y=we=>({x:we.x*B.width,y:we.y*B.height}),re=I.filter(we=>we.type==="brush"||we.type==="eraser");Ao(L,re,Y);const Ee=L.getImageData(0,0,B.width,B.height),Ie=Math.floor(w.x),Ye=Math.floor(w.y),W=PE(Ee,Ie,Ye,Ze,!0);if(D&&ke){const we=new Uint8Array(ke.length);for(let Q=0;Q<we.length;Q++)we[Q]=ke[Q]===1&&W[Q]===0?1:0;nt(we)}else if(M&&ke){const we=new Uint8Array(ke.length);for(let Q=0;Q<we.length;Q++)we[Q]=ke[Q]||W[Q];nt(we)}else nt(W)}catch(B){console.error("Magic Wand failed:",B),ee(ft.ERROR)}finally{ee(ft.READY)}}},[r,Ze,ke,I]),kn=A.useCallback(async(w,M,D)=>{if(r){!M&&!D&&ye(null),ee(ft.MAGIC_WAND);try{const B=new Image;B.crossOrigin="anonymous",B.src=r,await new Promise((W,we)=>{B.onload=()=>W(void 0),B.onerror=we});const{width:O,height:L}=B,Y=new Uint8Array(O*L),re=Math.round(w.x*O),Ee=Math.round(w.y*L),Ie=Math.round((w.x+w.width)*O),Ye=Math.round((w.y+w.height)*L);for(let W=Ee;W<Ye;W++)for(let we=re;we<Ie;we++)we>=0&&we<O&&W>=0&&W<L&&(Y[W*O+we]=1);if(D&&ke){const W=new Uint8Array(ke.length);for(let we=0;we<W.length;we++)W[we]=ke[we]===1&&Y[we]===0?1:0;nt(W)}else if(M&&ke){const W=new Uint8Array(ke.length);for(let we=0;we<W.length;we++)W[we]=ke[we]||Y[we];nt(W)}else nt(Y)}catch(B){console.error("Manual selection failed:",B),ee(ft.ERROR)}finally{ee(ft.READY)}}},[r,ke]),rl=A.useCallback(()=>{ke&&Et(ke),nt(null)},[ke]),cs=A.useCallback(()=>{Qe&&nt(Qe)},[Qe]),fa=A.useCallback(async(w,M,D)=>{if(!ke||!r)return;const B=new Image;B.crossOrigin="anonymous",B.src=r,await new Promise((W,we)=>{B.onload=()=>W(void 0),B.onerror=we});const{width:O,height:L}=B,Y=document.createElement("canvas");Y.width=O,Y.height=L;const re=Y.getContext("2d");if(!re)return;Ao(re,[{id:0,type:"brush",color:"#FFFFFF",points:w,size:M,shape:"round",hardness:D,opacity:1}],W=>({x:W.x*O,y:W.y*L}));const Ie=re.getImageData(0,0,O,L).data,Ye=new Uint8Array(ke);for(let W=0;W<Ye.length;W++)Ie[W*4+3]>0&&(Ye[W]=0);nt(Ye)},[ke,r]),ul=A.useCallback(async()=>{if(r){if((Ct==null?void 0:Ct.type)==="image"&&Ct.imageDataUrl){const w={x:Ct.x,y:Ct.y,width:Ct.width,height:Ct.height};qn({isOpen:!0,source:"imageBox",imageDataUrl:Ct.imageDataUrl,targetBoxId:Ct.id,backgroundImageUrl:r,backgroundBounds:w})}else if(ke){const w=new Image;w.src=r,await new Promise(oe=>{w.onload=oe});const{width:M,height:D}=w;let B=M,O=D,L=0,Y=0,re=!1;for(let oe=0;oe<D;oe++)for(let ne=0;ne<M;ne++)ke[oe*M+ne]===1&&(re=!0,ne<B&&(B=ne),oe<O&&(O=oe),ne>L&&(L=ne),oe>Y&&(Y=oe));if(!re)return;const Ee=L-B+1,Ie=Y-O+1,Ye=document.createElement("canvas");Ye.width=Ee,Ye.height=Ie;const W=Ye.getContext("2d");if(!W)return;W.drawImage(w,B,O,Ee,Ie,0,0,Ee,Ie);const we=W.getImageData(0,0,Ee,Ie);for(let oe=0;oe<Ie;oe++)for(let ne=0;ne<Ee;ne++)ke[(O+oe)*M+(B+ne)]!==1&&(we.data[(oe*Ee+ne)*4+3]=0);W.putImageData(we,0,0);const Q={x:B/M,y:O/D,width:Ee/M,height:Ie/D};qn({isOpen:!0,source:"selection",imageDataUrl:Ye.toDataURL(),selectionBounds:Q,backgroundImageUrl:r,backgroundBounds:Q})}}},[Ct,ke,r]),ds=A.useCallback(async(w,M,D)=>{if(Bt.isOpen){if(Bt.source==="imageBox"&&Bt.targetBoxId&&Bt.backgroundBounds){const B=Bt.targetBoxId,O=b.find(oo=>oo.id===B),L=Bt.backgroundBounds;if(!O||!O.imageDataUrl||!r)return;const Y=new Image;Y.src=r,await new Promise(oo=>{Y.onload=oo});const re=Y.width,Ee=Y.height,Ie=new Image;Ie.src=O.imageDataUrl,await new Promise(oo=>{Ie.onload=oo});const Ye=Ie.width,W=Ie.height,we=O.rotation+M.rotation,Q=L.width*M.scale,oe=L.height*M.scale,ne={x:L.x+L.width/2,y:L.y+L.height/2},ze={x:M.x+Ye*M.scale/2,y:M.y+W*M.scale/2},Ve={x:Ye/2,y:W/2},dt={x:ze.x-Ve.x,y:ze.y-Ve.y},vt=L.width*re/Ye,xn=L.height*Ee/W,Mn={x:dt.x*vt/re,y:dt.y*xn/Ee},jn=O.rotation*Math.PI/180,Wt=QE(Mn,jn),yl={x:ne.x+Wt.x,y:ne.y+Wt.y},Zl=yl.x-Q/2,bi=yl.y-oe/2;x(oo=>({...oo,textBoxes:oo.textBoxes.map(_i=>_i.id===B?{..._i,imageDataUrl:w,x:Zl,y:bi,width:Q,height:oe,rotation:we}:_i)}))}else if(Bt.source==="selection"&&Bt.selectionBounds&&r){const B=Bt.selectionBounds,O=new Image;O.src=r,await new Promise(Ie=>O.onload=Ie);const L=document.createElement("canvas");L.width=O.width,L.height=O.height;const Y=L.getContext("2d");if(!Y)return;Y.drawImage(O,0,0);const re=new Image;re.src=w,await new Promise(Ie=>re.onload=Ie),Y.drawImage(re,B.x*O.width,B.y*O.height,B.width*O.width,B.height*O.height);const Ee=L.toDataURL();g.present.cleanedImageDataUrl&&URL.revokeObjectURL(g.present.cleanedImageDataUrl),x(Ie=>({...Ie,cleanedImageDataUrl:Ee}))}if(D&&D.length>0&&r){const B=new Image;B.src=r,await new Promise(Q=>{B.onload=Q});const{width:O,height:L}=B,Y=document.createElement("canvas");Y.width=O,Y.height=L;const re=Y.getContext("2d");if(!re)return;let Ee={x:0,y:0,width:1,height:1};if(Bt.source==="selection"&&Bt.selectionBounds)Ee=Bt.selectionBounds;else if(Bt.source==="imageBox"&&Bt.targetBoxId){const Q=b.find(oe=>oe.id===Bt.targetBoxId);Q&&(Ee={x:Q.x,y:Q.y,width:Q.width,height:Q.height})}const Ie=Q=>({x:(Ee.x+Q.x*Ee.width)*O,y:(Ee.y+Q.y*Ee.height)*L}),Ye=D.map(Q=>({...Q,type:"brush",color:"#FFFFFF",hardness:1}));Ao(re,Ye,Ie);const W=re.getImageData(0,0,O,L),we=new Uint8Array(O*L);for(let Q=0;Q<W.data.length;Q+=4)(W.data[Q]>0||W.data[Q+1]>0||W.data[Q+2]>0)&&(we[Q/4]=1);nt(we),Qt(null)}qn({isOpen:!1})}},[Bt,b,r,x,g.present.cleanedImageDataUrl]);A.useEffect(()=>{Ue($m());const w=M=>{M.detail&&typeof M.detail.newCount=="number"&&Ue(M.detail.newCount)};return window.addEventListener("apiCallCountUpdated",w),()=>{window.removeEventListener("apiCallCountUpdated",w)}},[]);const cl=A.useCallback(w=>{It(w.targetLanguage),Jl(w.interfaceLanguage||"en"),sn(w.defaultTextFormat),ct(w.brushColor),et(w.paintBrushSize),nn(w.selectionEraserSize||Nn.selectionEraserSize),hn(w.brushHardness),In(w.brushOpacity??1),Ft(w.panelWidths||Nn.panelWidths),Zt(w.textAreaHeights||Nn.textAreaHeights),Ht(w.inpaintAutoColor),Un(w.inpaintManualColor),_n(w.styleSlots||[null,null,null])},[Jl]);A.useEffect(()=>{const w=xv(),M=Cv();le(w);const D=w.find(B=>B.id===M)||w[0];D&&(ht(D.id),cl(D.settings))},[cl]);const Do=A.useCallback(async()=>{if(!("queryLocalFonts"in window))return{status:"unsupported"};try{const w=await window.queryLocalFonts(),M=new Set;for(const B of w)M.add(B.fullName);const D=Array.from(M).sort();return Ae(D),{status:"success",count:D.length}}catch(w){return console.error("Error querying local fonts:",w),{status:"error",message:w.message}}},[]),Pr=A.useCallback(async w=>{const M=[],D=[],B=new Set([..._,...Ce,...vm]),O=Array.from(w).map(async L=>{try{const Y=L.name.split(".").slice(0,-1).join(".");if(B.has(Y))return;const re=await L.arrayBuffer();await YE(Y,re.slice(0));const Ie=await new FontFace(Y,re).load();document.fonts.add(Ie),M.push(Y)}catch(Y){console.error(`Failed to load font from file: ${L.name}`,Y),D.push(L.name)}});return await Promise.all(O),M.length>0&&he(L=>[...new Set([...L,...M])].sort()),{loaded:M,failed:D}},[_,Ce]),fs=A.useCallback(async()=>{try{return await KE(),!0}catch(w){return console.error("Failed to clear custom fonts:",w),!1}},[]);A.useEffect(()=>{const w=async()=>{try{const D=await JE();if(D.length>0){const B=[],O=D.map(async L=>{try{const Y=new FontFace(L.name,L.buffer);await Y.load(),document.fonts.add(Y),B.push(L.name)}catch(Y){console.error(`Failed to load persisted font: ${L.name}`,Y)}});await Promise.all(O),he(L=>[...new Set([...L,...B])].sort())}}catch(D){console.error("Could not load fonts from IndexedDB:",D)}};(async()=>{await w(),await Do()})()},[Do]),A.useEffect(()=>{if(xe.length>0){const w=wv();if(w){const M=w.filter(D=>xe.includes(D));ve(M)}else ve(xe)}},[xe]);const hs=(w,M,D)=>{Sv(w),Tv(M),Ev(D),le(w),ht(M),ve(D);const B=w.find(O=>O.id===M);B&&cl(B.settings),bt(!1)},dl=A.useRef(!1),vi=A.useRef(null),xi=A.useRef({x:0,left:0,right:0}),Go=A.useRef(!1),no=A.useRef(null),[Si,ha]=A.useState(50);A.useEffect(()=>{if(!a){p(null);return}const w=g.present.cleanedImageDataUrl;p(w||a.url)},[g.present.cleanedImageDataUrl,a]);const Io=A.useCallback(()=>{S(w=>{if(w.past.length===0)return w;const M=[...w.past],D=M.pop();return{past:M,present:D,future:[w.present,...w.future]}})},[]),Uo=A.useCallback(()=>{S(w=>{if(w.future.length===0)return w;const M=[...w.future],D=M.shift();return{past:[...w.past,w.present],present:D,future:M}})},[]),pa=A.useCallback(w=>{if(qe)return;a&&v(D=>new Map(D).set(a.file.name,g));const M=n.find(D=>D.file.name===w.name);if(M){u(M);const D=y.get(w.name)||Fo(),B={...D.present,textBoxes:D.present.textBoxes.map(Y=>xm(Y,Fe))},O={...D,present:B};S(O),ye(null),Le(null),nt(null),Et(null),P([]),ee(ft.READY);const L=w.type.split("/")[1];Z(L==="jpeg"?"jpg":L)}},[a,n,y,g,qe,Fe]),ga=w=>{const D=Array.from(w).map(B=>({file:B,url:URL.createObjectURL(B)}));i(B=>[...B,...D]),!a&&D.length>0&&pa(D[0].file)},ps=w=>{const M=n.find(D=>D.file.name===w.name);if(M){if(URL.revokeObjectURL(M.url),i(D=>D.filter(B=>B.file.name!==w.name)),y.has(w.name)){const D=y.get(w.name);D!=null&&D.present.cleanedImageDataUrl&&URL.revokeObjectURL(D.present.cleanedImageDataUrl);const B=new Map(y);B.delete(w.name),v(B)}(a==null?void 0:a.file.name)===w.name&&(u(null),S(Fo()),P([]),ye(null),Le(null),nt(null),Et(null),ee(ft.READY))}},Kl=A.useCallback(w=>{if(!a||!r)return;const M=new FileReader;M.onload=D=>{var L;const B=(L=D.target)==null?void 0:L.result;if(!B)return;const O=new Image;O.onload=()=>{const{naturalWidth:Y,naturalHeight:re}=O,Ee=Y/re,Ie=new Image;Ie.src=r,Ie.onload=()=>{const Ye=Ie.width,W=Ie.height;let we=.3*Ye,Q=we/Ee;Q>.5*W&&(Q=.5*W,we=Q*Ee);const oe=Date.now(),ne={id:oe,type:"image",x:.35,y:.25,width:we/Ye,height:Q/W,rotation:0,imageDataUrl:B,aspectRatio:Ee,plainText:w.name,ocrText:"",styleSpans:[],...Fe};x(ze=>({...ze,textBoxes:[...ze.textBoxes,ne]})),P([oe])}},O.src=B},M.readAsDataURL(w)},[a,r,Fe,x]),ho=A.useCallback((w,M)=>{Le(null),P(M?D=>D.includes(w)?D.filter(B=>B!==w):[...D,w]:D=>D.length===1&&D[0]===w?D:[w]),ye(null)},[]),Ci=()=>{P([]),Le(null)},Xl=()=>{P(b.map(w=>w.id)),Le(null)},po=A.useCallback(async w=>{const M=w||b.filter(D=>D.type==="ocr"&&!D.ocrText);if(!a||M.length===0||!r){w&&ee(ft.READY);return}ee(ft.OCR);try{const D=new Image;D.src=r,await new Promise((Y,re)=>{D.onload=()=>Y(void 0),D.onerror=Ee=>re(new Error(`Failed to load image for OCR sprite sheet: ${Ee}`))});const B=24,O=[];for(let Y=0;Y<M.length;Y+=B){const re=M.slice(Y,Y+B),Ee=ym(re,D,a.file.type);if(!Ee)continue;const{spriteBase64:Ie,boxesForApi:Ye}=Ee;if(Ye.length===0)continue;const W=await cm(Ie,a.file.type,Ye);O.push(...W)}const L=new Map;O.forEach(Y=>{const re=Math.round(Y.fontSizePercentage/100*D.height);L.set(Y.id,{text:Y.text,detectedFontSize:re})}),x(Y=>({...Y,textBoxes:Y.textBoxes.map(re=>{if(L.has(re.id)){const Ee=L.get(re.id);return{...re,ocrText:Ee.text,detectedFontSize:Ee.detectedFontSize}}return re})}))}catch(D){throw console.error("[App] An error occurred during the OCR process:",D),D instanceof Bl&&Ke(D.message),ee(ft.ERROR),D}finally{ee(ft.READY),ye(null)}},[b,a,r,x]),jl=A.useCallback(async()=>{const w=b.filter(M=>M.type==="ocr"&&M.ocrText);if(w.length!==0){ee(ft.TRANSLATING),_t.current=performance.now(),vn(null);try{const M=w.map(L=>({id:L.id,text:L.ocrText})),D=new Map(b.map(L=>[L.id,L])),O=(await fm(M,at)).map(L=>{const Y=D.get(L.id);if(!Y)return null;let re=L.translatedText;return Fe.textTransform==="uppercase"&&(re=re.toUpperCase()),{id:Date.now()+Math.random(),type:"text",x:Y.x,y:Y.y,width:Y.width,height:Y.height,rotation:Y.rotation,ocrText:"",plainText:re,styleSpans:[],fontFamily:Fe.fontFamily,fontSize:Fe.fontSize,textAlign:Fe.textAlign,fontWeight:Fe.fontWeight,fontStyle:Fe.fontStyle,lineHeight:Fe.lineHeight,wordSpacing:Fe.wordSpacing,color:Fe.color,strokeColor:Fe.strokeColor,strokeWidth:Fe.strokeWidth}}).filter(L=>L!==null);x(L=>({...L,textBoxes:[...L.textBoxes.filter(Y=>Y.type!=="ocr"),...O]})),P([])}catch(M){throw console.error(M),M instanceof Bl&&Ke(M.message),ee(ft.ERROR),M}finally{if(ee(ft.READY),_t.current){const M=(performance.now()-_t.current)/1e3;vn(M),_t.current=null}}}},[b,at,Fe,x]),fl=async()=>{if(!a||qe)return;Pe(!0),_t.current=performance.now(),vn(null);const w=g.present;let M=w.cleanedImageDataUrl||a.url,D=w.textBoxes;const B=ke,O=!!B,L=O?4:2;let Y=1;try{ae(`Step ${Y++}/${L}: Performing OCR...`);let re=[];if(O){const W=new Image;W.crossOrigin="anonymous",W.src=M,await new Promise((ne,ze)=>{W.onload=()=>ne(void 0),W.onerror=Ve=>ze(Ve)});const{width:we,height:Q}=W,oe=hm(B,we,Q);oe&&oe.length>0&&(oe.forEach(ne=>{if(ne.length<3)return;const ze=ne.map(Wt=>({anchor:{x:Wt.anchor.x/we,y:Wt.anchor.y/Q},handle1:{x:Wt.handle1.x/we,y:Wt.handle1.y/Q},handle2:{x:Wt.handle2.x/we,y:Wt.handle2.y/Q}})),Ve=ze.map(Wt=>Wt.anchor),dt=Math.min(...Ve.map(Wt=>Wt.x)),vt=Math.min(...Ve.map(Wt=>Wt.y)),xn=Math.max(...Ve.map(Wt=>Wt.x)),Mn=Math.max(...Ve.map(Wt=>Wt.y)),jn={id:Date.now()+Math.random(),type:"ocr",x:dt,y:vt,width:xn-dt,height:Mn-vt,rotation:0,ocrText:"",plainText:"",styleSpans:[],path:ze,...Fe};jn.width>.001&&jn.height>.001&&re.push(jn)}),D=[...D,...re])}const Ee=D.filter(W=>W.type==="ocr"&&!W.ocrText);if(Ee.length>0){const W=new Image;W.src=M,await new Promise((ne,ze)=>{W.onload=()=>ne(void 0),W.onerror=Ve=>ze(new Error(`Failed to load image for OCR sprite sheet: ${Ve}`))});const we=24,Q=[];for(let ne=0;ne<Ee.length;ne+=we){const ze=Ee.slice(ne,ne+we),Ve=ym(ze,W,a.file.type);if(Ve&&Ve.boxesForApi.length>0){const{spriteBase64:dt,boxesForApi:vt}=Ve,xn=await cm(dt,a.file.type,vt);Q.push(...xn)}}const oe=new Map;Q.forEach(ne=>{const ze=Math.round(ne.fontSizePercentage/100*W.height);oe.set(ne.id,{text:ne.text,detectedFontSize:ze})}),D=D.map(ne=>{if(oe.has(ne.id)){const ze=oe.get(ne.id);return{...ne,ocrText:ze.text,detectedFontSize:ze.detectedFontSize}}return ne})}if(!D.some(W=>W.type==="ocr"&&W.ocrText))throw ae("No text found to process. Process stopped."),await Ar(2e3),O&&(x(W=>({...W,textBoxes:D})),nt(null)),new Error("No text found for translation.");if(O){ae(`Step ${Y++}/${L}: Recalling selection...`),await Ar(500),ae(`Step ${Y++}/${L}: Cleaning background...`);const W=new Image;W.crossOrigin="anonymous",W.src=M,await new Promise((Ve,dt)=>{W.onload=()=>Ve(void 0),W.onerror=vt=>dt(vt)});const we=document.createElement("canvas");we.width=W.width,we.height=W.height;const Q=we.getContext("2d",{willReadFrequently:!0});if(!Q)throw new Error("Could not get context for inpainting");Q.drawImage(W,0,0);const oe=Q.getImageData(0,0,W.width,W.height),ne=pm(oe,B,Bn?"auto":"manual",Jn);Q.putImageData(ne,0,0);const ze=we.toDataURL(a.file.type);w.cleanedImageDataUrl&&URL.revokeObjectURL(w.cleanedImageDataUrl),M=ze}ae(`Step ${Y++}/${L}: Translating text...`);const Ie=D.filter(W=>W.type==="ocr"&&W.ocrText);if(Ie.length>0){const W=Ie.map(ze=>({id:ze.id,text:ze.ocrText})),we=await fm(W,at),Q=new Map(Ie.map(ze=>[ze.id,ze])),oe=we.map(ze=>{const Ve=Q.get(ze.id);if(!Ve)return null;let dt=ze.translatedText;return Fe.textTransform==="uppercase"&&(dt=dt.toUpperCase()),{id:Date.now()+Math.random(),type:"text",x:Ve.x,y:Ve.y,width:Ve.width,height:Ve.height,rotation:Ve.rotation,ocrText:"",plainText:dt,styleSpans:[],fontFamily:Fe.fontFamily,fontSize:Fe.fontSize,textAlign:Fe.textAlign,fontWeight:Fe.fontWeight,fontStyle:Fe.fontStyle,lineHeight:Fe.lineHeight,wordSpacing:Fe.wordSpacing,color:Fe.color,strokeColor:Fe.strokeColor,strokeWidth:Fe.strokeWidth}}).filter(ze=>ze!==null),ne=new Set(Ie.map(ze=>ze.id));D=[...D.filter(ze=>!ne.has(ze.id)),...oe]}const Ye={...w,strokes:w.strokes,textBoxes:D,cleanedImageDataUrl:M};x(()=>Ye),O&&nt(null),gl(),ae("Auto process complete!"),await Ar(2e3)}catch(re){re.message==="No text found for translation."?console.log(re.message):(console.error("Auto processing failed:",re),re instanceof Bl&&Ke(re.message),ae(`Error: ${re.message||"Unknown error"}.`),await Ar(5e3))}finally{if(Pe(!1),ae(null),ye(null),_t.current){const re=(performance.now()-_t.current)/1e3;vn(re),_t.current=null}}},ma=(w,M)=>{x(D=>({...D,textBoxes:D.textBoxes.map(B=>{if(B.id!==M||B.type!=="text"||!B.plainText)return B;const O=B.plainText,L=B.styleSpans||[];if(O===w)return B;let Y=0;for(;Y<O.length&&Y<w.length&&O[Y]===w[Y];)Y++;let re=O.length-1,Ee=w.length-1;for(;re>=Y&&Ee>=Y&&O[re]===w[Ee];)re--,Ee--;const Ie=Ee-Y+1,Ye=re-Y+1,W=Ie-Ye;let Q=L.map(ne=>{const{start:ze,end:Ve}=ne;let dt=ze,vt=Ve;return ze>re?dt=ze+W:ze>Y&&(dt=Y),Ve>re?vt=Ve+W:Ve>Y&&(vt=Y),{...ne,start:dt,end:vt}}).filter(ne=>ne.start<ne.end);if(Ie>0){const ne=Y>0?Y-1:0,ze={fontFamily:B.fontFamily,fontSize:B.fontSize},Ve=L.find(xn=>ne>=xn.start&&ne<xn.end),dt=Ve?{...ze,...Ve.style}:ze,vt={fontFamily:dt.fontFamily,fontSize:dt.fontSize};if(vt.fontFamily!==B.fontFamily||vt.fontSize!==B.fontSize){const xn={start:Y,end:Y+Ie,style:vt};Q.push(xn)}}Q.sort((ne,ze)=>ne.start-ze.start);const oe=[];if(Q.length>0){let ne={...Q[0]};for(let ze=1;ze<Q.length;ze++){const Ve=Q[ze];ne.end===Ve.start&&JSON.stringify(ne.style)===JSON.stringify(Ve.style)?ne.end=Ve.end:(oe.push(ne),ne={...Ve})}oe.push(ne)}return{...B,plainText:w,styleSpans:oe}})}))},Wl=A.useCallback((w,M)=>{F.length!==0&&(x(D=>{const B=D.textBoxes.map(O=>{if(!F.includes(O.id)||O.type!=="text"||!O.plainText)return O;let L={...O};if(M&&M.start!==M.end){const{plainText:Y,styleSpans:re}=L,{textTransform:Ee,...Ie}=w;if(Ee&&Ee!=="none"){const Ye=Y.substring(0,M.start);let W=Y.substring(M.start,M.end);const we=Y.substring(M.end);W=Ee==="uppercase"?W.toUpperCase():W.toLowerCase(),L.plainText=Ye+W+we}if(Object.keys(Ie).length>0){const Ye={fontFamily:O.fontFamily,fontSize:O.fontSize,textAlign:O.textAlign,fontWeight:O.fontWeight,fontStyle:O.fontStyle,lineHeight:O.lineHeight,wordSpacing:O.wordSpacing,color:O.color,strokeColor:O.strokeColor,strokeWidth:O.strokeWidth},W=Array.from({length:Y.length},()=>({...Ye}));for(const oe of re)for(let ne=oe.start;ne<oe.end;ne++)W[ne]&&(W[ne]={...W[ne],...oe.style});const we={...Ie};for(let oe=M.start;oe<M.end;oe++)W[oe]&&(Object.keys(we).forEach(ne=>{we[ne]===void 0&&delete W[oe][ne]}),W[oe]={...W[oe],...we});const Q=[];if(Y.length>0){let oe=null;for(let ne=0;ne<Y.length;ne++){const ze={};let Ve=!1;for(const dt in W[ne])if(Object.prototype.hasOwnProperty.call(W[ne],dt)){const vt=dt;W[ne][vt]!==Ye[vt]&&W[ne][vt]!==void 0&&(ze[vt]=W[ne][vt],Ve=!0)}oe&&JSON.stringify(oe.style)===JSON.stringify(ze)?oe.end=ne+1:(oe&&Q.push(oe),Ve?oe={start:ne,end:ne+1,style:ze}:oe=null)}oe&&Q.push(oe)}L.styleSpans=Q}}else{w.textTransform&&w.textTransform!=="none"&&(L.plainText=w.textTransform==="uppercase"?L.plainText.toUpperCase():L.plainText.toLowerCase());const{textTransform:Y,...re}=w,Ee={...L,...re},Ie=(L.styleSpans||[]).map(Ye=>{const W={};let we=!1;for(const Q in Ye.style)if(Object.prototype.hasOwnProperty.call(Ye.style,Q)){const oe=Q;Ye.style[oe]!==Ee[oe]&&(W[oe]=Ye.style[oe],we=!0)}return we?{...Ye,style:W}:null}).filter(Ye=>Ye!==null);L={...Ee,styleSpans:Ie}}return L});return{...D,textBoxes:B}}),M&&Be({...M,trigger:Date.now()}))},[F,x]),Ti=(w,M)=>{const D=[...un];D[w]=M,_n(D)},gs=A.useCallback(()=>{!Yl||!ln||x(w=>{const M=[...w.textBoxes],D=M.findIndex(L=>L.id===ln);if(D===-1||D>=M.length-1)return w;const B=D+1,O=M.splice(D,1)[0];return M.splice(B,0,O),{...w,textBoxes:M}})},[Yl,ln,x]),On=A.useCallback(()=>{!Gn||!ln||x(w=>{const M=[...w.textBoxes],D=M.findIndex(L=>L.id===ln);if(D<=0)return w;const B=D-1,O=M.splice(D,1)[0];return M.splice(B,0,O),{...w,textBoxes:M}})},[Gn,ln,x]),Oo=A.useCallback((w,M)=>{const D=g.present.textBoxes.find(oe=>oe.id===w);if(!D||D.type!=="text"||!D.plainText)return;const B=D.plainText.substring(0,M),O=D.plainText.substring(M),L=(D.styleSpans||[]).map(oe=>({...oe,style:{...oe.style},start:Math.min(oe.start,M),end:Math.min(oe.end,M)})).filter(oe=>oe.start<oe.end),Y=(D.styleSpans||[]).map(oe=>({...oe,style:{...oe.style},start:Math.max(0,oe.start-M),end:Math.max(0,oe.end-M)})).filter(oe=>oe.start<oe.end),re=D.plainText.length,Ee=re>0?M/re:.5,Ie=D.width*Ee,Ye=D.width*(1-Ee),W={...D,plainText:B,styleSpans:L,width:Ie},we=Date.now(),Q={...D,id:we,plainText:O,styleSpans:Y,x:D.x+Ie,width:Ye};x(oe=>{const ne=oe.textBoxes.map(Ve=>Ve.id===w?W:Ve),ze=ne.findIndex(Ve=>Ve.id===W.id);return ze>-1?ne.splice(ze+1,0,Q):ne.push(Q),{...oe,textBoxes:ne}}),P([W.id,Q.id]),Re===w&&Le(null)},[g.present.textBoxes,x,Re]),Ei=w=>{ie&&(ie==="brush"?ct(w):ie==="color"||ie==="strokeColor"?Wl(ie==="color"?{color:w}:{strokeColor:w},null):ie==="inpaint"&&Un(w)),ge(null)},hl=w=>{x(M=>({...M,textBoxes:w}))},Lr=w=>{x(M=>({...M,strokes:w}))},ya=()=>{var re;if(!a)return;ye(null);const w=Date.now();let M=Fe;const D=b.find(Ee=>Ee.id===ln);D&&D.type==="text"&&(M={fontFamily:D.fontFamily||Fe.fontFamily,fontSize:D.fontSize||Fe.fontSize,textAlign:D.textAlign||Fe.textAlign,fontWeight:D.fontWeight||Fe.fontWeight,fontStyle:D.fontStyle||Fe.fontStyle,lineHeight:D.lineHeight||Fe.lineHeight,wordSpacing:D.wordSpacing||Fe.wordSpacing,color:D.color||Fe.color,strokeColor:D.strokeColor||Fe.strokeColor,strokeWidth:D.strokeWidth||Fe.strokeWidth,textTransform:"none"});const{textTransform:B,...O}=M,L="New Text",Y={id:w,type:"text",x:.4,y:.4,width:.2,height:.1,rotation:0,ocrText:"",plainText:B==="uppercase"||D&&D.plainText===((re=D.plainText)==null?void 0:re.toUpperCase())?L.toUpperCase():L,styleSpans:[],...O};x(Ee=>({...Ee,textBoxes:[...Ee.textBoxes,Y]})),P([w])},wi=A.useCallback(()=>{F.length!==0&&(x(w=>({...w,textBoxes:w.textBoxes.filter(M=>!F.includes(M.id))})),P([]))},[F,x]),pl=A.useCallback((w,M)=>{F.length!==0&&x(D=>({...D,textBoxes:D.textBoxes.map(B=>{if(F.includes(B.id)){const O={...B};return O.x+=w,O.y+=M,O.x=Math.max(0,Math.min(O.x,1-O.width)),O.y=Math.max(0,Math.min(O.y,1-O.height)),O.path&&(O.path=O.path.map(L=>({anchor:{x:L.anchor.x+w,y:L.anchor.y+M},handle1:{x:L.handle1.x+w,y:L.handle1.y+M},handle2:{x:L.handle2.x+w,y:L.handle2.y+M}}))),O}return B})}))},[F,x]),gl=A.useCallback(()=>{g.present.strokes.some(w=>w.type==="brush"||w.type==="eraser")&&x(w=>({...w,strokes:w.strokes.filter(M=>M.type!=="brush"&&M.type!=="eraser")}))},[x,g]),ms=w=>{P([w]),Le(w)},ys=()=>{Le(null)},Xn=A.useCallback(async(w,M,D,B,O)=>{const L=new Image;L.crossOrigin="anonymous",L.src=w,await new Promise((Q,oe)=>{L.onload=()=>Q(void 0),L.onerror=ne=>oe(new Error("Failed to load image for saving"))});const Y=document.createElement("canvas");Y.width=L.naturalWidth,Y.height=L.naturalHeight;const re=Y.getContext("2d");if(!re)throw new Error("Could not create offscreen canvas context");re.drawImage(L,0,0);const Ee=Q=>({x:Q.x*L.naturalWidth,y:Q.y*L.naturalHeight});if(D.length>0){const Q=document.createElement("canvas");Q.width=Y.width,Q.height=Y.height;const oe=Q.getContext("2d");oe?(Ao(oe,D,Ee),re.drawImage(Q,0,0)):(console.error("Could not create temporary stroke canvas context for saving."),Ao(re,D,Ee))}const Ie=new Map,Ye=M.filter(Q=>Q.type==="image"&&Q.imageDataUrl).map(Q=>{const oe=new Image;oe.crossOrigin="anonymous";const ne=new Promise((ze,Ve)=>{oe.onload=()=>{Ie.set(Q.imageDataUrl,oe),ze()},oe.onerror=Ve});return oe.src=Q.imageDataUrl,ne});await Promise.all(Ye),M.forEach(Q=>{const oe=Q.x*L.naturalWidth,ne=Q.y*L.naturalHeight,ze=Q.width*L.naturalWidth,Ve=Q.height*L.naturalHeight;if(Q.type==="image"&&Q.imageDataUrl){const dt=Ie.get(Q.imageDataUrl);if(dt){const vt=oe+ze/2,xn=ne+Ve/2;re.save(),re.translate(vt,xn),re.rotate(Q.rotation*Math.PI/180),re.drawImage(dt,-ze/2,-Ve/2,ze,Ve),re.restore()}}else if(Q.type==="text"){const dt=gm(Q.plainText||"",Q.styleSpans||[]),vt={...Q,translatedText:dt};Tm(re,vt,oe,ne,ze,Ve)}});const W=`image/${B}`;return await new Promise(Q=>Y.toBlob(Q,W,O/100))},[]),vs=A.useCallback(async(w,M,D,B,O,L)=>{const Y=await Xn(w,D,B,O,L);if(!Y)throw new Error(`Failed to generate image blob for ${M.name}`);const re=URL.createObjectURL(Y),Ee=document.createElement("a");Ee.href=re;const Ie=O==="jpeg"?"jpg":O;Ee.download=`${M.name.split(".").slice(0,-1).join(".")}-translated.${Ie}`,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(re)},[Xn]),va=A.useCallback(async()=>{!r||!a||(await vs(r,a.file,b,I,De==="jpg"?"jpeg":De,gt),ce(!1))},[r,a,b,I,De,gt,vs]),Fr=A.useCallback(async()=>{if(Je(!1),typeof JSZip>"u"){alert("Could not create zip file. JSZip library is missing. Please check your internet connection or the app configuration.");return}if(n.length===0){alert("No pages to export.");return}ee(ft.SAVING);try{const w=new JSZip,M=new Map(y);a&&M.set(a.file.name,g);for(const L of n){const Y=M.get(L.file.name)||Fo(),{textBoxes:re,strokes:Ee,cleanedImageDataUrl:Ie}=Y.present,Ye=Ie||L.url,W=Ge,we=U,Q=W,oe=`${L.file.name.split(".").slice(0,-1).join(".")}.${Q}`,ze=await Xn(Ye,re,Ee,W==="jpg"?"jpeg":W,we);ze&&w.file(oe,ze)}const D=await w.generateAsync({type:"blob"}),B=URL.createObjectURL(D),O=document.createElement("a");O.href=B,O.download="comic-translation.zip",document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(B)}catch(w){console.error("Error creating zip file:",w),ee(ft.ERROR),alert("An error occurred while creating the zip file. Check the console for details.")}finally{ee(ft.READY)}},[n,y,a,g,Xn,Ge,U]),Hr=A.useCallback(async()=>{if(lt(!1),typeof jspdf>"u"){alert("Could not create PDF file. jsPDF library is missing.");return}if(n.length===0){alert("No pages to export.");return}ee(ft.SAVING);try{const{jsPDF:w}=jspdf,M=new w({orientation:"p",unit:"pt",format:"a4"}),D=new Map(y);a&&D.set(a.file.name,g);for(let B=0;B<n.length;B++){const O=n[B],L=D.get(O.file.name)||Fo(),{textBoxes:Y,strokes:re,cleanedImageDataUrl:Ee}=L.present,Ie=Ee||O.url,Ye=ut,Q=await Xn(Ie,Y,re,Ye==="jpg"?"jpeg":Ye,pt);if(!Q)continue;B>0&&M.addPage();const oe=M.internal.pageSize.getWidth(),ne=M.internal.pageSize.getHeight(),ze=new Image,Ve=URL.createObjectURL(Q);await new Promise((bi,oo)=>{ze.onload=()=>bi(),ze.onerror=oo,ze.src=Ve});const dt=ze.width,vt=ze.height;URL.revokeObjectURL(Ve);const xn=Math.min(oe/dt,ne/vt),Mn=dt*xn,jn=vt*xn,Wt=(oe-Mn)/2,yl=(ne-jn)/2,Zl=new Uint8Array(await Q.arrayBuffer());M.addImage(Zl,Ye==="jpg"?"JPEG":Ye.toUpperCase(),Wt,yl,Mn,jn)}M.save("comic-export.pdf")}catch(w){console.error("Error creating PDF file:",w),ee(ft.ERROR),alert("An error occurred while creating the PDF file. Check the console for details.")}finally{ee(ft.READY)}},[n,y,a,g,Xn,ut,pt]),xa=A.useCallback(async()=>{if(!(!ke||!r)){ee(ft.INPAINTING),await new Promise(w=>setTimeout(w,10));try{const w=new Image;w.crossOrigin="anonymous",w.src=r,await new Promise((Y,re)=>{w.onload=()=>Y(void 0),w.onerror=re});const M=document.createElement("canvas");M.width=w.width,M.height=w.height;const D=M.getContext("2d",{willReadFrequently:!0});if(!D)throw new Error("Could not get canvas context for inpainting");D.drawImage(w,0,0);const B=D.getImageData(0,0,w.width,w.height),O=pm(B,ke,Bn?"auto":"manual",Jn);D.putImageData(O,0,0);const L=M.toDataURL((a==null?void 0:a.file.type)||"image/png");g.present.cleanedImageDataUrl&&URL.revokeObjectURL(g.present.cleanedImageDataUrl),x(Y=>({...Y,cleanedImageDataUrl:L})),Et(ke),nt(null)}catch(w){console.error("Inpainting failed:",w),ee(ft.ERROR)}finally{ee(ft.READY)}}},[ke,r,Bn,Jn,a,g.present.cleanedImageDataUrl,x]),ml=H!==ft.READY&&H!==ft.ERROR||qe,Sa=A.useCallback(async()=>{if(!ml){_t.current=performance.now(),vn(null);try{if(ke){ee(ft.PATH_TO_BOX);try{if(Et(ke),!r){ee(ft.READY);return}const w=new Image;w.crossOrigin="anonymous",w.src=r,await new Promise((L,Y)=>{w.onload=()=>L(void 0),w.onerror=re=>Y(new Error("Image load failed for selection finalization"))});const{width:M,height:D}=w,B=hm(ke,M,D),O=[];if(B&&B.length>0&&B.forEach(L=>{if(L.length<3)return;const Y=L.map(oe=>({anchor:{x:oe.anchor.x/M,y:oe.anchor.y/D},handle1:{x:oe.handle1.x/M,y:oe.handle1.y/D},handle2:{x:oe.handle2.x/M,y:oe.handle2.y/D}})),re=Y.map(oe=>oe.anchor),Ee=Math.min(...re.map(oe=>oe.x)),Ie=Math.min(...re.map(oe=>oe.y)),Ye=Math.max(...re.map(oe=>oe.x)),W=Math.max(...re.map(oe=>oe.y)),Q={id:Date.now()+Math.random(),type:"ocr",x:Ee,y:Ie,width:Ye-Ee,height:W-Ie,rotation:0,ocrText:"",plainText:"",styleSpans:[],path:Y,...Fe};Q.width>.001&&Q.height>.001&&O.push(Q)}),nt(null),O.length>0){const L=O.map(Y=>Y.id);x(Y=>({...Y,textBoxes:[...Y.textBoxes,...O]})),P(L),await po(O)}else ee(ft.READY)}catch(w){console.error("Error during selection finalization or OCR:",w),w instanceof Bl&&Ke(w.message),ee(ft.ERROR)}}else b.some(w=>w.type==="ocr"&&!w.ocrText)&&await po()}finally{if(_t.current){const w=(performance.now()-_t.current)/1e3;vn(w),_t.current=null}}}},[ml,ke,r,Fe,b,x,po,Ke]);A.useEffect(()=>{const w=M=>{const D=H!==ft.READY&&H!==ft.ERROR||qe;if(M.key==="Escape"&&(Re&&ys(),ie&&ge(null),ke&&rl()),!["TEXTAREA","INPUT","SELECT"].includes(M.target.tagName)){if((M.ctrlKey||M.metaKey)&&M.shiftKey&&M.key.toLowerCase()==="x"&&(D||(M.preventDefault(),gl())),(M.key==="Delete"||M.key==="Backspace")&&(ke&&!D?(M.preventDefault(),xa()):wi()),M.key.startsWith("Arrow")){if(F.length>0){M.preventDefault();const L=M.shiftKey?.01:.001;let Y=0,re=0;switch(M.key){case"ArrowUp":re=-L;break;case"ArrowDown":re=L;break;case"ArrowLeft":Y=-L;break;case"ArrowRight":Y=L;break}(Y!==0||re!==0)&&pl(Y,re)}return}if(M.ctrlKey||M.metaKey){M.key==="z"?(M.preventDefault(),Io()):M.key==="y"&&(M.preventDefault(),Uo());return}if(M.altKey){switch(M.preventDefault(),M.key.toLowerCase()){case"b":ye(B=>B==="brush"?null:"brush");break;case"r":_e==="brush"&&ct("#FF0000");break;case"w":_e==="brush"&&ct("#FFFFFF");break;case"t":b.some(B=>B.type==="ocr"&&B.ocrText&&B.ocrText.length>0)&&!D&&jl();break;case"o":!D&&a&&(ke||b.some(B=>B.type==="ocr"&&!B.ocrText))&&Sa();break;case"a":!D&&a&&fl();break}return}M.key==="\\"&&ke&&(M.preventDefault(),rl())}};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}},[wi,Io,Uo,ie,Re,F,pl,_e,H,qe,b,jl,ke,rl,xa,Sa,fl,a,gl]);const Ca=(w,M)=>{w.preventDefault(),dl.current=!0,vi.current=M,xi.current={x:w.clientX,left:mn.left,right:mn.right}},Br=w=>{w.preventDefault(),Go.current=!0},Ta=A.useCallback(()=>{(dl.current||Go.current)&&(dl.current=!1,vi.current=null,Go.current=!1,document.body.style.cursor="default",document.body.style.userSelect="")},[]),Ea=A.useCallback(w=>{if(dl.current){document.body.style.cursor="col-resize",document.body.style.userSelect="none";const M=w.clientX-xi.current.x,D=window.innerWidth,B=M/D*100;let O=xi.current.left,L=xi.current.right;vi.current==="left"?O+=B:L-=B,O<15&&(O=15),L<20&&(L=20);const Y=70;O+L>Y&&(vi.current==="left"?L=Y-O:O=Y-L),Ft({left:O,center:100-O-L,right:L})}if(Go.current&&(document.body.style.cursor="ns-resize",document.body.style.userSelect="none",no.current)){const M=no.current.getBoundingClientRect(),D=(w.clientY-M.top)/M.height*100,B=Math.max(10,Math.min(90,D));ha(B)}},[]);A.useEffect(()=>(window.addEventListener("mousemove",Ea),window.addEventListener("mouseup",Ta),()=>{window.removeEventListener("mousemove",Ea),window.removeEventListener("mouseup",Ta)}),[Ea,Ta]),A.useEffect(()=>{if(!me){N(null);return}if(De!=="jpg"&&De!=="webp"||!r){N(null);return}const w=setTimeout(async()=>{try{const M=await Xn(r,b,I,De==="jpg"?"jpeg":De,gt);M&&N(Wc(M.size))}catch(M){console.error("Error estimating file size:",M),N("Error")}},250);return()=>{clearTimeout(w)}},[me,De,gt,r,b,I,Xn]),A.useEffect(()=>{if(!se){Te(null);return}if(Ge!=="jpg"&&Ge!=="webp"||n.length===0){Te(null);return}const w=setTimeout(async()=>{try{let M=0;const D=new Map(y);a&&D.set(a.file.name,g);for(const B of n){const O=D.get(B.file.name)||Fo(),{textBoxes:L,strokes:Y,cleanedImageDataUrl:re}=O.present,Ee=re||B.url,Ie=await Xn(Ee,L,Y,Ge==="jpg"?"jpeg":Ge,U);Ie&&(M+=Ie.size)}M>0?Te(Wc(M)):Te(null)}catch(M){console.error("Error estimating zip file size:",M),Te("Error")}},250);return()=>{clearTimeout(w)}},[se,Ge,U,n,y,g,a,Xn]),A.useEffect(()=>{if(!je){An(null);return}if(ut!=="jpg"&&ut!=="webp"||n.length===0){An(null);return}const w=setTimeout(async()=>{try{let M=0;const D=new Map(y);if(a&&D.set(a.file.name,g),n.length>0){const B=n[0],O=D.get(B.file.name)||Fo(),{textBoxes:L,strokes:Y,cleanedImageDataUrl:re}=O.present,Ee=re||B.url,Ie=await Xn(Ee,L,Y,ut==="jpg"?"jpeg":ut,pt);Ie&&(M=Ie.size*n.length)}M>0?An(Wc(M)):An(null)}catch(M){console.error("Error estimating PDF file size:",M),An("Error")}},250);return()=>{clearTimeout(w)}},[je,ut,pt,n,y,g,a,Xn]);const qr={targetLanguage:at,interfaceLanguage:fo().language,defaultTextFormat:Fe,brushColor:Ne,paintBrushSize:rn,selectionEraserSize:St,brushShape:"round",brushHardness:Dt,brushOpacity:Ot,panelWidths:mn,textAreaHeights:yn,inpaintAutoColor:Bn,inpaintManualColor:Jn,styleSlots:un},Ai=H!==ft.READY&&H!==ft.ERROR,Gr=A.useMemo(()=>b.map(w=>{if(w.type==="text"){const M=gm(w.plainText||"",w.styleSpans||[]);return{...w,translatedText:M}}return w}),[b]),Or=w=>{F.length===1&&Oo(F[0],w)},Vr=async w=>await(await fetch(w)).blob(),xs=A.useCallback(async()=>{if(n.length===0){alert("Nothing to save.");return}ee(ft.SAVING_PROJECT);try{const w=new JSZip,M=w.folder("images");if(!M)throw new Error("Could not create images folder in zip.");const D=new Map(y);a&&D.set(a.file.name,g);const B={},O=[];for(const{file:Ie}of n){O.push({name:Ie.name,type:Ie.type}),M.file(Ie.name,Ie);const Ye=D.get(Ie.name);if(Ye){const W=JSON.parse(JSON.stringify(Ye)),we=W.present.cleanedImageDataUrl;if(we&&(we.startsWith("data:")||we.startsWith("blob:"))){const Q=`${Ie.name.split(".").slice(0,-1).join(".")}_clean.png`;let oe;we.startsWith("blob:")?oe=await(await fetch(we)).blob():oe=await Vr(we),M.file(Q,oe),W.present.cleanedImageDataUrl=Q}W.past.forEach(Q=>{Q.cleanedImageDataUrl&&(Q.cleanedImageDataUrl=null)}),W.future.forEach(Q=>{Q.cleanedImageDataUrl&&(Q.cleanedImageDataUrl=null)}),W.past.length>4&&(W.past=W.past.slice(-4)),W.future.length>4&&(W.future=W.future.slice(0,4)),B[Ie.name]=W}}const L={version:"2.0.0",fileManifest:O,fileStates:B,profiles:bn,activeProfileId:tt,selectedFileName:(a==null?void 0:a.file.name)||null,styleSlots:un};w.file("project.json",JSON.stringify(L));const Y=await w.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),re=URL.createObjectURL(Y),Ee=document.createElement("a");Ee.href=re,Ee.download="project.cmt.zip",document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(re)}catch(w){console.error("Failed to save project:",w),ee(ft.ERROR),alert("An error occurred while saving the project.")}finally{ee(ft.READY)}},[n,y,a,g,bn,tt]),Yr=A.useCallback(async w=>{const M=w[0];if(M){ee(ft.LOADING_PROJECT);try{const D=await JSZip.loadAsync(M),B=D.file("project.json");if(!B)throw new Error("Invalid project file: project.json not found.");const O=await B.async("string"),L=JSON.parse(O);if(L.version!=="2.0.0")throw new Error(`Unsupported project version: ${L.version||"unknown"}. Expected 2.0.0.`);if(!L.fileManifest||!L.fileStates)throw new Error("Invalid project file format: missing manifest or states.");n.forEach(ne=>URL.revokeObjectURL(ne.url)),y.forEach(ne=>{ne.present.cleanedImageDataUrl&&URL.revokeObjectURL(ne.present.cleanedImageDataUrl)}),g.present.cleanedImageDataUrl&&URL.revokeObjectURL(g.present.cleanedImageDataUrl),i([]),v(new Map),u(null),S(Fo()),P([]),nt(null),Et(null);const Y=new Map,re=[],Ee=D.folder("images");if(!Ee)throw new Error("Invalid project file: images folder not found.");for(const ne of L.fileManifest){const ze=Ee.file(ne.name);if(!ze){console.warn(`Image ${ne.name} not found in project file manifest.`);continue}const Ve=await ze.async("blob"),dt=new File([Ve],ne.name,{type:ne.type}),vt=URL.createObjectURL(dt);re.push({file:dt,url:vt});const xn=L.fileStates[ne.name];if(xn){const Mn=JSON.parse(JSON.stringify(xn));if(Mn.present.cleanedImageDataUrl&&typeof Mn.present.cleanedImageDataUrl=="string"){const jn=Ee.file(Mn.present.cleanedImageDataUrl);if(jn){const Wt=await jn.async("blob");Mn.present.cleanedImageDataUrl=URL.createObjectURL(Wt)}else Mn.present.cleanedImageDataUrl=null}Y.set(ne.name,Mn)}}i(re),v(Y);const Ie=L.profiles||[_m()],Ye=L.activeProfileId||Ie[0].id;le(Ie),ht(Ye);const W=Ie.find(ne=>ne.id===Ye);W&&(cl(W.settings),_n(L.styleSlots||[null,null]));const we=W?W.settings.defaultTextFormat:Fe;let Q;const oe=L.selectedFileName;if(oe&&(Q=re.find(ne=>ne.file.name===oe)),!Q&&re.length>0&&(Q=re[0]),Q){const ne=Y.get(Q.file.name)||Fo(),ze={...ne.present,textBoxes:ne.present.textBoxes.map(vt=>xm(vt,we))},Ve={...ne,present:ze};S(Ve),u(Q),ye(null),Le(null),P([]);const dt=Q.file.type.split("/")[1];Z(dt==="jpeg"?"jpg":dt)}else u(null),S(Fo()),P([])}catch(D){console.error("Failed to load project:",D),ee(ft.ERROR),alert(o("projectLoadError"))}finally{ee(ft.READY)}}},[n,y,g,cl,o,Fe]),Ss=(w,M)=>{const D=JSON.stringify(w,null,2),B=new Blob([D],{type:"application/json"}),O=URL.createObjectURL(B),L=document.createElement("a");L.href=O,L.download=M,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(O)},Jr=A.useCallback(()=>{if(!a)return;const M=g.present.textBoxes.filter(B=>B.type==="ocr").map(({id:B,ocrText:O,x:L,y:Y,width:re,height:Ee,rotation:Ie,path:Ye})=>({id:B,ocrText:O||"",x:L,y:Y,width:re,height:Ee,rotation:Ie,path:Ye||null}));if(M.length===0){alert("Nessun box OCR trovato in questa pagina da esportare.");return}const D=`${a.file.name.split(".").slice(0,-1).join(".")}_ocr.json`;Ss(M,D)},[a,g]),Kr=A.useCallback(()=>{if(!a)return;const M=g.present.textBoxes.filter(B=>B.type==="text").map(({id:B,plainText:O,x:L,y:Y,width:re,height:Ee,rotation:Ie})=>({id:B,text:O||"",x:L,y:Y,width:re,height:Ee,rotation:Ie}));if(M.length===0){alert("Nessun box di testo da esportare in questa pagina.");return}const D=`${a.file.name.split(".").slice(0,-1).join(".")}_text.json`;Ss(M,D)},[a,g]),Xr=A.useCallback(w=>{const M=new FileReader;M.onload=D=>{var B;try{const O=(B=D.target)==null?void 0:B.result,L=JSON.parse(O);if(!Array.isArray(L))throw new Error("Invalid format: JSON is not an array.");let Y=0,re=0;x(Ie=>{let Ye=[...Ie.textBoxes];const W=[],we=new Set,Q=new Map(Ie.textBoxes.filter(ne=>ne.type==="ocr").map(ne=>[ne.id,ne]));for(const ne of L){const ze=Ye.findIndex(Ve=>Ve.id===ne.id&&Ve.type==="text");if(ze!==-1)Ye[ze]={...Ye[ze],plainText:ne.text},Y++;else if(Q.has(ne.id)){const Ve=Q.get(ne.id);let dt=ne.text;Fe.textTransform==="uppercase"&&(dt=dt.toUpperCase());const vt={id:Date.now()+Math.random(),type:"text",x:ne.x??Ve.x,y:ne.y??Ve.y,width:ne.width??Ve.width,height:ne.height??Ve.height,rotation:ne.rotation??Ve.rotation,plainText:dt,styleSpans:[],ocrText:"",fontFamily:Fe.fontFamily,fontSize:Fe.fontSize,textAlign:Fe.textAlign,fontWeight:Fe.fontWeight,fontStyle:Fe.fontStyle,lineHeight:Fe.lineHeight,wordSpacing:Fe.wordSpacing,color:Fe.color,strokeColor:Fe.strokeColor,strokeWidth:Fe.strokeWidth};W.push(vt),we.add(Ve.id),re++}}const oe=[...Ye.filter(ne=>!we.has(ne.id)),...W];return{...Ie,textBoxes:oe}});let Ee="Importazione completata. ";Y>0&&(Ee+=`Aggiornati ${Y} box di testo. `),re>0&&(Ee+=`Tradotti ${re} box OCR.`),Y===0&&re===0&&(Ee="Importazione terminata, ma nessun box corrispondente  stato trovato per l'aggiornamento o la traduzione."),alert(Ee)}catch(O){alert(`Impossibile importare il testo: ${O instanceof Error?O.message:"Errore sconosciuto"}`)}},M.readAsText(w)},[x,Fe]);return m.jsxs("div",{className:"h-screen w-screen flex flex-col overflow-hidden",children:[m.jsxs("header",{className:"w-full bg-gray-800 border-b border-gray-700 p-2 flex items-center justify-between z-10",children:[m.jsxs("div",{className:"flex items-center flex-shrink-0",children:[m.jsx(jE,{onClick:()=>bt(!0)}),m.jsx("h1",{className:"text-xl font-bold text-gray-200 ml-4",children:"Comics Magic Translator"})]}),m.jsxs("div",{className:"flex-grow flex justify-center items-center px-4",children:[Ai&&!qe&&m.jsxs("div",{className:"flex justify-center items-center text-amber-400 font-semibold",children:[m.jsx(br,{}),m.jsx("span",{className:"ml-2",children:H})]}),qe&&V&&m.jsxs("div",{className:"flex justify-center items-center text-amber-400 font-semibold",children:[m.jsx(br,{}),m.jsx("span",{className:"ml-2",children:V})]}),!Ai&&!qe&&on!==null&&m.jsx("div",{className:"text-sm font-mono p-2 rounded-md bg-gray-900 text-gray-400",title:o("lastProcessTimeTooltip"),children:o("lastProcessTime",{time:on.toFixed(1)})})]}),m.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[m.jsx("div",{className:`text-sm font-mono p-2 rounded-md bg-gray-900 ${Se>=240?"text-red-500":"text-gray-400"}`,title:o("apiCallsTooltip"),children:o("apiCalls",{count:Se})}),m.jsx("select",{id:"language-select-header",value:at,onChange:w=>It(w.target.value),disabled:ml||!a,className:"bg-gray-700 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",title:o("translateTo"),children:ZE.map(w=>m.jsx("option",{value:w,children:o(w)},w))}),m.jsx("button",{onClick:fl,disabled:ml||!a,className:"flex justify-center items-center bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-2 px-3 rounded-lg transition-colors duration-200 text-sm",title:o("autoTooltip"),children:o("auto")}),m.jsxs("button",{onClick:Sa,disabled:ml||!a||!ke&&!b.some(w=>w.type==="ocr"&&!w.ocrText),className:"flex justify-center items-center bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-2 px-3 rounded-lg transition-colors duration-200 text-sm",title:o("ocrTooltip"),children:[(H===ft.OCR||H===ft.PATH_TO_BOX)&&!qe?m.jsx(br,{}):null,o("ocr")]}),m.jsxs("button",{onClick:jl,disabled:!b.some(w=>w.type==="ocr"&&w.ocrText&&w.ocrText.length>0)||ml,className:"flex justify-center items-center bg-sky-600 hover:bg-sky-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-2 px-3 rounded-lg transition-colors duration-200 text-sm",title:o("translateTooltip"),children:[H===ft.TRANSLATING&&!qe?m.jsx(br,{}):null,o("translate")]}),a&&m.jsx(WE,{onClick:()=>j(w=>!w)})]})]}),m.jsxs("div",{className:"flex-grow flex overflow-hidden",children:[m.jsxs("div",{ref:no,style:{width:`${mn.left}%`},className:"h-full flex-shrink-0 flex flex-col",children:[m.jsx("div",{style:{height:`${Si}%`},className:"flex-shrink-0 overflow-hidden",children:m.jsx(By,{files:n,selectedFile:(a==null?void 0:a.file)||null,onFilesChange:ga,onFileSelect:pa,onFileDelete:ps,onSaveProject:xs,onLoadProject:Yr,onAddImage:Kl})}),m.jsx("div",{onMouseDown:Br,className:"relative h-2 bg-gray-700 hover:bg-indigo-500 cursor-ns-resize flex-shrink-0 group z-10",title:o("resize"),children:m.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 h-4 w-16 bg-gray-600 rounded-full border-2 border-gray-800 transition-colors group-hover:bg-indigo-500 flex items-center justify-center",children:m.jsxs("div",{className:"flex space-x-1",children:[m.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),m.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),m.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]})})}),m.jsx("div",{style:{height:`calc(${100-Si}% - 8px)`},className:"flex-grow overflow-hidden",children:m.jsx(yv,{textBoxes:b,selectedBoxIds:F,onBoxClick:ho,onTextBoxesUpdate:hl})})]}),m.jsx("div",{onMouseDown:w=>Ca(w,"left"),className:"relative w-2 h-full bg-gray-700 hover:bg-indigo-500 cursor-col-resize flex-shrink-0 group z-10",title:o("resize"),children:m.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-4 h-16 bg-gray-600 rounded-full border-2 border-gray-800 transition-colors group-hover:bg-indigo-500 flex items-center justify-center",children:m.jsxs("div",{className:"flex flex-col space-y-1",children:[m.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),m.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),m.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]})})}),m.jsx("div",{style:{width:`${mn.center}%`},className:"h-full flex-shrink-0",children:m.jsx(Xy,{imageUrl:r,textBoxes:Gr,strokes:I,selectedBoxIds:F,editingBoxId:Re,onBoxClick:ho,onBoxDoubleClick:ms,onFinishEditing:ys,onPlainTextChange:ma,onBackgroundClick:Ci,onTextBoxesUpdate:hl,onStrokesUpdate:Lr,onManualSelection:kn,isEyedropperActive:!!ie,onColorPick:Ei,activeTool:_e,brushColor:Ne,paintBrushSize:rn,selectionEraserSize:St,onSelectionErase:fa,brushShape:"round",brushHardness:Dt,brushOpacity:Ot,onMagicWandSelect:yi,selectionMaskUrl:jt,onToggleNotesModal:()=>al(w=>!w)})}),m.jsx("div",{onMouseDown:w=>Ca(w,"right"),className:"relative w-2 h-full bg-gray-700 hover:bg-indigo-500 cursor-col-resize flex-shrink-0 group z-10",title:o("resize"),children:m.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-4 h-16 bg-gray-600 rounded-full border-2 border-gray-800 transition-colors group-hover:bg-indigo-500 flex items-center justify-center",children:m.jsxs("div",{className:"flex flex-col space-y-1",children:[m.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),m.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),m.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]})})}),m.jsx("div",{style:{width:`${mn.right}%`},className:"h-full flex-shrink-0",children:m.jsx(mv,{status:H,ocrText:(Ct==null?void 0:Ct.type)==="ocr"&&Ct.ocrText||"",plainText:(Ct==null?void 0:Ct.type)==="text"&&Ct.plainText||"",selectedFile:!!a,hasAnyBoxes:b.length>0,selectedBox:Ct,onAddFreeTextBox:ya,onSelectAllBoxes:Xl,onDeselectBox:Ci,onPlainTextChange:ma,onFormatChange:Wl,onSplitBox:Or,onUndo:Io,onRedo:Uo,canUndo:z,canRedo:q,onActivateEyedropper:w=>ge(w),activeTool:_e,onToolChange:ye,brushColor:Ne,onBrushColorChange:ct,paintBrushSize:rn,onPaintBrushSizeChange:et,selectionEraserSize:St,onSelectionEraserSizeChange:nn,brushHardness:Dt,onBrushHardnessChange:hn,brushOpacity:Ot,onBrushOpacityChange:In,onSaveCurrentImage:()=>ce(!0),onExportAll:()=>Je(!0),onSaveAsPdf:()=>lt(!0),onBringForward:gs,onSendBackward:On,canBringForward:Yl,canSendBackward:Gn,fonts:He,selectionToRestore:Me,onSelectionRestoreComplete:()=>Be(null),textAreaHeights:yn,onTextAreaHeightsChange:Zt,textBoxes:b,magicWandTolerance:Ze,onMagicWandToleranceChange:Tt,isSelectionActive:!!ke,onClearSelection:rl,onRecallSelection:cs,canRecallSelection:!!Qe,onInpaint:xa,inpaintAutoColor:Bn,onInpaintAutoColorChange:Ht,inpaintManualColor:Jn,onInpaintManualColorChange:Un,onLaunchImageEditor:ul,styleSlots:un,onSaveStyle:Ti,onExportOcr:Jr,onExportText:Kr,onImportText:Xr})})]}),da&&m.jsx(Xv,{initialNotes:Ol,onSave:qo,onClose:()=>al(!1)}),Bt.isOpen&&Bt.imageDataUrl&&m.jsx(Vv,{imageDataUrl:Bt.imageDataUrl,backgroundImageUrl:Bt.backgroundImageUrl,backgroundBounds:Bt.backgroundBounds,onApply:ds,onClose:()=>qn({isOpen:!1})}),me&&a&&m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:m.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-600 w-96 space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-white",children:o("saveModalTitle")}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium text-gray-300",children:o("format")}),m.jsxs("select",{value:De,onChange:w=>Z(w.target.value),className:"w-full mt-1 bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[m.jsx("option",{value:"png",children:"PNG"}),m.jsx("option",{value:"jpg",children:"JPG"}),m.jsx("option",{value:"webp",children:"WebP"})]})]}),(De==="jpg"||De==="webp")&&m.jsxs("div",{children:[m.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[o("quality",{quality:gt})," ",it&&m.jsx("span",{className:"text-gray-400",children:o("estimatedSize",{size:it})})]}),m.jsx("input",{type:"range",min:"1",max:"100",value:gt,onChange:w=>fe(parseInt(w.target.value)),className:"w-full h-2 mt-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>ce(!1),className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg",children:o("cancel")}),m.jsx("button",{onClick:va,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg",children:o("download")})]})]})}),se&&m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:m.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-600 w-96 space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-white",children:o("exportAllModalTitle")}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium text-gray-300",children:o("format")}),m.jsxs("select",{value:Ge,onChange:w=>st(w.target.value),className:"w-full mt-1 bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[m.jsx("option",{value:"png",children:"PNG"}),m.jsx("option",{value:"jpg",children:"JPG"}),m.jsx("option",{value:"webp",children:"WebP"})]})]}),(Ge==="jpg"||Ge==="webp")&&m.jsxs("div",{children:[m.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[o("quality",{quality:U})," ",be&&m.jsx("span",{className:"text-gray-400",children:o("estimatedSize",{size:be})})]}),m.jsx("input",{type:"range",min:"1",max:"100",value:U,onChange:w=>te(parseInt(w.target.value)),className:"w-full h-2 mt-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>Je(!1),className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg",children:o("cancel")}),m.jsx("button",{onClick:Fr,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg",children:o("exportAction")})]})]})}),je&&m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:m.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-600 w-96 space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-white",children:o("exportAsPdfModalTitle")}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium text-gray-300",children:o("format")}),m.jsxs("select",{value:ut,onChange:w=>Ut(w.target.value),className:"w-full mt-1 bg-gray-900 border border-gray-600 rounded-lg p-2 text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[m.jsx("option",{value:"png",children:"PNG"}),m.jsx("option",{value:"jpg",children:"JPG"}),m.jsx("option",{value:"webp",children:"WebP"})]})]}),(ut==="jpg"||ut==="webp")&&m.jsxs("div",{children:[m.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[o("quality",{quality:pt})," ",cn&&m.jsx("span",{className:"text-gray-400",children:o("estimatedSize",{size:cn})})]}),m.jsx("input",{type:"range",min:"1",max:"100",value:pt,onChange:w=>Dn(parseInt(w.target.value)),className:"w-full h-2 mt-2 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>lt(!1),className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg",children:o("cancel")}),m.jsx("button",{onClick:Hr,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg",children:o("exportAction")})]})]})}),Kt&&m.jsx(Iv,{profiles:bn,activeProfileId:tt,currentUnsavedSettings:qr,onSave:hs,onClose:()=>bt(!1),fonts:xe,visibleFonts:He,appVersion:Ho,onLoadSystemFonts:Do,onLoadFontsFromFiles:Pr,onClearCustomFonts:fs}),to&&a&&m.jsx(zv,{imageUrl:a.url,onClose:()=>j(!1)}),Oe&&m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:m.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl border border-red-500 w-96 space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-red-400",children:o("apiKeyError")}),m.jsx("p",{className:"text-gray-300",children:o("apiKeyErrorBody1")}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{onClick:()=>Ke(null),className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg",children:o("close")})})]})})]})},ew=()=>{const[o,n]=A.useState("en"),i=A.useCallback((u,r)=>{var y,v;let p=((y=Jp[o])==null?void 0:y[u])??((v=Jp.en)==null?void 0:v[u])??u;return r&&Object.entries(r).forEach(([g,S])=>{p=p.replace(`{${g}}`,String(S))}),p},[o]),a=A.useMemo(()=>({language:o,setLanguage:n,t:i}),[o,i]);return m.jsx(Cm.Provider,{value:a,children:m.jsx($E,{})})},t0=document.getElementById("root");if(!t0)throw new Error("Could not find root element to mount to");const tw=Ly.createRoot(t0);tw.render(m.jsx(wo.StrictMode,{children:m.jsx(ew,{})}));
